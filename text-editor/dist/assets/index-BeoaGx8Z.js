var p1=Object.defineProperty;var m1=(t,e,n)=>e in t?p1(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Jr=(t,e,n)=>m1(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function Fg(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Pg={exports:{}},Yc={},Lg={exports:{}},me={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oa=Symbol.for("react.element"),y1=Symbol.for("react.portal"),g1=Symbol.for("react.fragment"),v1=Symbol.for("react.strict_mode"),w1=Symbol.for("react.profiler"),_1=Symbol.for("react.provider"),x1=Symbol.for("react.context"),b1=Symbol.for("react.forward_ref"),S1=Symbol.for("react.suspense"),I1=Symbol.for("react.memo"),E1=Symbol.for("react.lazy"),om=Symbol.iterator;function N1(t){return t===null||typeof t!="object"?null:(t=om&&t[om]||t["@@iterator"],typeof t=="function"?t:null)}var Mg={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Dg=Object.assign,Bg={};function Ci(t,e,n){this.props=t,this.context=e,this.refs=Bg,this.updater=n||Mg}Ci.prototype.isReactComponent={};Ci.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ci.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Ug(){}Ug.prototype=Ci.prototype;function oh(t,e,n){this.props=t,this.context=e,this.refs=Bg,this.updater=n||Mg}var ah=oh.prototype=new Ug;ah.constructor=oh;Dg(ah,Ci.prototype);ah.isPureReactComponent=!0;var am=Array.isArray,$g=Object.prototype.hasOwnProperty,lh={current:null},zg={key:!0,ref:!0,__self:!0,__source:!0};function Vg(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)$g.call(e,r)&&!zg.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:oa,type:t,key:i,ref:o,props:s,_owner:lh.current}}function k1(t,e){return{$$typeof:oa,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function ch(t){return typeof t=="object"&&t!==null&&t.$$typeof===oa}function A1(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var lm=/\/+/g;function Cu(t,e){return typeof t=="object"&&t!==null&&t.key!=null?A1(""+t.key):e.toString(36)}function il(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case oa:case y1:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Cu(o,0):r,am(s)?(n="",t!=null&&(n=t.replace(lm,"$&/")+"/"),il(s,e,n,"",function(u){return u})):s!=null&&(ch(s)&&(s=k1(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(lm,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",am(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+Cu(i,a);o+=il(i,e,n,l,s)}else if(l=N1(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+Cu(i,a++),o+=il(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Sa(t,e,n){if(t==null)return t;var r=[],s=0;return il(t,r,"","",function(i){return e.call(n,i,s++)}),r}function T1(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var St={current:null},ol={transition:null},O1={ReactCurrentDispatcher:St,ReactCurrentBatchConfig:ol,ReactCurrentOwner:lh};function Wg(){throw Error("act(...) is not supported in production builds of React.")}me.Children={map:Sa,forEach:function(t,e,n){Sa(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Sa(t,function(){e++}),e},toArray:function(t){return Sa(t,function(e){return e})||[]},only:function(t){if(!ch(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};me.Component=Ci;me.Fragment=g1;me.Profiler=w1;me.PureComponent=oh;me.StrictMode=v1;me.Suspense=S1;me.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O1;me.act=Wg;me.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Dg({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=lh.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)$g.call(e,l)&&!zg.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:oa,type:t.type,key:s,ref:i,props:r,_owner:o}};me.createContext=function(t){return t={$$typeof:x1,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:_1,_context:t},t.Consumer=t};me.createElement=Vg;me.createFactory=function(t){var e=Vg.bind(null,t);return e.type=t,e};me.createRef=function(){return{current:null}};me.forwardRef=function(t){return{$$typeof:b1,render:t}};me.isValidElement=ch;me.lazy=function(t){return{$$typeof:E1,_payload:{_status:-1,_result:t},_init:T1}};me.memo=function(t,e){return{$$typeof:I1,type:t,compare:e===void 0?null:e}};me.startTransition=function(t){var e=ol.transition;ol.transition={};try{t()}finally{ol.transition=e}};me.unstable_act=Wg;me.useCallback=function(t,e){return St.current.useCallback(t,e)};me.useContext=function(t){return St.current.useContext(t)};me.useDebugValue=function(){};me.useDeferredValue=function(t){return St.current.useDeferredValue(t)};me.useEffect=function(t,e){return St.current.useEffect(t,e)};me.useId=function(){return St.current.useId()};me.useImperativeHandle=function(t,e,n){return St.current.useImperativeHandle(t,e,n)};me.useInsertionEffect=function(t,e){return St.current.useInsertionEffect(t,e)};me.useLayoutEffect=function(t,e){return St.current.useLayoutEffect(t,e)};me.useMemo=function(t,e){return St.current.useMemo(t,e)};me.useReducer=function(t,e,n){return St.current.useReducer(t,e,n)};me.useRef=function(t){return St.current.useRef(t)};me.useState=function(t){return St.current.useState(t)};me.useSyncExternalStore=function(t,e,n){return St.current.useSyncExternalStore(t,e,n)};me.useTransition=function(){return St.current.useTransition()};me.version="18.3.1";Lg.exports=me;var T=Lg.exports;const Tr=Fg(T);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var C1=T,R1=Symbol.for("react.element"),j1=Symbol.for("react.fragment"),F1=Object.prototype.hasOwnProperty,P1=C1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,L1={key:!0,ref:!0,__self:!0,__source:!0};function qg(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)F1.call(e,r)&&!L1.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:R1,type:t,key:i,ref:o,props:s,_owner:P1.current}}Yc.Fragment=j1;Yc.jsx=qg;Yc.jsxs=qg;Pg.exports=Yc;var c=Pg.exports,Rd={},Hg={exports:{}},Kt={},Qg={exports:{}},Kg={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(M,W){var K=M.length;M.push(W);e:for(;0<K;){var O=K-1>>>1,D=M[O];if(0<s(D,W))M[O]=W,M[K]=D,K=O;else break e}}function n(M){return M.length===0?null:M[0]}function r(M){if(M.length===0)return null;var W=M[0],K=M.pop();if(K!==W){M[0]=K;e:for(var O=0,D=M.length,fe=D>>>1;O<fe;){var be=2*(O+1)-1,xe=M[be],Yt=be+1,pr=M[Yt];if(0>s(xe,K))Yt<D&&0>s(pr,xe)?(M[O]=pr,M[Yt]=K,O=Yt):(M[O]=xe,M[be]=K,O=be);else if(Yt<D&&0>s(pr,K))M[O]=pr,M[Yt]=K,O=Yt;else break e}}return W}function s(M,W){var K=M.sortIndex-W.sortIndex;return K!==0?K:M.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],d=1,f=null,m=3,y=!1,v=!1,_=!1,b=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,h=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function g(M){for(var W=n(u);W!==null;){if(W.callback===null)r(u);else if(W.startTime<=M)r(u),W.sortIndex=W.expirationTime,e(l,W);else break;W=n(u)}}function S(M){if(_=!1,g(M),!v)if(n(l)!==null)v=!0,R(x);else{var W=n(u);W!==null&&oe(S,W.startTime-M)}}function x(M,W){v=!1,_&&(_=!1,p(k),k=-1),y=!0;var K=m;try{for(g(W),f=n(l);f!==null&&(!(f.expirationTime>W)||M&&!L());){var O=f.callback;if(typeof O=="function"){f.callback=null,m=f.priorityLevel;var D=O(f.expirationTime<=W);W=t.unstable_now(),typeof D=="function"?f.callback=D:f===n(l)&&r(l),g(W)}else r(l);f=n(l)}if(f!==null)var fe=!0;else{var be=n(u);be!==null&&oe(S,be.startTime-W),fe=!1}return fe}finally{f=null,m=K,y=!1}}var I=!1,N=null,k=-1,C=5,A=-1;function L(){return!(t.unstable_now()-A<C)}function H(){if(N!==null){var M=t.unstable_now();A=M;var W=!0;try{W=N(!0,M)}finally{W?ye():(I=!1,N=null)}}else I=!1}var ye;if(typeof h=="function")ye=function(){h(H)};else if(typeof MessageChannel<"u"){var le=new MessageChannel,j=le.port2;le.port1.onmessage=H,ye=function(){j.postMessage(null)}}else ye=function(){b(H,0)};function R(M){N=M,I||(I=!0,ye())}function oe(M,W){k=b(function(){M(t.unstable_now())},W)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(M){M.callback=null},t.unstable_continueExecution=function(){v||y||(v=!0,R(x))},t.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<M?Math.floor(1e3/M):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(M){switch(m){case 1:case 2:case 3:var W=3;break;default:W=m}var K=m;m=W;try{return M()}finally{m=K}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(M,W){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var K=m;m=M;try{return W()}finally{m=K}},t.unstable_scheduleCallback=function(M,W,K){var O=t.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?O+K:O):K=O,M){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=K+D,M={id:d++,callback:W,priorityLevel:M,startTime:K,expirationTime:D,sortIndex:-1},K>O?(M.sortIndex=K,e(u,M),n(l)===null&&M===n(u)&&(_?(p(k),k=-1):_=!0,oe(S,K-O))):(M.sortIndex=D,e(l,M),v||y||(v=!0,R(x))),M},t.unstable_shouldYield=L,t.unstable_wrapCallback=function(M){var W=m;return function(){var K=m;m=W;try{return M.apply(this,arguments)}finally{m=K}}}})(Kg);Qg.exports=Kg;var M1=Qg.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var D1=T,Ht=M1;function P(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Jg=new Set,jo={};function _s(t,e){yi(t,e),yi(t+"Capture",e)}function yi(t,e){for(jo[t]=e,t=0;t<e.length;t++)Jg.add(e[t])}var ir=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),jd=Object.prototype.hasOwnProperty,B1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,cm={},um={};function U1(t){return jd.call(um,t)?!0:jd.call(cm,t)?!1:B1.test(t)?um[t]=!0:(cm[t]=!0,!1)}function $1(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function z1(t,e,n,r){if(e===null||typeof e>"u"||$1(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function It(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var at={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){at[t]=new It(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];at[e]=new It(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){at[t]=new It(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){at[t]=new It(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){at[t]=new It(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){at[t]=new It(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){at[t]=new It(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){at[t]=new It(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){at[t]=new It(t,5,!1,t.toLowerCase(),null,!1,!1)});var uh=/[\-:]([a-z])/g;function dh(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(uh,dh);at[e]=new It(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(uh,dh);at[e]=new It(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(uh,dh);at[e]=new It(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){at[t]=new It(t,1,!1,t.toLowerCase(),null,!1,!1)});at.xlinkHref=new It("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){at[t]=new It(t,1,!1,t.toLowerCase(),null,!0,!0)});function fh(t,e,n,r){var s=at.hasOwnProperty(e)?at[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(z1(e,n,s,r)&&(n=null),r||s===null?U1(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var ur=D1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ia=Symbol.for("react.element"),qs=Symbol.for("react.portal"),Hs=Symbol.for("react.fragment"),hh=Symbol.for("react.strict_mode"),Fd=Symbol.for("react.profiler"),Yg=Symbol.for("react.provider"),Gg=Symbol.for("react.context"),ph=Symbol.for("react.forward_ref"),Pd=Symbol.for("react.suspense"),Ld=Symbol.for("react.suspense_list"),mh=Symbol.for("react.memo"),xr=Symbol.for("react.lazy"),Xg=Symbol.for("react.offscreen"),dm=Symbol.iterator;function Bi(t){return t===null||typeof t!="object"?null:(t=dm&&t[dm]||t["@@iterator"],typeof t=="function"?t:null)}var $e=Object.assign,Ru;function Ji(t){if(Ru===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Ru=e&&e[1]||""}return`
`+Ru+t}var ju=!1;function Fu(t,e){if(!t||ju)return"";ju=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{ju=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ji(t):""}function V1(t){switch(t.tag){case 5:return Ji(t.type);case 16:return Ji("Lazy");case 13:return Ji("Suspense");case 19:return Ji("SuspenseList");case 0:case 2:case 15:return t=Fu(t.type,!1),t;case 11:return t=Fu(t.type.render,!1),t;case 1:return t=Fu(t.type,!0),t;default:return""}}function Md(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Hs:return"Fragment";case qs:return"Portal";case Fd:return"Profiler";case hh:return"StrictMode";case Pd:return"Suspense";case Ld:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Gg:return(t.displayName||"Context")+".Consumer";case Yg:return(t._context.displayName||"Context")+".Provider";case ph:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case mh:return e=t.displayName||null,e!==null?e:Md(t.type)||"Memo";case xr:e=t._payload,t=t._init;try{return Md(t(e))}catch{}}return null}function W1(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Md(e);case 8:return e===hh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Br(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Zg(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function q1(t){var e=Zg(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ea(t){t._valueTracker||(t._valueTracker=q1(t))}function ev(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Zg(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Bl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Dd(t,e){var n=e.checked;return $e({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n!=null?n:t._wrapperState.initialChecked})}function fm(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Br(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function tv(t,e){e=e.checked,e!=null&&fh(t,"checked",e,!1)}function Bd(t,e){tv(t,e);var n=Br(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Ud(t,e.type,n):e.hasOwnProperty("defaultValue")&&Ud(t,e.type,Br(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function hm(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Ud(t,e,n){(e!=="number"||Bl(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Yi=Array.isArray;function oi(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Br(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function $d(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(P(91));return $e({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function pm(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(P(92));if(Yi(n)){if(1<n.length)throw Error(P(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Br(n)}}function nv(t,e){var n=Br(e.value),r=Br(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function mm(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function rv(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function zd(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?rv(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Na,sv=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Na=Na||document.createElement("div"),Na.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Na.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Fo(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var vo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},H1=["Webkit","ms","Moz","O"];Object.keys(vo).forEach(function(t){H1.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),vo[e]=vo[t]})});function iv(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||vo.hasOwnProperty(t)&&vo[t]?(""+e).trim():e+"px"}function ov(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=iv(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var Q1=$e({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Vd(t,e){if(e){if(Q1[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(P(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(P(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(P(61))}if(e.style!=null&&typeof e.style!="object")throw Error(P(62))}}function Wd(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var qd=null;function yh(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Hd=null,ai=null,li=null;function ym(t){if(t=ca(t)){if(typeof Hd!="function")throw Error(P(280));var e=t.stateNode;e&&(e=tu(e),Hd(t.stateNode,t.type,e))}}function av(t){ai?li?li.push(t):li=[t]:ai=t}function lv(){if(ai){var t=ai,e=li;if(li=ai=null,ym(t),e)for(t=0;t<e.length;t++)ym(e[t])}}function cv(t,e){return t(e)}function uv(){}var Pu=!1;function dv(t,e,n){if(Pu)return t(e,n);Pu=!0;try{return cv(t,e,n)}finally{Pu=!1,(ai!==null||li!==null)&&(uv(),lv())}}function Po(t,e){var n=t.stateNode;if(n===null)return null;var r=tu(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(P(231,e,typeof n));return n}var Qd=!1;if(ir)try{var Ui={};Object.defineProperty(Ui,"passive",{get:function(){Qd=!0}}),window.addEventListener("test",Ui,Ui),window.removeEventListener("test",Ui,Ui)}catch{Qd=!1}function K1(t,e,n,r,s,i,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(d){this.onError(d)}}var wo=!1,Ul=null,$l=!1,Kd=null,J1={onError:function(t){wo=!0,Ul=t}};function Y1(t,e,n,r,s,i,o,a,l){wo=!1,Ul=null,K1.apply(J1,arguments)}function G1(t,e,n,r,s,i,o,a,l){if(Y1.apply(this,arguments),wo){if(wo){var u=Ul;wo=!1,Ul=null}else throw Error(P(198));$l||($l=!0,Kd=u)}}function xs(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function fv(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function gm(t){if(xs(t)!==t)throw Error(P(188))}function X1(t){var e=t.alternate;if(!e){if(e=xs(t),e===null)throw Error(P(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return gm(s),t;if(i===r)return gm(s),e;i=i.sibling}throw Error(P(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(P(189))}}if(n.alternate!==r)throw Error(P(190))}if(n.tag!==3)throw Error(P(188));return n.stateNode.current===n?t:e}function hv(t){return t=X1(t),t!==null?pv(t):null}function pv(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=pv(t);if(e!==null)return e;t=t.sibling}return null}var mv=Ht.unstable_scheduleCallback,vm=Ht.unstable_cancelCallback,Z1=Ht.unstable_shouldYield,eS=Ht.unstable_requestPaint,We=Ht.unstable_now,tS=Ht.unstable_getCurrentPriorityLevel,gh=Ht.unstable_ImmediatePriority,yv=Ht.unstable_UserBlockingPriority,zl=Ht.unstable_NormalPriority,nS=Ht.unstable_LowPriority,gv=Ht.unstable_IdlePriority,Gc=null,Dn=null;function rS(t){if(Dn&&typeof Dn.onCommitFiberRoot=="function")try{Dn.onCommitFiberRoot(Gc,t,void 0,(t.current.flags&128)===128)}catch{}}var wn=Math.clz32?Math.clz32:oS,sS=Math.log,iS=Math.LN2;function oS(t){return t>>>=0,t===0?32:31-(sS(t)/iS|0)|0}var ka=64,Aa=4194304;function Gi(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Vl(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=Gi(a):(i&=o,i!==0&&(r=Gi(i)))}else o=n&~s,o!==0?r=Gi(o):i!==0&&(r=Gi(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-wn(e),s=1<<n,r|=t[n],e&=~s;return r}function aS(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function lS(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-wn(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=aS(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function Jd(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function vv(){var t=ka;return ka<<=1,!(ka&4194240)&&(ka=64),t}function Lu(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function aa(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-wn(e),t[e]=n}function cS(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-wn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function vh(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-wn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Oe=0;function wv(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var _v,wh,xv,bv,Sv,Yd=!1,Ta=[],Or=null,Cr=null,Rr=null,Lo=new Map,Mo=new Map,Er=[],uS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function wm(t,e){switch(t){case"focusin":case"focusout":Or=null;break;case"dragenter":case"dragleave":Cr=null;break;case"mouseover":case"mouseout":Rr=null;break;case"pointerover":case"pointerout":Lo.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mo.delete(e.pointerId)}}function $i(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=ca(e),e!==null&&wh(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function dS(t,e,n,r,s){switch(e){case"focusin":return Or=$i(Or,t,e,n,r,s),!0;case"dragenter":return Cr=$i(Cr,t,e,n,r,s),!0;case"mouseover":return Rr=$i(Rr,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Lo.set(i,$i(Lo.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Mo.set(i,$i(Mo.get(i)||null,t,e,n,r,s)),!0}return!1}function Iv(t){var e=rs(t.target);if(e!==null){var n=xs(e);if(n!==null){if(e=n.tag,e===13){if(e=fv(n),e!==null){t.blockedOn=e,Sv(t.priority,function(){xv(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function al(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Gd(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);qd=r,n.target.dispatchEvent(r),qd=null}else return e=ca(n),e!==null&&wh(e),t.blockedOn=n,!1;e.shift()}return!0}function _m(t,e,n){al(t)&&n.delete(e)}function fS(){Yd=!1,Or!==null&&al(Or)&&(Or=null),Cr!==null&&al(Cr)&&(Cr=null),Rr!==null&&al(Rr)&&(Rr=null),Lo.forEach(_m),Mo.forEach(_m)}function zi(t,e){t.blockedOn===e&&(t.blockedOn=null,Yd||(Yd=!0,Ht.unstable_scheduleCallback(Ht.unstable_NormalPriority,fS)))}function Do(t){function e(s){return zi(s,t)}if(0<Ta.length){zi(Ta[0],t);for(var n=1;n<Ta.length;n++){var r=Ta[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Or!==null&&zi(Or,t),Cr!==null&&zi(Cr,t),Rr!==null&&zi(Rr,t),Lo.forEach(e),Mo.forEach(e),n=0;n<Er.length;n++)r=Er[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Er.length&&(n=Er[0],n.blockedOn===null);)Iv(n),n.blockedOn===null&&Er.shift()}var ci=ur.ReactCurrentBatchConfig,Wl=!0;function hS(t,e,n,r){var s=Oe,i=ci.transition;ci.transition=null;try{Oe=1,_h(t,e,n,r)}finally{Oe=s,ci.transition=i}}function pS(t,e,n,r){var s=Oe,i=ci.transition;ci.transition=null;try{Oe=4,_h(t,e,n,r)}finally{Oe=s,ci.transition=i}}function _h(t,e,n,r){if(Wl){var s=Gd(t,e,n,r);if(s===null)Hu(t,e,r,ql,n),wm(t,r);else if(dS(s,t,e,n,r))r.stopPropagation();else if(wm(t,r),e&4&&-1<uS.indexOf(t)){for(;s!==null;){var i=ca(s);if(i!==null&&_v(i),i=Gd(t,e,n,r),i===null&&Hu(t,e,r,ql,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Hu(t,e,r,null,n)}}var ql=null;function Gd(t,e,n,r){if(ql=null,t=yh(r),t=rs(t),t!==null)if(e=xs(t),e===null)t=null;else if(n=e.tag,n===13){if(t=fv(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return ql=t,null}function Ev(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(tS()){case gh:return 1;case yv:return 4;case zl:case nS:return 16;case gv:return 536870912;default:return 16}default:return 16}}var kr=null,xh=null,ll=null;function Nv(){if(ll)return ll;var t,e=xh,n=e.length,r,s="value"in kr?kr.value:kr.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return ll=s.slice(t,1<r?1-r:void 0)}function cl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Oa(){return!0}function xm(){return!1}function Jt(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Oa:xm,this.isPropagationStopped=xm,this}return $e(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Oa)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Oa)},persist:function(){},isPersistent:Oa}),e}var Ri={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},bh=Jt(Ri),la=$e({},Ri,{view:0,detail:0}),mS=Jt(la),Mu,Du,Vi,Xc=$e({},la,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sh,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Vi&&(Vi&&t.type==="mousemove"?(Mu=t.screenX-Vi.screenX,Du=t.screenY-Vi.screenY):Du=Mu=0,Vi=t),Mu)},movementY:function(t){return"movementY"in t?t.movementY:Du}}),bm=Jt(Xc),yS=$e({},Xc,{dataTransfer:0}),gS=Jt(yS),vS=$e({},la,{relatedTarget:0}),Bu=Jt(vS),wS=$e({},Ri,{animationName:0,elapsedTime:0,pseudoElement:0}),_S=Jt(wS),xS=$e({},Ri,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),bS=Jt(xS),SS=$e({},Ri,{data:0}),Sm=Jt(SS),IS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ES={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},NS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kS(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=NS[t])?!!e[t]:!1}function Sh(){return kS}var AS=$e({},la,{key:function(t){if(t.key){var e=IS[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=cl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?ES[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sh,charCode:function(t){return t.type==="keypress"?cl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?cl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),TS=Jt(AS),OS=$e({},Xc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Im=Jt(OS),CS=$e({},la,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sh}),RS=Jt(CS),jS=$e({},Ri,{propertyName:0,elapsedTime:0,pseudoElement:0}),FS=Jt(jS),PS=$e({},Xc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),LS=Jt(PS),MS=[9,13,27,32],Ih=ir&&"CompositionEvent"in window,_o=null;ir&&"documentMode"in document&&(_o=document.documentMode);var DS=ir&&"TextEvent"in window&&!_o,kv=ir&&(!Ih||_o&&8<_o&&11>=_o),Em=" ",Nm=!1;function Av(t,e){switch(t){case"keyup":return MS.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Tv(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Qs=!1;function BS(t,e){switch(t){case"compositionend":return Tv(e);case"keypress":return e.which!==32?null:(Nm=!0,Em);case"textInput":return t=e.data,t===Em&&Nm?null:t;default:return null}}function US(t,e){if(Qs)return t==="compositionend"||!Ih&&Av(t,e)?(t=Nv(),ll=xh=kr=null,Qs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return kv&&e.locale!=="ko"?null:e.data;default:return null}}var $S={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function km(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!$S[t.type]:e==="textarea"}function Ov(t,e,n,r){av(r),e=Hl(e,"onChange"),0<e.length&&(n=new bh("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var xo=null,Bo=null;function zS(t){$v(t,0)}function Zc(t){var e=Ys(t);if(ev(e))return t}function VS(t,e){if(t==="change")return e}var Cv=!1;if(ir){var Uu;if(ir){var $u="oninput"in document;if(!$u){var Am=document.createElement("div");Am.setAttribute("oninput","return;"),$u=typeof Am.oninput=="function"}Uu=$u}else Uu=!1;Cv=Uu&&(!document.documentMode||9<document.documentMode)}function Tm(){xo&&(xo.detachEvent("onpropertychange",Rv),Bo=xo=null)}function Rv(t){if(t.propertyName==="value"&&Zc(Bo)){var e=[];Ov(e,Bo,t,yh(t)),dv(zS,e)}}function WS(t,e,n){t==="focusin"?(Tm(),xo=e,Bo=n,xo.attachEvent("onpropertychange",Rv)):t==="focusout"&&Tm()}function qS(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Zc(Bo)}function HS(t,e){if(t==="click")return Zc(e)}function QS(t,e){if(t==="input"||t==="change")return Zc(e)}function KS(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var bn=typeof Object.is=="function"?Object.is:KS;function Uo(t,e){if(bn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!jd.call(e,s)||!bn(t[s],e[s]))return!1}return!0}function Om(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Cm(t,e){var n=Om(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Om(n)}}function jv(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?jv(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Fv(){for(var t=window,e=Bl();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Bl(t.document)}return e}function Eh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function JS(t){var e=Fv(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&jv(n.ownerDocument.documentElement,n)){if(r!==null&&Eh(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Cm(n,i);var o=Cm(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var YS=ir&&"documentMode"in document&&11>=document.documentMode,Ks=null,Xd=null,bo=null,Zd=!1;function Rm(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Zd||Ks==null||Ks!==Bl(r)||(r=Ks,"selectionStart"in r&&Eh(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),bo&&Uo(bo,r)||(bo=r,r=Hl(Xd,"onSelect"),0<r.length&&(e=new bh("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ks)))}function Ca(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Js={animationend:Ca("Animation","AnimationEnd"),animationiteration:Ca("Animation","AnimationIteration"),animationstart:Ca("Animation","AnimationStart"),transitionend:Ca("Transition","TransitionEnd")},zu={},Pv={};ir&&(Pv=document.createElement("div").style,"AnimationEvent"in window||(delete Js.animationend.animation,delete Js.animationiteration.animation,delete Js.animationstart.animation),"TransitionEvent"in window||delete Js.transitionend.transition);function eu(t){if(zu[t])return zu[t];if(!Js[t])return t;var e=Js[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Pv)return zu[t]=e[n];return t}var Lv=eu("animationend"),Mv=eu("animationiteration"),Dv=eu("animationstart"),Bv=eu("transitionend"),Uv=new Map,jm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function qr(t,e){Uv.set(t,e),_s(e,[t])}for(var Vu=0;Vu<jm.length;Vu++){var Wu=jm[Vu],GS=Wu.toLowerCase(),XS=Wu[0].toUpperCase()+Wu.slice(1);qr(GS,"on"+XS)}qr(Lv,"onAnimationEnd");qr(Mv,"onAnimationIteration");qr(Dv,"onAnimationStart");qr("dblclick","onDoubleClick");qr("focusin","onFocus");qr("focusout","onBlur");qr(Bv,"onTransitionEnd");yi("onMouseEnter",["mouseout","mouseover"]);yi("onMouseLeave",["mouseout","mouseover"]);yi("onPointerEnter",["pointerout","pointerover"]);yi("onPointerLeave",["pointerout","pointerover"]);_s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));_s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));_s("onBeforeInput",["compositionend","keypress","textInput","paste"]);_s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));_s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));_s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ZS=new Set("cancel close invalid load scroll toggle".split(" ").concat(Xi));function Fm(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,G1(r,e,void 0,t),t.currentTarget=null}function $v(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;Fm(s,a,u),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;Fm(s,a,u),i=l}}}if($l)throw t=Kd,$l=!1,Kd=null,t}function Fe(t,e){var n=e[sf];n===void 0&&(n=e[sf]=new Set);var r=t+"__bubble";n.has(r)||(zv(e,t,2,!1),n.add(r))}function qu(t,e,n){var r=0;e&&(r|=4),zv(n,t,r,e)}var Ra="_reactListening"+Math.random().toString(36).slice(2);function $o(t){if(!t[Ra]){t[Ra]=!0,Jg.forEach(function(n){n!=="selectionchange"&&(ZS.has(n)||qu(n,!1,t),qu(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ra]||(e[Ra]=!0,qu("selectionchange",!1,e))}}function zv(t,e,n,r){switch(Ev(e)){case 1:var s=hS;break;case 4:s=pS;break;default:s=_h}n=s.bind(null,e,n,t),s=void 0,!Qd||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Hu(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=rs(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}dv(function(){var u=i,d=yh(n),f=[];e:{var m=Uv.get(t);if(m!==void 0){var y=bh,v=t;switch(t){case"keypress":if(cl(n)===0)break e;case"keydown":case"keyup":y=TS;break;case"focusin":v="focus",y=Bu;break;case"focusout":v="blur",y=Bu;break;case"beforeblur":case"afterblur":y=Bu;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=bm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=gS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=RS;break;case Lv:case Mv:case Dv:y=_S;break;case Bv:y=FS;break;case"scroll":y=mS;break;case"wheel":y=LS;break;case"copy":case"cut":case"paste":y=bS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=Im}var _=(e&4)!==0,b=!_&&t==="scroll",p=_?m!==null?m+"Capture":null:m;_=[];for(var h=u,g;h!==null;){g=h;var S=g.stateNode;if(g.tag===5&&S!==null&&(g=S,p!==null&&(S=Po(h,p),S!=null&&_.push(zo(h,S,g)))),b)break;h=h.return}0<_.length&&(m=new y(m,v,null,n,d),f.push({event:m,listeners:_}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",m&&n!==qd&&(v=n.relatedTarget||n.fromElement)&&(rs(v)||v[or]))break e;if((y||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,y?(v=n.relatedTarget||n.toElement,y=u,v=v?rs(v):null,v!==null&&(b=xs(v),v!==b||v.tag!==5&&v.tag!==6)&&(v=null)):(y=null,v=u),y!==v)){if(_=bm,S="onMouseLeave",p="onMouseEnter",h="mouse",(t==="pointerout"||t==="pointerover")&&(_=Im,S="onPointerLeave",p="onPointerEnter",h="pointer"),b=y==null?m:Ys(y),g=v==null?m:Ys(v),m=new _(S,h+"leave",y,n,d),m.target=b,m.relatedTarget=g,S=null,rs(d)===u&&(_=new _(p,h+"enter",v,n,d),_.target=g,_.relatedTarget=b,S=_),b=S,y&&v)t:{for(_=y,p=v,h=0,g=_;g;g=Es(g))h++;for(g=0,S=p;S;S=Es(S))g++;for(;0<h-g;)_=Es(_),h--;for(;0<g-h;)p=Es(p),g--;for(;h--;){if(_===p||p!==null&&_===p.alternate)break t;_=Es(_),p=Es(p)}_=null}else _=null;y!==null&&Pm(f,m,y,_,!1),v!==null&&b!==null&&Pm(f,b,v,_,!0)}}e:{if(m=u?Ys(u):window,y=m.nodeName&&m.nodeName.toLowerCase(),y==="select"||y==="input"&&m.type==="file")var x=VS;else if(km(m))if(Cv)x=QS;else{x=qS;var I=WS}else(y=m.nodeName)&&y.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(x=HS);if(x&&(x=x(t,u))){Ov(f,x,n,d);break e}I&&I(t,m,u),t==="focusout"&&(I=m._wrapperState)&&I.controlled&&m.type==="number"&&Ud(m,"number",m.value)}switch(I=u?Ys(u):window,t){case"focusin":(km(I)||I.contentEditable==="true")&&(Ks=I,Xd=u,bo=null);break;case"focusout":bo=Xd=Ks=null;break;case"mousedown":Zd=!0;break;case"contextmenu":case"mouseup":case"dragend":Zd=!1,Rm(f,n,d);break;case"selectionchange":if(YS)break;case"keydown":case"keyup":Rm(f,n,d)}var N;if(Ih)e:{switch(t){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Qs?Av(t,n)&&(k="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(k="onCompositionStart");k&&(kv&&n.locale!=="ko"&&(Qs||k!=="onCompositionStart"?k==="onCompositionEnd"&&Qs&&(N=Nv()):(kr=d,xh="value"in kr?kr.value:kr.textContent,Qs=!0)),I=Hl(u,k),0<I.length&&(k=new Sm(k,t,null,n,d),f.push({event:k,listeners:I}),N?k.data=N:(N=Tv(n),N!==null&&(k.data=N)))),(N=DS?BS(t,n):US(t,n))&&(u=Hl(u,"onBeforeInput"),0<u.length&&(d=new Sm("onBeforeInput","beforeinput",null,n,d),f.push({event:d,listeners:u}),d.data=N))}$v(f,e)})}function zo(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Hl(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Po(t,n),i!=null&&r.unshift(zo(t,i,s)),i=Po(t,e),i!=null&&r.push(zo(t,i,s))),t=t.return}return r}function Es(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Pm(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,s?(l=Po(n,i),l!=null&&o.unshift(zo(n,l,a))):s||(l=Po(n,i),l!=null&&o.push(zo(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var e2=/\r\n?/g,t2=/\u0000|\uFFFD/g;function Lm(t){return(typeof t=="string"?t:""+t).replace(e2,`
`).replace(t2,"")}function ja(t,e,n){if(e=Lm(e),Lm(t)!==e&&n)throw Error(P(425))}function Ql(){}var ef=null,tf=null;function nf(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var rf=typeof setTimeout=="function"?setTimeout:void 0,n2=typeof clearTimeout=="function"?clearTimeout:void 0,Mm=typeof Promise=="function"?Promise:void 0,r2=typeof queueMicrotask=="function"?queueMicrotask:typeof Mm<"u"?function(t){return Mm.resolve(null).then(t).catch(s2)}:rf;function s2(t){setTimeout(function(){throw t})}function Qu(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Do(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Do(e)}function jr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Dm(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ji=Math.random().toString(36).slice(2),Cn="__reactFiber$"+ji,Vo="__reactProps$"+ji,or="__reactContainer$"+ji,sf="__reactEvents$"+ji,i2="__reactListeners$"+ji,o2="__reactHandles$"+ji;function rs(t){var e=t[Cn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[or]||n[Cn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Dm(t);t!==null;){if(n=t[Cn])return n;t=Dm(t)}return e}t=n,n=t.parentNode}return null}function ca(t){return t=t[Cn]||t[or],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ys(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(P(33))}function tu(t){return t[Vo]||null}var of=[],Gs=-1;function Hr(t){return{current:t}}function Pe(t){0>Gs||(t.current=of[Gs],of[Gs]=null,Gs--)}function je(t,e){Gs++,of[Gs]=t.current,t.current=e}var Ur={},pt=Hr(Ur),Rt=Hr(!1),fs=Ur;function gi(t,e){var n=t.type.contextTypes;if(!n)return Ur;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function jt(t){return t=t.childContextTypes,t!=null}function Kl(){Pe(Rt),Pe(pt)}function Bm(t,e,n){if(pt.current!==Ur)throw Error(P(168));je(pt,e),je(Rt,n)}function Vv(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(P(108,W1(t)||"Unknown",s));return $e({},n,r)}function Jl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ur,fs=pt.current,je(pt,t),je(Rt,Rt.current),!0}function Um(t,e,n){var r=t.stateNode;if(!r)throw Error(P(169));n?(t=Vv(t,e,fs),r.__reactInternalMemoizedMergedChildContext=t,Pe(Rt),Pe(pt),je(pt,t)):Pe(Rt),je(Rt,n)}var Xn=null,nu=!1,Ku=!1;function Wv(t){Xn===null?Xn=[t]:Xn.push(t)}function a2(t){nu=!0,Wv(t)}function Qr(){if(!Ku&&Xn!==null){Ku=!0;var t=0,e=Oe;try{var n=Xn;for(Oe=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Xn=null,nu=!1}catch(s){throw Xn!==null&&(Xn=Xn.slice(t+1)),mv(gh,Qr),s}finally{Oe=e,Ku=!1}}return null}var Xs=[],Zs=0,Yl=null,Gl=0,Zt=[],en=0,hs=null,tr=1,nr="";function Xr(t,e){Xs[Zs++]=Gl,Xs[Zs++]=Yl,Yl=t,Gl=e}function qv(t,e,n){Zt[en++]=tr,Zt[en++]=nr,Zt[en++]=hs,hs=t;var r=tr;t=nr;var s=32-wn(r)-1;r&=~(1<<s),n+=1;var i=32-wn(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,tr=1<<32-wn(e)+s|n<<s|r,nr=i+t}else tr=1<<i|n<<s|r,nr=t}function Nh(t){t.return!==null&&(Xr(t,1),qv(t,1,0))}function kh(t){for(;t===Yl;)Yl=Xs[--Zs],Xs[Zs]=null,Gl=Xs[--Zs],Xs[Zs]=null;for(;t===hs;)hs=Zt[--en],Zt[en]=null,nr=Zt[--en],Zt[en]=null,tr=Zt[--en],Zt[en]=null}var qt=null,Wt=null,Me=!1,vn=null;function Hv(t,e){var n=rn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function $m(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,qt=t,Wt=jr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,qt=t,Wt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=hs!==null?{id:tr,overflow:nr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=rn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,qt=t,Wt=null,!0):!1;default:return!1}}function af(t){return(t.mode&1)!==0&&(t.flags&128)===0}function lf(t){if(Me){var e=Wt;if(e){var n=e;if(!$m(t,e)){if(af(t))throw Error(P(418));e=jr(n.nextSibling);var r=qt;e&&$m(t,e)?Hv(r,n):(t.flags=t.flags&-4097|2,Me=!1,qt=t)}}else{if(af(t))throw Error(P(418));t.flags=t.flags&-4097|2,Me=!1,qt=t}}}function zm(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;qt=t}function Fa(t){if(t!==qt)return!1;if(!Me)return zm(t),Me=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!nf(t.type,t.memoizedProps)),e&&(e=Wt)){if(af(t))throw Qv(),Error(P(418));for(;e;)Hv(t,e),e=jr(e.nextSibling)}if(zm(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(P(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Wt=jr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Wt=null}}else Wt=qt?jr(t.stateNode.nextSibling):null;return!0}function Qv(){for(var t=Wt;t;)t=jr(t.nextSibling)}function vi(){Wt=qt=null,Me=!1}function Ah(t){vn===null?vn=[t]:vn.push(t)}var l2=ur.ReactCurrentBatchConfig;function Wi(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(P(309));var r=n.stateNode}if(!r)throw Error(P(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(P(284));if(!n._owner)throw Error(P(290,t))}return t}function Pa(t,e){throw t=Object.prototype.toString.call(e),Error(P(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Vm(t){var e=t._init;return e(t._payload)}function Kv(t){function e(p,h){if(t){var g=p.deletions;g===null?(p.deletions=[h],p.flags|=16):g.push(h)}}function n(p,h){if(!t)return null;for(;h!==null;)e(p,h),h=h.sibling;return null}function r(p,h){for(p=new Map;h!==null;)h.key!==null?p.set(h.key,h):p.set(h.index,h),h=h.sibling;return p}function s(p,h){return p=Mr(p,h),p.index=0,p.sibling=null,p}function i(p,h,g){return p.index=g,t?(g=p.alternate,g!==null?(g=g.index,g<h?(p.flags|=2,h):g):(p.flags|=2,h)):(p.flags|=1048576,h)}function o(p){return t&&p.alternate===null&&(p.flags|=2),p}function a(p,h,g,S){return h===null||h.tag!==6?(h=td(g,p.mode,S),h.return=p,h):(h=s(h,g),h.return=p,h)}function l(p,h,g,S){var x=g.type;return x===Hs?d(p,h,g.props.children,S,g.key):h!==null&&(h.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===xr&&Vm(x)===h.type)?(S=s(h,g.props),S.ref=Wi(p,h,g),S.return=p,S):(S=yl(g.type,g.key,g.props,null,p.mode,S),S.ref=Wi(p,h,g),S.return=p,S)}function u(p,h,g,S){return h===null||h.tag!==4||h.stateNode.containerInfo!==g.containerInfo||h.stateNode.implementation!==g.implementation?(h=nd(g,p.mode,S),h.return=p,h):(h=s(h,g.children||[]),h.return=p,h)}function d(p,h,g,S,x){return h===null||h.tag!==7?(h=us(g,p.mode,S,x),h.return=p,h):(h=s(h,g),h.return=p,h)}function f(p,h,g){if(typeof h=="string"&&h!==""||typeof h=="number")return h=td(""+h,p.mode,g),h.return=p,h;if(typeof h=="object"&&h!==null){switch(h.$$typeof){case Ia:return g=yl(h.type,h.key,h.props,null,p.mode,g),g.ref=Wi(p,null,h),g.return=p,g;case qs:return h=nd(h,p.mode,g),h.return=p,h;case xr:var S=h._init;return f(p,S(h._payload),g)}if(Yi(h)||Bi(h))return h=us(h,p.mode,g,null),h.return=p,h;Pa(p,h)}return null}function m(p,h,g,S){var x=h!==null?h.key:null;if(typeof g=="string"&&g!==""||typeof g=="number")return x!==null?null:a(p,h,""+g,S);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Ia:return g.key===x?l(p,h,g,S):null;case qs:return g.key===x?u(p,h,g,S):null;case xr:return x=g._init,m(p,h,x(g._payload),S)}if(Yi(g)||Bi(g))return x!==null?null:d(p,h,g,S,null);Pa(p,g)}return null}function y(p,h,g,S,x){if(typeof S=="string"&&S!==""||typeof S=="number")return p=p.get(g)||null,a(h,p,""+S,x);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Ia:return p=p.get(S.key===null?g:S.key)||null,l(h,p,S,x);case qs:return p=p.get(S.key===null?g:S.key)||null,u(h,p,S,x);case xr:var I=S._init;return y(p,h,g,I(S._payload),x)}if(Yi(S)||Bi(S))return p=p.get(g)||null,d(h,p,S,x,null);Pa(h,S)}return null}function v(p,h,g,S){for(var x=null,I=null,N=h,k=h=0,C=null;N!==null&&k<g.length;k++){N.index>k?(C=N,N=null):C=N.sibling;var A=m(p,N,g[k],S);if(A===null){N===null&&(N=C);break}t&&N&&A.alternate===null&&e(p,N),h=i(A,h,k),I===null?x=A:I.sibling=A,I=A,N=C}if(k===g.length)return n(p,N),Me&&Xr(p,k),x;if(N===null){for(;k<g.length;k++)N=f(p,g[k],S),N!==null&&(h=i(N,h,k),I===null?x=N:I.sibling=N,I=N);return Me&&Xr(p,k),x}for(N=r(p,N);k<g.length;k++)C=y(N,p,k,g[k],S),C!==null&&(t&&C.alternate!==null&&N.delete(C.key===null?k:C.key),h=i(C,h,k),I===null?x=C:I.sibling=C,I=C);return t&&N.forEach(function(L){return e(p,L)}),Me&&Xr(p,k),x}function _(p,h,g,S){var x=Bi(g);if(typeof x!="function")throw Error(P(150));if(g=x.call(g),g==null)throw Error(P(151));for(var I=x=null,N=h,k=h=0,C=null,A=g.next();N!==null&&!A.done;k++,A=g.next()){N.index>k?(C=N,N=null):C=N.sibling;var L=m(p,N,A.value,S);if(L===null){N===null&&(N=C);break}t&&N&&L.alternate===null&&e(p,N),h=i(L,h,k),I===null?x=L:I.sibling=L,I=L,N=C}if(A.done)return n(p,N),Me&&Xr(p,k),x;if(N===null){for(;!A.done;k++,A=g.next())A=f(p,A.value,S),A!==null&&(h=i(A,h,k),I===null?x=A:I.sibling=A,I=A);return Me&&Xr(p,k),x}for(N=r(p,N);!A.done;k++,A=g.next())A=y(N,p,k,A.value,S),A!==null&&(t&&A.alternate!==null&&N.delete(A.key===null?k:A.key),h=i(A,h,k),I===null?x=A:I.sibling=A,I=A);return t&&N.forEach(function(H){return e(p,H)}),Me&&Xr(p,k),x}function b(p,h,g,S){if(typeof g=="object"&&g!==null&&g.type===Hs&&g.key===null&&(g=g.props.children),typeof g=="object"&&g!==null){switch(g.$$typeof){case Ia:e:{for(var x=g.key,I=h;I!==null;){if(I.key===x){if(x=g.type,x===Hs){if(I.tag===7){n(p,I.sibling),h=s(I,g.props.children),h.return=p,p=h;break e}}else if(I.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===xr&&Vm(x)===I.type){n(p,I.sibling),h=s(I,g.props),h.ref=Wi(p,I,g),h.return=p,p=h;break e}n(p,I);break}else e(p,I);I=I.sibling}g.type===Hs?(h=us(g.props.children,p.mode,S,g.key),h.return=p,p=h):(S=yl(g.type,g.key,g.props,null,p.mode,S),S.ref=Wi(p,h,g),S.return=p,p=S)}return o(p);case qs:e:{for(I=g.key;h!==null;){if(h.key===I)if(h.tag===4&&h.stateNode.containerInfo===g.containerInfo&&h.stateNode.implementation===g.implementation){n(p,h.sibling),h=s(h,g.children||[]),h.return=p,p=h;break e}else{n(p,h);break}else e(p,h);h=h.sibling}h=nd(g,p.mode,S),h.return=p,p=h}return o(p);case xr:return I=g._init,b(p,h,I(g._payload),S)}if(Yi(g))return v(p,h,g,S);if(Bi(g))return _(p,h,g,S);Pa(p,g)}return typeof g=="string"&&g!==""||typeof g=="number"?(g=""+g,h!==null&&h.tag===6?(n(p,h.sibling),h=s(h,g),h.return=p,p=h):(n(p,h),h=td(g,p.mode,S),h.return=p,p=h),o(p)):n(p,h)}return b}var wi=Kv(!0),Jv=Kv(!1),Xl=Hr(null),Zl=null,ei=null,Th=null;function Oh(){Th=ei=Zl=null}function Ch(t){var e=Xl.current;Pe(Xl),t._currentValue=e}function cf(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ui(t,e){Zl=t,Th=ei=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ct=!0),t.firstContext=null)}function ln(t){var e=t._currentValue;if(Th!==t)if(t={context:t,memoizedValue:e,next:null},ei===null){if(Zl===null)throw Error(P(308));ei=t,Zl.dependencies={lanes:0,firstContext:t}}else ei=ei.next=t;return e}var ss=null;function Rh(t){ss===null?ss=[t]:ss.push(t)}function Yv(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Rh(e)):(n.next=s.next,s.next=n),e.interleaved=n,ar(t,r)}function ar(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var br=!1;function jh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Gv(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function rr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Fr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,we&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,ar(t,n)}return s=r.interleaved,s===null?(e.next=e,Rh(r)):(e.next=s.next,s.next=e),r.interleaved=e,ar(t,n)}function ul(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,vh(t,n)}}function Wm(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function ec(t,e,n,r){var s=t.updateQueue;br=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?i=u:o.next=u,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=u:a.next=u,d.lastBaseUpdate=l))}if(i!==null){var f=s.baseState;o=0,d=u=l=null,a=i;do{var m=a.lane,y=a.eventTime;if((r&m)===m){d!==null&&(d=d.next={eventTime:y,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var v=t,_=a;switch(m=e,y=n,_.tag){case 1:if(v=_.payload,typeof v=="function"){f=v.call(y,f,m);break e}f=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=_.payload,m=typeof v=="function"?v.call(y,f,m):v,m==null)break e;f=$e({},f,m);break e;case 2:br=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,m=s.effects,m===null?s.effects=[a]:m.push(a))}else y={eventTime:y,lane:m,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(u=d=y,l=f):d=d.next=y,o|=m;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;m=a,a=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(d===null&&(l=f),s.baseState=l,s.firstBaseUpdate=u,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);ms|=o,t.lanes=o,t.memoizedState=f}}function qm(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(P(191,s));s.call(r)}}}var ua={},Bn=Hr(ua),Wo=Hr(ua),qo=Hr(ua);function is(t){if(t===ua)throw Error(P(174));return t}function Fh(t,e){switch(je(qo,e),je(Wo,t),je(Bn,ua),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:zd(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=zd(e,t)}Pe(Bn),je(Bn,e)}function _i(){Pe(Bn),Pe(Wo),Pe(qo)}function Xv(t){is(qo.current);var e=is(Bn.current),n=zd(e,t.type);e!==n&&(je(Wo,t),je(Bn,n))}function Ph(t){Wo.current===t&&(Pe(Bn),Pe(Wo))}var De=Hr(0);function tc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ju=[];function Lh(){for(var t=0;t<Ju.length;t++)Ju[t]._workInProgressVersionPrimary=null;Ju.length=0}var dl=ur.ReactCurrentDispatcher,Yu=ur.ReactCurrentBatchConfig,ps=0,Ue=null,Ye=null,tt=null,nc=!1,So=!1,Ho=0,c2=0;function ut(){throw Error(P(321))}function Mh(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!bn(t[n],e[n]))return!1;return!0}function Dh(t,e,n,r,s,i){if(ps=i,Ue=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,dl.current=t===null||t.memoizedState===null?h2:p2,t=n(r,s),So){i=0;do{if(So=!1,Ho=0,25<=i)throw Error(P(301));i+=1,tt=Ye=null,e.updateQueue=null,dl.current=m2,t=n(r,s)}while(So)}if(dl.current=rc,e=Ye!==null&&Ye.next!==null,ps=0,tt=Ye=Ue=null,nc=!1,e)throw Error(P(300));return t}function Bh(){var t=Ho!==0;return Ho=0,t}function kn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return tt===null?Ue.memoizedState=tt=t:tt=tt.next=t,tt}function cn(){if(Ye===null){var t=Ue.alternate;t=t!==null?t.memoizedState:null}else t=Ye.next;var e=tt===null?Ue.memoizedState:tt.next;if(e!==null)tt=e,Ye=t;else{if(t===null)throw Error(P(310));Ye=t,t={memoizedState:Ye.memoizedState,baseState:Ye.baseState,baseQueue:Ye.baseQueue,queue:Ye.queue,next:null},tt===null?Ue.memoizedState=tt=t:tt=tt.next=t}return tt}function Qo(t,e){return typeof e=="function"?e(t):e}function Gu(t){var e=cn(),n=e.queue;if(n===null)throw Error(P(311));n.lastRenderedReducer=t;var r=Ye,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,u=i;do{var d=u.lane;if((ps&d)===d)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=f,o=r):l=l.next=f,Ue.lanes|=d,ms|=d}u=u.next}while(u!==null&&u!==i);l===null?o=r:l.next=a,bn(r,e.memoizedState)||(Ct=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Ue.lanes|=i,ms|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Xu(t){var e=cn(),n=e.queue;if(n===null)throw Error(P(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);bn(i,e.memoizedState)||(Ct=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function Zv(){}function e0(t,e){var n=Ue,r=cn(),s=e(),i=!bn(r.memoizedState,s);if(i&&(r.memoizedState=s,Ct=!0),r=r.queue,Uh(r0.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||tt!==null&&tt.memoizedState.tag&1){if(n.flags|=2048,Ko(9,n0.bind(null,n,r,s,e),void 0,null),nt===null)throw Error(P(349));ps&30||t0(n,e,s)}return s}function t0(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ue.updateQueue,e===null?(e={lastEffect:null,stores:null},Ue.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function n0(t,e,n,r){e.value=n,e.getSnapshot=r,s0(e)&&i0(t)}function r0(t,e,n){return n(function(){s0(e)&&i0(t)})}function s0(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!bn(t,n)}catch{return!0}}function i0(t){var e=ar(t,1);e!==null&&_n(e,t,1,-1)}function Hm(t){var e=kn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Qo,lastRenderedState:t},e.queue=t,t=t.dispatch=f2.bind(null,Ue,t),[e.memoizedState,t]}function Ko(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ue.updateQueue,e===null?(e={lastEffect:null,stores:null},Ue.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function o0(){return cn().memoizedState}function fl(t,e,n,r){var s=kn();Ue.flags|=t,s.memoizedState=Ko(1|e,n,void 0,r===void 0?null:r)}function ru(t,e,n,r){var s=cn();r=r===void 0?null:r;var i=void 0;if(Ye!==null){var o=Ye.memoizedState;if(i=o.destroy,r!==null&&Mh(r,o.deps)){s.memoizedState=Ko(e,n,i,r);return}}Ue.flags|=t,s.memoizedState=Ko(1|e,n,i,r)}function Qm(t,e){return fl(8390656,8,t,e)}function Uh(t,e){return ru(2048,8,t,e)}function a0(t,e){return ru(4,2,t,e)}function l0(t,e){return ru(4,4,t,e)}function c0(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function u0(t,e,n){return n=n!=null?n.concat([t]):null,ru(4,4,c0.bind(null,e,t),n)}function $h(){}function d0(t,e){var n=cn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Mh(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function f0(t,e){var n=cn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Mh(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function h0(t,e,n){return ps&21?(bn(n,e)||(n=vv(),Ue.lanes|=n,ms|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ct=!0),t.memoizedState=n)}function u2(t,e){var n=Oe;Oe=n!==0&&4>n?n:4,t(!0);var r=Yu.transition;Yu.transition={};try{t(!1),e()}finally{Oe=n,Yu.transition=r}}function p0(){return cn().memoizedState}function d2(t,e,n){var r=Lr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},m0(t))y0(e,n);else if(n=Yv(t,e,n,r),n!==null){var s=bt();_n(n,t,r,s),g0(n,e,r)}}function f2(t,e,n){var r=Lr(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(m0(t))y0(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,bn(a,o)){var l=e.interleaved;l===null?(s.next=s,Rh(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=Yv(t,e,s,r),n!==null&&(s=bt(),_n(n,t,r,s),g0(n,e,r))}}function m0(t){var e=t.alternate;return t===Ue||e!==null&&e===Ue}function y0(t,e){So=nc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function g0(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,vh(t,n)}}var rc={readContext:ln,useCallback:ut,useContext:ut,useEffect:ut,useImperativeHandle:ut,useInsertionEffect:ut,useLayoutEffect:ut,useMemo:ut,useReducer:ut,useRef:ut,useState:ut,useDebugValue:ut,useDeferredValue:ut,useTransition:ut,useMutableSource:ut,useSyncExternalStore:ut,useId:ut,unstable_isNewReconciler:!1},h2={readContext:ln,useCallback:function(t,e){return kn().memoizedState=[t,e===void 0?null:e],t},useContext:ln,useEffect:Qm,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,fl(4194308,4,c0.bind(null,e,t),n)},useLayoutEffect:function(t,e){return fl(4194308,4,t,e)},useInsertionEffect:function(t,e){return fl(4,2,t,e)},useMemo:function(t,e){var n=kn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=kn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=d2.bind(null,Ue,t),[r.memoizedState,t]},useRef:function(t){var e=kn();return t={current:t},e.memoizedState=t},useState:Hm,useDebugValue:$h,useDeferredValue:function(t){return kn().memoizedState=t},useTransition:function(){var t=Hm(!1),e=t[0];return t=u2.bind(null,t[1]),kn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ue,s=kn();if(Me){if(n===void 0)throw Error(P(407));n=n()}else{if(n=e(),nt===null)throw Error(P(349));ps&30||t0(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Qm(r0.bind(null,r,i,t),[t]),r.flags|=2048,Ko(9,n0.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=kn(),e=nt.identifierPrefix;if(Me){var n=nr,r=tr;n=(r&~(1<<32-wn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ho++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=c2++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},p2={readContext:ln,useCallback:d0,useContext:ln,useEffect:Uh,useImperativeHandle:u0,useInsertionEffect:a0,useLayoutEffect:l0,useMemo:f0,useReducer:Gu,useRef:o0,useState:function(){return Gu(Qo)},useDebugValue:$h,useDeferredValue:function(t){var e=cn();return h0(e,Ye.memoizedState,t)},useTransition:function(){var t=Gu(Qo)[0],e=cn().memoizedState;return[t,e]},useMutableSource:Zv,useSyncExternalStore:e0,useId:p0,unstable_isNewReconciler:!1},m2={readContext:ln,useCallback:d0,useContext:ln,useEffect:Uh,useImperativeHandle:u0,useInsertionEffect:a0,useLayoutEffect:l0,useMemo:f0,useReducer:Xu,useRef:o0,useState:function(){return Xu(Qo)},useDebugValue:$h,useDeferredValue:function(t){var e=cn();return Ye===null?e.memoizedState=t:h0(e,Ye.memoizedState,t)},useTransition:function(){var t=Xu(Qo)[0],e=cn().memoizedState;return[t,e]},useMutableSource:Zv,useSyncExternalStore:e0,useId:p0,unstable_isNewReconciler:!1};function pn(t,e){if(t&&t.defaultProps){e=$e({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function uf(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:$e({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var su={isMounted:function(t){return(t=t._reactInternals)?xs(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=bt(),s=Lr(t),i=rr(r,s);i.payload=e,n!=null&&(i.callback=n),e=Fr(t,i,s),e!==null&&(_n(e,t,s,r),ul(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=bt(),s=Lr(t),i=rr(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Fr(t,i,s),e!==null&&(_n(e,t,s,r),ul(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=bt(),r=Lr(t),s=rr(n,r);s.tag=2,e!=null&&(s.callback=e),e=Fr(t,s,r),e!==null&&(_n(e,t,r,n),ul(e,t,r))}};function Km(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Uo(n,r)||!Uo(s,i):!0}function v0(t,e,n){var r=!1,s=Ur,i=e.contextType;return typeof i=="object"&&i!==null?i=ln(i):(s=jt(e)?fs:pt.current,r=e.contextTypes,i=(r=r!=null)?gi(t,s):Ur),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=su,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Jm(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&su.enqueueReplaceState(e,e.state,null)}function df(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},jh(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=ln(i):(i=jt(e)?fs:pt.current,s.context=gi(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(uf(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&su.enqueueReplaceState(s,s.state,null),ec(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function xi(t,e){try{var n="",r=e;do n+=V1(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Zu(t,e,n){return{value:t,source:null,stack:n!=null?n:null,digest:e!=null?e:null}}function ff(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var y2=typeof WeakMap=="function"?WeakMap:Map;function w0(t,e,n){n=rr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){ic||(ic=!0,bf=r),ff(t,e)},n}function _0(t,e,n){n=rr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){ff(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){ff(t,e),typeof r!="function"&&(Pr===null?Pr=new Set([this]):Pr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Ym(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new y2;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=O2.bind(null,t,e,n),e.then(t,t))}function Gm(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Xm(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=rr(-1,1),e.tag=2,Fr(n,e,1))),n.lanes|=1),t)}var g2=ur.ReactCurrentOwner,Ct=!1;function vt(t,e,n,r){e.child=t===null?Jv(e,null,n,r):wi(e,t.child,n,r)}function Zm(t,e,n,r,s){n=n.render;var i=e.ref;return ui(e,s),r=Dh(t,e,n,r,i,s),n=Bh(),t!==null&&!Ct?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,lr(t,e,s)):(Me&&n&&Nh(e),e.flags|=1,vt(t,e,r,s),e.child)}function ey(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Jh(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,x0(t,e,i,r,s)):(t=yl(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Uo,n(o,r)&&t.ref===e.ref)return lr(t,e,s)}return e.flags|=1,t=Mr(i,r),t.ref=e.ref,t.return=e,e.child=t}function x0(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Uo(i,r)&&t.ref===e.ref)if(Ct=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Ct=!0);else return e.lanes=t.lanes,lr(t,e,s)}return hf(t,e,n,r,s)}function b0(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},je(ni,$t),$t|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,je(ni,$t),$t|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,je(ni,$t),$t|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,je(ni,$t),$t|=r;return vt(t,e,s,n),e.child}function S0(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function hf(t,e,n,r,s){var i=jt(n)?fs:pt.current;return i=gi(e,i),ui(e,s),n=Dh(t,e,n,r,i,s),r=Bh(),t!==null&&!Ct?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,lr(t,e,s)):(Me&&r&&Nh(e),e.flags|=1,vt(t,e,n,s),e.child)}function ty(t,e,n,r,s){if(jt(n)){var i=!0;Jl(e)}else i=!1;if(ui(e,s),e.stateNode===null)hl(t,e),v0(e,n,r),df(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=ln(u):(u=jt(n)?fs:pt.current,u=gi(e,u));var d=n.getDerivedStateFromProps,f=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&Jm(e,o,r,u),br=!1;var m=e.memoizedState;o.state=m,ec(e,r,o,s),l=e.memoizedState,a!==r||m!==l||Rt.current||br?(typeof d=="function"&&(uf(e,n,d,r),l=e.memoizedState),(a=br||Km(e,n,a,r,m,l,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Gv(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:pn(e.type,a),o.props=u,f=e.pendingProps,m=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=ln(l):(l=jt(n)?fs:pt.current,l=gi(e,l));var y=n.getDerivedStateFromProps;(d=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||m!==l)&&Jm(e,o,r,l),br=!1,m=e.memoizedState,o.state=m,ec(e,r,o,s);var v=e.memoizedState;a!==f||m!==v||Rt.current||br?(typeof y=="function"&&(uf(e,n,y,r),v=e.memoizedState),(u=br||Km(e,n,u,r,m,v,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,v,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,v,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=v),o.props=r,o.state=v,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return pf(t,e,n,r,i,s)}function pf(t,e,n,r,s,i){S0(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&Um(e,n,!1),lr(t,e,i);r=e.stateNode,g2.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=wi(e,t.child,null,i),e.child=wi(e,null,a,i)):vt(t,e,a,i),e.memoizedState=r.state,s&&Um(e,n,!0),e.child}function I0(t){var e=t.stateNode;e.pendingContext?Bm(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Bm(t,e.context,!1),Fh(t,e.containerInfo)}function ny(t,e,n,r,s){return vi(),Ah(s),e.flags|=256,vt(t,e,n,r),e.child}var mf={dehydrated:null,treeContext:null,retryLane:0};function yf(t){return{baseLanes:t,cachePool:null,transitions:null}}function E0(t,e,n){var r=e.pendingProps,s=De.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),je(De,s&1),t===null)return lf(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=au(o,r,0,null),t=us(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=yf(n),e.memoizedState=mf,t):zh(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return v2(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Mr(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=Mr(a,i):(i=us(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?yf(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=mf,r}return i=t.child,t=i.sibling,r=Mr(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function zh(t,e){return e=au({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function La(t,e,n,r){return r!==null&&Ah(r),wi(e,t.child,null,n),t=zh(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function v2(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Zu(Error(P(422))),La(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=au({mode:"visible",children:r.children},s,0,null),i=us(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&wi(e,t.child,null,o),e.child.memoizedState=yf(o),e.memoizedState=mf,i);if(!(e.mode&1))return La(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(P(419)),r=Zu(i,r,void 0),La(t,e,o,r)}if(a=(o&t.childLanes)!==0,Ct||a){if(r=nt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,ar(t,s),_n(r,t,s,-1))}return Kh(),r=Zu(Error(P(421))),La(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=C2.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Wt=jr(s.nextSibling),qt=e,Me=!0,vn=null,t!==null&&(Zt[en++]=tr,Zt[en++]=nr,Zt[en++]=hs,tr=t.id,nr=t.overflow,hs=e),e=zh(e,r.children),e.flags|=4096,e)}function ry(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),cf(t.return,e,n)}function ed(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function N0(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(vt(t,e,r.children,n),r=De.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&ry(t,n,e);else if(t.tag===19)ry(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(je(De,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&tc(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),ed(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&tc(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}ed(e,!0,n,null,i);break;case"together":ed(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function hl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function lr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ms|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(P(153));if(e.child!==null){for(t=e.child,n=Mr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Mr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function w2(t,e,n){switch(e.tag){case 3:I0(e),vi();break;case 5:Xv(e);break;case 1:jt(e.type)&&Jl(e);break;case 4:Fh(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;je(Xl,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(je(De,De.current&1),e.flags|=128,null):n&e.child.childLanes?E0(t,e,n):(je(De,De.current&1),t=lr(t,e,n),t!==null?t.sibling:null);je(De,De.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return N0(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),je(De,De.current),r)break;return null;case 22:case 23:return e.lanes=0,b0(t,e,n)}return lr(t,e,n)}var k0,gf,A0,T0;k0=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};gf=function(){};A0=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,is(Bn.current);var i=null;switch(n){case"input":s=Dd(t,s),r=Dd(t,r),i=[];break;case"select":s=$e({},s,{value:void 0}),r=$e({},r,{value:void 0}),i=[];break;case"textarea":s=$d(t,s),r=$d(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Ql)}Vd(n,r);var o;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var a=s[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(jo.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var l=r[u];if(a=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(jo.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Fe("scroll",t),i||a===l||(i=[])):(i=i||[]).push(u,l))}n&&(i=i||[]).push("style",n);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};T0=function(t,e,n,r){n!==r&&(e.flags|=4)};function qi(t,e){if(!Me)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function dt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function _2(t,e,n){var r=e.pendingProps;switch(kh(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return dt(e),null;case 1:return jt(e.type)&&Kl(),dt(e),null;case 3:return r=e.stateNode,_i(),Pe(Rt),Pe(pt),Lh(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Fa(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,vn!==null&&(Ef(vn),vn=null))),gf(t,e),dt(e),null;case 5:Ph(e);var s=is(qo.current);if(n=e.type,t!==null&&e.stateNode!=null)A0(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(P(166));return dt(e),null}if(t=is(Bn.current),Fa(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Cn]=e,r[Vo]=i,t=(e.mode&1)!==0,n){case"dialog":Fe("cancel",r),Fe("close",r);break;case"iframe":case"object":case"embed":Fe("load",r);break;case"video":case"audio":for(s=0;s<Xi.length;s++)Fe(Xi[s],r);break;case"source":Fe("error",r);break;case"img":case"image":case"link":Fe("error",r),Fe("load",r);break;case"details":Fe("toggle",r);break;case"input":fm(r,i),Fe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Fe("invalid",r);break;case"textarea":pm(r,i),Fe("invalid",r)}Vd(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&ja(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&ja(r.textContent,a,t),s=["children",""+a]):jo.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Fe("scroll",r)}switch(n){case"input":Ea(r),hm(r,i,!0);break;case"textarea":Ea(r),mm(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Ql)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=rv(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Cn]=e,t[Vo]=r,k0(t,e,!1,!1),e.stateNode=t;e:{switch(o=Wd(n,r),n){case"dialog":Fe("cancel",t),Fe("close",t),s=r;break;case"iframe":case"object":case"embed":Fe("load",t),s=r;break;case"video":case"audio":for(s=0;s<Xi.length;s++)Fe(Xi[s],t);s=r;break;case"source":Fe("error",t),s=r;break;case"img":case"image":case"link":Fe("error",t),Fe("load",t),s=r;break;case"details":Fe("toggle",t),s=r;break;case"input":fm(t,r),s=Dd(t,r),Fe("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=$e({},r,{value:void 0}),Fe("invalid",t);break;case"textarea":pm(t,r),s=$d(t,r),Fe("invalid",t);break;default:s=r}Vd(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?ov(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&sv(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Fo(t,l):typeof l=="number"&&Fo(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(jo.hasOwnProperty(i)?l!=null&&i==="onScroll"&&Fe("scroll",t):l!=null&&fh(t,i,l,o))}switch(n){case"input":Ea(t),hm(t,r,!1);break;case"textarea":Ea(t),mm(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Br(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?oi(t,!!r.multiple,i,!1):r.defaultValue!=null&&oi(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Ql)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return dt(e),null;case 6:if(t&&e.stateNode!=null)T0(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(P(166));if(n=is(qo.current),is(Bn.current),Fa(e)){if(r=e.stateNode,n=e.memoizedProps,r[Cn]=e,(i=r.nodeValue!==n)&&(t=qt,t!==null))switch(t.tag){case 3:ja(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ja(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Cn]=e,e.stateNode=r}return dt(e),null;case 13:if(Pe(De),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Me&&Wt!==null&&e.mode&1&&!(e.flags&128))Qv(),vi(),e.flags|=98560,i=!1;else if(i=Fa(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(P(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(P(317));i[Cn]=e}else vi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;dt(e),i=!1}else vn!==null&&(Ef(vn),vn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||De.current&1?Ze===0&&(Ze=3):Kh())),e.updateQueue!==null&&(e.flags|=4),dt(e),null);case 4:return _i(),gf(t,e),t===null&&$o(e.stateNode.containerInfo),dt(e),null;case 10:return Ch(e.type._context),dt(e),null;case 17:return jt(e.type)&&Kl(),dt(e),null;case 19:if(Pe(De),i=e.memoizedState,i===null)return dt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)qi(i,!1);else{if(Ze!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=tc(t),o!==null){for(e.flags|=128,qi(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return je(De,De.current&1|2),e.child}t=t.sibling}i.tail!==null&&We()>bi&&(e.flags|=128,r=!0,qi(i,!1),e.lanes=4194304)}else{if(!r)if(t=tc(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),qi(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Me)return dt(e),null}else 2*We()-i.renderingStartTime>bi&&n!==1073741824&&(e.flags|=128,r=!0,qi(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=We(),e.sibling=null,n=De.current,je(De,r?n&1|2:n&1),e):(dt(e),null);case 22:case 23:return Qh(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?$t&1073741824&&(dt(e),e.subtreeFlags&6&&(e.flags|=8192)):dt(e),null;case 24:return null;case 25:return null}throw Error(P(156,e.tag))}function x2(t,e){switch(kh(e),e.tag){case 1:return jt(e.type)&&Kl(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return _i(),Pe(Rt),Pe(pt),Lh(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Ph(e),null;case 13:if(Pe(De),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(P(340));vi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Pe(De),null;case 4:return _i(),null;case 10:return Ch(e.type._context),null;case 22:case 23:return Qh(),null;case 24:return null;default:return null}}var Ma=!1,ft=!1,b2=typeof WeakSet=="function"?WeakSet:Set,B=null;function ti(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ve(t,e,r)}else n.current=null}function vf(t,e,n){try{n()}catch(r){Ve(t,e,r)}}var sy=!1;function S2(t,e){if(ef=Wl,t=Fv(),Eh(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,d=0,f=t,m=null;t:for(;;){for(var y;f!==n||s!==0&&f.nodeType!==3||(a=o+s),f!==i||r!==0&&f.nodeType!==3||(l=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(y=f.firstChild)!==null;)m=f,f=y;for(;;){if(f===t)break t;if(m===n&&++u===s&&(a=o),m===i&&++d===r&&(l=o),(y=f.nextSibling)!==null)break;f=m,m=f.parentNode}f=y}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(tf={focusedElem:t,selectionRange:n},Wl=!1,B=e;B!==null;)if(e=B,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,B=t;else for(;B!==null;){e=B;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var _=v.memoizedProps,b=v.memoizedState,p=e.stateNode,h=p.getSnapshotBeforeUpdate(e.elementType===e.type?_:pn(e.type,_),b);p.__reactInternalSnapshotBeforeUpdate=h}break;case 3:var g=e.stateNode.containerInfo;g.nodeType===1?g.textContent="":g.nodeType===9&&g.documentElement&&g.removeChild(g.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(P(163))}}catch(S){Ve(e,e.return,S)}if(t=e.sibling,t!==null){t.return=e.return,B=t;break}B=e.return}return v=sy,sy=!1,v}function Io(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&vf(e,n,i)}s=s.next}while(s!==r)}}function iu(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function wf(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function O0(t){var e=t.alternate;e!==null&&(t.alternate=null,O0(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Cn],delete e[Vo],delete e[sf],delete e[i2],delete e[o2])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function C0(t){return t.tag===5||t.tag===3||t.tag===4}function iy(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||C0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function _f(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ql));else if(r!==4&&(t=t.child,t!==null))for(_f(t,e,n),t=t.sibling;t!==null;)_f(t,e,n),t=t.sibling}function xf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(xf(t,e,n),t=t.sibling;t!==null;)xf(t,e,n),t=t.sibling}var rt=null,yn=!1;function yr(t,e,n){for(n=n.child;n!==null;)R0(t,e,n),n=n.sibling}function R0(t,e,n){if(Dn&&typeof Dn.onCommitFiberUnmount=="function")try{Dn.onCommitFiberUnmount(Gc,n)}catch{}switch(n.tag){case 5:ft||ti(n,e);case 6:var r=rt,s=yn;rt=null,yr(t,e,n),rt=r,yn=s,rt!==null&&(yn?(t=rt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):rt.removeChild(n.stateNode));break;case 18:rt!==null&&(yn?(t=rt,n=n.stateNode,t.nodeType===8?Qu(t.parentNode,n):t.nodeType===1&&Qu(t,n),Do(t)):Qu(rt,n.stateNode));break;case 4:r=rt,s=yn,rt=n.stateNode.containerInfo,yn=!0,yr(t,e,n),rt=r,yn=s;break;case 0:case 11:case 14:case 15:if(!ft&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&vf(n,e,o),s=s.next}while(s!==r)}yr(t,e,n);break;case 1:if(!ft&&(ti(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Ve(n,e,a)}yr(t,e,n);break;case 21:yr(t,e,n);break;case 22:n.mode&1?(ft=(r=ft)||n.memoizedState!==null,yr(t,e,n),ft=r):yr(t,e,n);break;default:yr(t,e,n)}}function oy(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new b2),e.forEach(function(r){var s=R2.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function hn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:rt=a.stateNode,yn=!1;break e;case 3:rt=a.stateNode.containerInfo,yn=!0;break e;case 4:rt=a.stateNode.containerInfo,yn=!0;break e}a=a.return}if(rt===null)throw Error(P(160));R0(i,o,s),rt=null,yn=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(u){Ve(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)j0(e,t),e=e.sibling}function j0(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(hn(e,t),In(t),r&4){try{Io(3,t,t.return),iu(3,t)}catch(_){Ve(t,t.return,_)}try{Io(5,t,t.return)}catch(_){Ve(t,t.return,_)}}break;case 1:hn(e,t),In(t),r&512&&n!==null&&ti(n,n.return);break;case 5:if(hn(e,t),In(t),r&512&&n!==null&&ti(n,n.return),t.flags&32){var s=t.stateNode;try{Fo(s,"")}catch(_){Ve(t,t.return,_)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&tv(s,i),Wd(a,o);var u=Wd(a,i);for(o=0;o<l.length;o+=2){var d=l[o],f=l[o+1];d==="style"?ov(s,f):d==="dangerouslySetInnerHTML"?sv(s,f):d==="children"?Fo(s,f):fh(s,d,f,u)}switch(a){case"input":Bd(s,i);break;case"textarea":nv(s,i);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var y=i.value;y!=null?oi(s,!!i.multiple,y,!1):m!==!!i.multiple&&(i.defaultValue!=null?oi(s,!!i.multiple,i.defaultValue,!0):oi(s,!!i.multiple,i.multiple?[]:"",!1))}s[Vo]=i}catch(_){Ve(t,t.return,_)}}break;case 6:if(hn(e,t),In(t),r&4){if(t.stateNode===null)throw Error(P(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(_){Ve(t,t.return,_)}}break;case 3:if(hn(e,t),In(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Do(e.containerInfo)}catch(_){Ve(t,t.return,_)}break;case 4:hn(e,t),In(t);break;case 13:hn(e,t),In(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(qh=We())),r&4&&oy(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(ft=(u=ft)||d,hn(e,t),ft=u):hn(e,t),In(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(B=t,d=t.child;d!==null;){for(f=B=d;B!==null;){switch(m=B,y=m.child,m.tag){case 0:case 11:case 14:case 15:Io(4,m,m.return);break;case 1:ti(m,m.return);var v=m.stateNode;if(typeof v.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(_){Ve(r,n,_)}}break;case 5:ti(m,m.return);break;case 22:if(m.memoizedState!==null){ly(f);continue}}y!==null?(y.return=m,B=y):ly(f)}d=d.sibling}e:for(d=null,f=t;;){if(f.tag===5){if(d===null){d=f;try{s=f.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=iv("display",o))}catch(_){Ve(t,t.return,_)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(_){Ve(t,t.return,_)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:hn(e,t),In(t),r&4&&oy(t);break;case 21:break;default:hn(e,t),In(t)}}function In(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(C0(n)){var r=n;break e}n=n.return}throw Error(P(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Fo(s,""),r.flags&=-33);var i=iy(t);xf(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=iy(t);_f(t,a,o);break;default:throw Error(P(161))}}catch(l){Ve(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function I2(t,e,n){B=t,F0(t)}function F0(t,e,n){for(var r=(t.mode&1)!==0;B!==null;){var s=B,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Ma;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||ft;a=Ma;var u=ft;if(Ma=o,(ft=l)&&!u)for(B=s;B!==null;)o=B,l=o.child,o.tag===22&&o.memoizedState!==null?cy(s):l!==null?(l.return=o,B=l):cy(s);for(;i!==null;)B=i,F0(i),i=i.sibling;B=s,Ma=a,ft=u}ay(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,B=i):ay(t)}}function ay(t){for(;B!==null;){var e=B;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ft||iu(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ft)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:pn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&qm(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}qm(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&Do(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(P(163))}ft||e.flags&512&&wf(e)}catch(m){Ve(e,e.return,m)}}if(e===t){B=null;break}if(n=e.sibling,n!==null){n.return=e.return,B=n;break}B=e.return}}function ly(t){for(;B!==null;){var e=B;if(e===t){B=null;break}var n=e.sibling;if(n!==null){n.return=e.return,B=n;break}B=e.return}}function cy(t){for(;B!==null;){var e=B;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{iu(4,e)}catch(l){Ve(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){Ve(e,s,l)}}var i=e.return;try{wf(e)}catch(l){Ve(e,i,l)}break;case 5:var o=e.return;try{wf(e)}catch(l){Ve(e,o,l)}}}catch(l){Ve(e,e.return,l)}if(e===t){B=null;break}var a=e.sibling;if(a!==null){a.return=e.return,B=a;break}B=e.return}}var E2=Math.ceil,sc=ur.ReactCurrentDispatcher,Vh=ur.ReactCurrentOwner,on=ur.ReactCurrentBatchConfig,we=0,nt=null,He=null,ot=0,$t=0,ni=Hr(0),Ze=0,Jo=null,ms=0,ou=0,Wh=0,Eo=null,At=null,qh=0,bi=1/0,Qn=null,ic=!1,bf=null,Pr=null,Da=!1,Ar=null,oc=0,No=0,Sf=null,pl=-1,ml=0;function bt(){return we&6?We():pl!==-1?pl:pl=We()}function Lr(t){return t.mode&1?we&2&&ot!==0?ot&-ot:l2.transition!==null?(ml===0&&(ml=vv()),ml):(t=Oe,t!==0||(t=window.event,t=t===void 0?16:Ev(t.type)),t):1}function _n(t,e,n,r){if(50<No)throw No=0,Sf=null,Error(P(185));aa(t,n,r),(!(we&2)||t!==nt)&&(t===nt&&(!(we&2)&&(ou|=n),Ze===4&&Nr(t,ot)),Ft(t,r),n===1&&we===0&&!(e.mode&1)&&(bi=We()+500,nu&&Qr()))}function Ft(t,e){var n=t.callbackNode;lS(t,e);var r=Vl(t,t===nt?ot:0);if(r===0)n!==null&&vm(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&vm(n),e===1)t.tag===0?a2(uy.bind(null,t)):Wv(uy.bind(null,t)),r2(function(){!(we&6)&&Qr()}),n=null;else{switch(wv(r)){case 1:n=gh;break;case 4:n=yv;break;case 16:n=zl;break;case 536870912:n=gv;break;default:n=zl}n=z0(n,P0.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function P0(t,e){if(pl=-1,ml=0,we&6)throw Error(P(327));var n=t.callbackNode;if(di()&&t.callbackNode!==n)return null;var r=Vl(t,t===nt?ot:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=ac(t,r);else{e=r;var s=we;we|=2;var i=M0();(nt!==t||ot!==e)&&(Qn=null,bi=We()+500,cs(t,e));do try{A2();break}catch(a){L0(t,a)}while(!0);Oh(),sc.current=i,we=s,He!==null?e=0:(nt=null,ot=0,e=Ze)}if(e!==0){if(e===2&&(s=Jd(t),s!==0&&(r=s,e=If(t,s))),e===1)throw n=Jo,cs(t,0),Nr(t,r),Ft(t,We()),n;if(e===6)Nr(t,r);else{if(s=t.current.alternate,!(r&30)&&!N2(s)&&(e=ac(t,r),e===2&&(i=Jd(t),i!==0&&(r=i,e=If(t,i))),e===1))throw n=Jo,cs(t,0),Nr(t,r),Ft(t,We()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(P(345));case 2:Zr(t,At,Qn);break;case 3:if(Nr(t,r),(r&130023424)===r&&(e=qh+500-We(),10<e)){if(Vl(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){bt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=rf(Zr.bind(null,t,At,Qn),e);break}Zr(t,At,Qn);break;case 4:if(Nr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-wn(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=We()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*E2(r/1960))-r,10<r){t.timeoutHandle=rf(Zr.bind(null,t,At,Qn),r);break}Zr(t,At,Qn);break;case 5:Zr(t,At,Qn);break;default:throw Error(P(329))}}}return Ft(t,We()),t.callbackNode===n?P0.bind(null,t):null}function If(t,e){var n=Eo;return t.current.memoizedState.isDehydrated&&(cs(t,e).flags|=256),t=ac(t,e),t!==2&&(e=At,At=n,e!==null&&Ef(e)),t}function Ef(t){At===null?At=t:At.push.apply(At,t)}function N2(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!bn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Nr(t,e){for(e&=~Wh,e&=~ou,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-wn(e),r=1<<n;t[n]=-1,e&=~r}}function uy(t){if(we&6)throw Error(P(327));di();var e=Vl(t,0);if(!(e&1))return Ft(t,We()),null;var n=ac(t,e);if(t.tag!==0&&n===2){var r=Jd(t);r!==0&&(e=r,n=If(t,r))}if(n===1)throw n=Jo,cs(t,0),Nr(t,e),Ft(t,We()),n;if(n===6)throw Error(P(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Zr(t,At,Qn),Ft(t,We()),null}function Hh(t,e){var n=we;we|=1;try{return t(e)}finally{we=n,we===0&&(bi=We()+500,nu&&Qr())}}function ys(t){Ar!==null&&Ar.tag===0&&!(we&6)&&di();var e=we;we|=1;var n=on.transition,r=Oe;try{if(on.transition=null,Oe=1,t)return t()}finally{Oe=r,on.transition=n,we=e,!(we&6)&&Qr()}}function Qh(){$t=ni.current,Pe(ni)}function cs(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,n2(n)),He!==null)for(n=He.return;n!==null;){var r=n;switch(kh(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Kl();break;case 3:_i(),Pe(Rt),Pe(pt),Lh();break;case 5:Ph(r);break;case 4:_i();break;case 13:Pe(De);break;case 19:Pe(De);break;case 10:Ch(r.type._context);break;case 22:case 23:Qh()}n=n.return}if(nt=t,He=t=Mr(t.current,null),ot=$t=e,Ze=0,Jo=null,Wh=ou=ms=0,At=Eo=null,ss!==null){for(e=0;e<ss.length;e++)if(n=ss[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}ss=null}return t}function L0(t,e){do{var n=He;try{if(Oh(),dl.current=rc,nc){for(var r=Ue.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}nc=!1}if(ps=0,tt=Ye=Ue=null,So=!1,Ho=0,Vh.current=null,n===null||n.return===null){Ze=1,Jo=e,He=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=ot,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,d=a,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var m=d.alternate;m?(d.updateQueue=m.updateQueue,d.memoizedState=m.memoizedState,d.lanes=m.lanes):(d.updateQueue=null,d.memoizedState=null)}var y=Gm(o);if(y!==null){y.flags&=-257,Xm(y,o,a,i,e),y.mode&1&&Ym(i,u,e),e=y,l=u;var v=e.updateQueue;if(v===null){var _=new Set;_.add(l),e.updateQueue=_}else v.add(l);break e}else{if(!(e&1)){Ym(i,u,e),Kh();break e}l=Error(P(426))}}else if(Me&&a.mode&1){var b=Gm(o);if(b!==null){!(b.flags&65536)&&(b.flags|=256),Xm(b,o,a,i,e),Ah(xi(l,a));break e}}i=l=xi(l,a),Ze!==4&&(Ze=2),Eo===null?Eo=[i]:Eo.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var p=w0(i,l,e);Wm(i,p);break e;case 1:a=l;var h=i.type,g=i.stateNode;if(!(i.flags&128)&&(typeof h.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(Pr===null||!Pr.has(g)))){i.flags|=65536,e&=-e,i.lanes|=e;var S=_0(i,a,e);Wm(i,S);break e}}i=i.return}while(i!==null)}B0(n)}catch(x){e=x,He===n&&n!==null&&(He=n=n.return);continue}break}while(!0)}function M0(){var t=sc.current;return sc.current=rc,t===null?rc:t}function Kh(){(Ze===0||Ze===3||Ze===2)&&(Ze=4),nt===null||!(ms&268435455)&&!(ou&268435455)||Nr(nt,ot)}function ac(t,e){var n=we;we|=2;var r=M0();(nt!==t||ot!==e)&&(Qn=null,cs(t,e));do try{k2();break}catch(s){L0(t,s)}while(!0);if(Oh(),we=n,sc.current=r,He!==null)throw Error(P(261));return nt=null,ot=0,Ze}function k2(){for(;He!==null;)D0(He)}function A2(){for(;He!==null&&!Z1();)D0(He)}function D0(t){var e=$0(t.alternate,t,$t);t.memoizedProps=t.pendingProps,e===null?B0(t):He=e,Vh.current=null}function B0(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=x2(n,e),n!==null){n.flags&=32767,He=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ze=6,He=null;return}}else if(n=_2(n,e,$t),n!==null){He=n;return}if(e=e.sibling,e!==null){He=e;return}He=e=t}while(e!==null);Ze===0&&(Ze=5)}function Zr(t,e,n){var r=Oe,s=on.transition;try{on.transition=null,Oe=1,T2(t,e,n,r)}finally{on.transition=s,Oe=r}return null}function T2(t,e,n,r){do di();while(Ar!==null);if(we&6)throw Error(P(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(P(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(cS(t,i),t===nt&&(He=nt=null,ot=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Da||(Da=!0,z0(zl,function(){return di(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=on.transition,on.transition=null;var o=Oe;Oe=1;var a=we;we|=4,Vh.current=null,S2(t,n),j0(n,t),JS(tf),Wl=!!ef,tf=ef=null,t.current=n,I2(n),eS(),we=a,Oe=o,on.transition=i}else t.current=n;if(Da&&(Da=!1,Ar=t,oc=s),i=t.pendingLanes,i===0&&(Pr=null),rS(n.stateNode),Ft(t,We()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(ic)throw ic=!1,t=bf,bf=null,t;return oc&1&&t.tag!==0&&di(),i=t.pendingLanes,i&1?t===Sf?No++:(No=0,Sf=t):No=0,Qr(),null}function di(){if(Ar!==null){var t=wv(oc),e=on.transition,n=Oe;try{if(on.transition=null,Oe=16>t?16:t,Ar===null)var r=!1;else{if(t=Ar,Ar=null,oc=0,we&6)throw Error(P(331));var s=we;for(we|=4,B=t.current;B!==null;){var i=B,o=i.child;if(B.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(B=u;B!==null;){var d=B;switch(d.tag){case 0:case 11:case 15:Io(8,d,i)}var f=d.child;if(f!==null)f.return=d,B=f;else for(;B!==null;){d=B;var m=d.sibling,y=d.return;if(O0(d),d===u){B=null;break}if(m!==null){m.return=y,B=m;break}B=y}}}var v=i.alternate;if(v!==null){var _=v.child;if(_!==null){v.child=null;do{var b=_.sibling;_.sibling=null,_=b}while(_!==null)}}B=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,B=o;else e:for(;B!==null;){if(i=B,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Io(9,i,i.return)}var p=i.sibling;if(p!==null){p.return=i.return,B=p;break e}B=i.return}}var h=t.current;for(B=h;B!==null;){o=B;var g=o.child;if(o.subtreeFlags&2064&&g!==null)g.return=o,B=g;else e:for(o=h;B!==null;){if(a=B,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:iu(9,a)}}catch(x){Ve(a,a.return,x)}if(a===o){B=null;break e}var S=a.sibling;if(S!==null){S.return=a.return,B=S;break e}B=a.return}}if(we=s,Qr(),Dn&&typeof Dn.onPostCommitFiberRoot=="function")try{Dn.onPostCommitFiberRoot(Gc,t)}catch{}r=!0}return r}finally{Oe=n,on.transition=e}}return!1}function dy(t,e,n){e=xi(n,e),e=w0(t,e,1),t=Fr(t,e,1),e=bt(),t!==null&&(aa(t,1,e),Ft(t,e))}function Ve(t,e,n){if(t.tag===3)dy(t,t,n);else for(;e!==null;){if(e.tag===3){dy(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Pr===null||!Pr.has(r))){t=xi(n,t),t=_0(e,t,1),e=Fr(e,t,1),t=bt(),e!==null&&(aa(e,1,t),Ft(e,t));break}}e=e.return}}function O2(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=bt(),t.pingedLanes|=t.suspendedLanes&n,nt===t&&(ot&n)===n&&(Ze===4||Ze===3&&(ot&130023424)===ot&&500>We()-qh?cs(t,0):Wh|=n),Ft(t,e)}function U0(t,e){e===0&&(t.mode&1?(e=Aa,Aa<<=1,!(Aa&130023424)&&(Aa=4194304)):e=1);var n=bt();t=ar(t,e),t!==null&&(aa(t,e,n),Ft(t,n))}function C2(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),U0(t,n)}function R2(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(P(314))}r!==null&&r.delete(e),U0(t,n)}var $0;$0=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Rt.current)Ct=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ct=!1,w2(t,e,n);Ct=!!(t.flags&131072)}else Ct=!1,Me&&e.flags&1048576&&qv(e,Gl,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;hl(t,e),t=e.pendingProps;var s=gi(e,pt.current);ui(e,n),s=Dh(null,e,r,t,s,n);var i=Bh();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,jt(r)?(i=!0,Jl(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,jh(e),s.updater=su,e.stateNode=s,s._reactInternals=e,df(e,r,t,n),e=pf(null,e,r,!0,i,n)):(e.tag=0,Me&&i&&Nh(e),vt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(hl(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=F2(r),t=pn(r,t),s){case 0:e=hf(null,e,r,t,n);break e;case 1:e=ty(null,e,r,t,n);break e;case 11:e=Zm(null,e,r,t,n);break e;case 14:e=ey(null,e,r,pn(r.type,t),n);break e}throw Error(P(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:pn(r,s),hf(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:pn(r,s),ty(t,e,r,s,n);case 3:e:{if(I0(e),t===null)throw Error(P(387));r=e.pendingProps,i=e.memoizedState,s=i.element,Gv(t,e),ec(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=xi(Error(P(423)),e),e=ny(t,e,r,n,s);break e}else if(r!==s){s=xi(Error(P(424)),e),e=ny(t,e,r,n,s);break e}else for(Wt=jr(e.stateNode.containerInfo.firstChild),qt=e,Me=!0,vn=null,n=Jv(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(vi(),r===s){e=lr(t,e,n);break e}vt(t,e,r,n)}e=e.child}return e;case 5:return Xv(e),t===null&&lf(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,nf(r,s)?o=null:i!==null&&nf(r,i)&&(e.flags|=32),S0(t,e),vt(t,e,o,n),e.child;case 6:return t===null&&lf(e),null;case 13:return E0(t,e,n);case 4:return Fh(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=wi(e,null,r,n):vt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:pn(r,s),Zm(t,e,r,s,n);case 7:return vt(t,e,e.pendingProps,n),e.child;case 8:return vt(t,e,e.pendingProps.children,n),e.child;case 12:return vt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,je(Xl,r._currentValue),r._currentValue=o,i!==null)if(bn(i.value,o)){if(i.children===s.children&&!Rt.current){e=lr(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=rr(-1,n&-n),l.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?l.next=l:(l.next=d.next,d.next=l),u.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),cf(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(P(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),cf(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}vt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,ui(e,n),s=ln(s),r=r(s),e.flags|=1,vt(t,e,r,n),e.child;case 14:return r=e.type,s=pn(r,e.pendingProps),s=pn(r.type,s),ey(t,e,r,s,n);case 15:return x0(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:pn(r,s),hl(t,e),e.tag=1,jt(r)?(t=!0,Jl(e)):t=!1,ui(e,n),v0(e,r,s),df(e,r,s,n),pf(null,e,r,!0,t,n);case 19:return N0(t,e,n);case 22:return b0(t,e,n)}throw Error(P(156,e.tag))};function z0(t,e){return mv(t,e)}function j2(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function rn(t,e,n,r){return new j2(t,e,n,r)}function Jh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function F2(t){if(typeof t=="function")return Jh(t)?1:0;if(t!=null){if(t=t.$$typeof,t===ph)return 11;if(t===mh)return 14}return 2}function Mr(t,e){var n=t.alternate;return n===null?(n=rn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function yl(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Jh(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Hs:return us(n.children,s,i,e);case hh:o=8,s|=8;break;case Fd:return t=rn(12,n,e,s|2),t.elementType=Fd,t.lanes=i,t;case Pd:return t=rn(13,n,e,s),t.elementType=Pd,t.lanes=i,t;case Ld:return t=rn(19,n,e,s),t.elementType=Ld,t.lanes=i,t;case Xg:return au(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Yg:o=10;break e;case Gg:o=9;break e;case ph:o=11;break e;case mh:o=14;break e;case xr:o=16,r=null;break e}throw Error(P(130,t==null?t:typeof t,""))}return e=rn(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function us(t,e,n,r){return t=rn(7,t,r,e),t.lanes=n,t}function au(t,e,n,r){return t=rn(22,t,r,e),t.elementType=Xg,t.lanes=n,t.stateNode={isHidden:!1},t}function td(t,e,n){return t=rn(6,t,null,e),t.lanes=n,t}function nd(t,e,n){return e=rn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function P2(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Lu(0),this.expirationTimes=Lu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Lu(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Yh(t,e,n,r,s,i,o,a,l){return t=new P2(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=rn(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},jh(i),t}function L2(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:qs,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function V0(t){if(!t)return Ur;t=t._reactInternals;e:{if(xs(t)!==t||t.tag!==1)throw Error(P(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(jt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(P(171))}if(t.tag===1){var n=t.type;if(jt(n))return Vv(t,n,e)}return e}function W0(t,e,n,r,s,i,o,a,l){return t=Yh(n,r,!0,t,s,i,o,a,l),t.context=V0(null),n=t.current,r=bt(),s=Lr(n),i=rr(r,s),i.callback=e!=null?e:null,Fr(n,i,s),t.current.lanes=s,aa(t,s,r),Ft(t,r),t}function lu(t,e,n,r){var s=e.current,i=bt(),o=Lr(s);return n=V0(n),e.context===null?e.context=n:e.pendingContext=n,e=rr(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Fr(s,e,o),t!==null&&(_n(t,s,o,i),ul(t,s,o)),o}function lc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function fy(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Gh(t,e){fy(t,e),(t=t.alternate)&&fy(t,e)}function M2(){return null}var q0=typeof reportError=="function"?reportError:function(t){console.error(t)};function Xh(t){this._internalRoot=t}cu.prototype.render=Xh.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(P(409));lu(t,e,null,null)};cu.prototype.unmount=Xh.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ys(function(){lu(null,t,null,null)}),e[or]=null}};function cu(t){this._internalRoot=t}cu.prototype.unstable_scheduleHydration=function(t){if(t){var e=bv();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Er.length&&e!==0&&e<Er[n].priority;n++);Er.splice(n,0,t),n===0&&Iv(t)}};function Zh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function uu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function hy(){}function D2(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=lc(o);i.call(u)}}var o=W0(e,r,t,0,null,!1,!1,"",hy);return t._reactRootContainer=o,t[or]=o.current,$o(t.nodeType===8?t.parentNode:t),ys(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var u=lc(l);a.call(u)}}var l=Yh(t,0,!1,null,null,!1,!1,"",hy);return t._reactRootContainer=l,t[or]=l.current,$o(t.nodeType===8?t.parentNode:t),ys(function(){lu(e,l,n,r)}),l}function du(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=lc(o);a.call(l)}}lu(e,o,t,s)}else o=D2(n,e,t,s,r);return lc(o)}_v=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Gi(e.pendingLanes);n!==0&&(vh(e,n|1),Ft(e,We()),!(we&6)&&(bi=We()+500,Qr()))}break;case 13:ys(function(){var r=ar(t,1);if(r!==null){var s=bt();_n(r,t,1,s)}}),Gh(t,1)}};wh=function(t){if(t.tag===13){var e=ar(t,134217728);if(e!==null){var n=bt();_n(e,t,134217728,n)}Gh(t,134217728)}};xv=function(t){if(t.tag===13){var e=Lr(t),n=ar(t,e);if(n!==null){var r=bt();_n(n,t,e,r)}Gh(t,e)}};bv=function(){return Oe};Sv=function(t,e){var n=Oe;try{return Oe=t,e()}finally{Oe=n}};Hd=function(t,e,n){switch(e){case"input":if(Bd(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=tu(r);if(!s)throw Error(P(90));ev(r),Bd(r,s)}}}break;case"textarea":nv(t,n);break;case"select":e=n.value,e!=null&&oi(t,!!n.multiple,e,!1)}};cv=Hh;uv=ys;var B2={usingClientEntryPoint:!1,Events:[ca,Ys,tu,av,lv,Hh]},Hi={findFiberByHostInstance:rs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},U2={bundleType:Hi.bundleType,version:Hi.version,rendererPackageName:Hi.rendererPackageName,rendererConfig:Hi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ur.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=hv(t),t===null?null:t.stateNode},findFiberByHostInstance:Hi.findFiberByHostInstance||M2,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ba=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ba.isDisabled&&Ba.supportsFiber)try{Gc=Ba.inject(U2),Dn=Ba}catch{}}Kt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=B2;Kt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Zh(e))throw Error(P(200));return L2(t,e,null,n)};Kt.createRoot=function(t,e){if(!Zh(t))throw Error(P(299));var n=!1,r="",s=q0;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Yh(t,1,!1,null,null,n,!1,r,s),t[or]=e.current,$o(t.nodeType===8?t.parentNode:t),new Xh(e)};Kt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(P(188)):(t=Object.keys(t).join(","),Error(P(268,t)));return t=hv(e),t=t===null?null:t.stateNode,t};Kt.flushSync=function(t){return ys(t)};Kt.hydrate=function(t,e,n){if(!uu(e))throw Error(P(200));return du(null,t,e,!0,n)};Kt.hydrateRoot=function(t,e,n){if(!Zh(t))throw Error(P(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=q0;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=W0(e,null,t,1,n!=null?n:null,s,!1,i,o),t[or]=e.current,$o(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new cu(e)};Kt.render=function(t,e,n){if(!uu(e))throw Error(P(200));return du(null,t,e,!1,n)};Kt.unmountComponentAtNode=function(t){if(!uu(t))throw Error(P(40));return t._reactRootContainer?(ys(function(){du(null,null,t,!1,function(){t._reactRootContainer=null,t[or]=null})}),!0):!1};Kt.unstable_batchedUpdates=Hh;Kt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!uu(n))throw Error(P(200));if(t==null||t._reactInternals===void 0)throw Error(P(38));return du(t,e,n,!1,r)};Kt.version="18.3.1-next-f1338f8080-20240426";function H0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(H0)}catch(t){console.error(t)}}H0(),Hg.exports=Kt;var $2=Hg.exports,py=$2;Rd.createRoot=py.createRoot,Rd.hydrateRoot=py.hydrateRoot;const z2="modulepreload",V2=function(t){return"/"+t},my={},Si=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(l=>{if(l=V2(l),l in my)return;my[l]=!0;const u=l.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${d}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":z2,u||(f.as="script"),f.crossOrigin="",f.href=l,a&&f.setAttribute("nonce",a),document.head.appendChild(f),u)return new Promise((m,y)=>{f.addEventListener("load",m),f.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})},W2={},yy=t=>{let e;const n=new Set,r=(d,f)=>{const m=typeof d=="function"?d(e):d;if(!Object.is(m,e)){const y=e;e=(f!=null?f:typeof m!="object"||m===null)?m:Object.assign({},e,m),n.forEach(v=>v(e,y))}},s=()=>e,l={setState:r,getState:s,getInitialState:()=>u,subscribe:d=>(n.add(d),()=>n.delete(d)),destroy:()=>{(W2?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},u=e=t(r,s,l);return l},q2=t=>t?yy(t):yy;var Q0={exports:{}},K0={},J0={exports:{}},Y0={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ii=T;function H2(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Q2=typeof Object.is=="function"?Object.is:H2,K2=Ii.useState,J2=Ii.useEffect,Y2=Ii.useLayoutEffect,G2=Ii.useDebugValue;function X2(t,e){var n=e(),r=K2({inst:{value:n,getSnapshot:e}}),s=r[0].inst,i=r[1];return Y2(function(){s.value=n,s.getSnapshot=e,rd(s)&&i({inst:s})},[t,n,e]),J2(function(){return rd(s)&&i({inst:s}),t(function(){rd(s)&&i({inst:s})})},[t]),G2(n),n}function rd(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Q2(t,n)}catch{return!0}}function Z2(t,e){return e()}var eI=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Z2:X2;Y0.useSyncExternalStore=Ii.useSyncExternalStore!==void 0?Ii.useSyncExternalStore:eI;J0.exports=Y0;var tI=J0.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fu=T,nI=tI;function rI(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var sI=typeof Object.is=="function"?Object.is:rI,iI=nI.useSyncExternalStore,oI=fu.useRef,aI=fu.useEffect,lI=fu.useMemo,cI=fu.useDebugValue;K0.useSyncExternalStoreWithSelector=function(t,e,n,r,s){var i=oI(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=lI(function(){function l(y){if(!u){if(u=!0,d=y,y=r(y),s!==void 0&&o.hasValue){var v=o.value;if(s(v,y))return f=v}return f=y}if(v=f,sI(d,y))return v;var _=r(y);return s!==void 0&&s(v,_)?(d=y,v):(d=y,f=_)}var u=!1,d,f,m=n===void 0?null:n;return[function(){return l(e())},m===null?void 0:function(){return l(m())}]},[e,n,r,s]);var a=iI(t,i[0],i[1]);return aI(function(){o.hasValue=!0,o.value=a},[a]),cI(a),a};Q0.exports=K0;var uI=Q0.exports;const dI=Fg(uI),G0={},{useDebugValue:fI}=Tr,{useSyncExternalStoreWithSelector:hI}=dI;let gy=!1;const pI=t=>t;function mI(t,e=pI,n){(G0?"production":void 0)!=="production"&&n&&!gy&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),gy=!0);const r=hI(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return fI(r),r}const vy=t=>{(G0?"production":void 0)!=="production"&&typeof t!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof t=="function"?q2(t):t,n=(r,s)=>mI(e,r,s);return Object.assign(n,e),n},ep=t=>t?vy(t):vy,yI={};function gI(t,e){let n;try{n=t()}catch{return}return{getItem:s=>{var i;const o=l=>l===null?null:JSON.parse(l,void 0),a=(i=n.getItem(s))!=null?i:null;return a instanceof Promise?a.then(o):o(a)},setItem:(s,i)=>n.setItem(s,JSON.stringify(i,void 0)),removeItem:s=>n.removeItem(s)}}const Yo=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return Yo(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return Yo(r)(n)}}}},vI=(t,e)=>(n,r,s)=>{let i={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:b=>b,version:0,merge:(b,p)=>({...p,...b}),...e},o=!1;const a=new Set,l=new Set;let u;try{u=i.getStorage()}catch{}if(!u)return t((...b)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),n(...b)},r,s);const d=Yo(i.serialize),f=()=>{const b=i.partialize({...r()});let p;const h=d({state:b,version:i.version}).then(g=>u.setItem(i.name,g)).catch(g=>{p=g});if(p)throw p;return h},m=s.setState;s.setState=(b,p)=>{m(b,p),f()};const y=t((...b)=>{n(...b),f()},r,s);let v;const _=()=>{var b;if(!u)return;o=!1,a.forEach(h=>h(r()));const p=((b=i.onRehydrateStorage)==null?void 0:b.call(i,r()))||void 0;return Yo(u.getItem.bind(u))(i.name).then(h=>{if(h)return i.deserialize(h)}).then(h=>{if(h)if(typeof h.version=="number"&&h.version!==i.version){if(i.migrate)return i.migrate(h.state,h.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return h.state}).then(h=>{var g;return v=i.merge(h,(g=r())!=null?g:y),n(v,!0),f()}).then(()=>{p==null||p(v,void 0),o=!0,l.forEach(h=>h(v))}).catch(h=>{p==null||p(void 0,h)})};return s.persist={setOptions:b=>{i={...i,...b},b.getStorage&&(u=b.getStorage())},clearStorage:()=>{u==null||u.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>_(),hasHydrated:()=>o,onHydrate:b=>(a.add(b),()=>{a.delete(b)}),onFinishHydration:b=>(l.add(b),()=>{l.delete(b)})},_(),v||y},wI=(t,e)=>(n,r,s)=>{let i={storage:gI(()=>localStorage),partialize:_=>_,version:0,merge:(_,b)=>({...b,..._}),...e},o=!1;const a=new Set,l=new Set;let u=i.storage;if(!u)return t((..._)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),n(..._)},r,s);const d=()=>{const _=i.partialize({...r()});return u.setItem(i.name,{state:_,version:i.version})},f=s.setState;s.setState=(_,b)=>{f(_,b),d()};const m=t((..._)=>{n(..._),d()},r,s);s.getInitialState=()=>m;let y;const v=()=>{var _,b;if(!u)return;o=!1,a.forEach(h=>{var g;return h((g=r())!=null?g:m)});const p=((b=i.onRehydrateStorage)==null?void 0:b.call(i,(_=r())!=null?_:m))||void 0;return Yo(u.getItem.bind(u))(i.name).then(h=>{if(h)if(typeof h.version=="number"&&h.version!==i.version){if(i.migrate)return[!0,i.migrate(h.state,h.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,h.state];return[!1,void 0]}).then(h=>{var g;const[S,x]=h;if(y=i.merge(x,(g=r())!=null?g:m),n(y,!0),S)return d()}).then(()=>{p==null||p(y,void 0),y=r(),o=!0,l.forEach(h=>h(y))}).catch(h=>{p==null||p(void 0,h)})};return s.persist={setOptions:_=>{i={...i,..._},_.storage&&(u=_.storage)},clearStorage:()=>{u==null||u.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>v(),hasHydrated:()=>o,onHydrate:_=>(a.add(_),()=>{a.delete(_)}),onFinishHydration:_=>(l.add(_),()=>{l.delete(_)})},i.skipHydration||v(),y||m},_I=(t,e)=>"getStorage"in e||"serialize"in e||"deserialize"in e?((yI?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),vI(t,e)):wI(t,e),X0=_I,xI=()=>Math.random().toString(36).substr(2,9),Te=ep()(X0((t,e)=>({tabs:[],activeTabId:null,splitMode:"none",activeSplitTabId:null,isSidebarOpen:!0,sidebarView:"explorer",isCommandPaletteOpen:!1,isSettingsOpen:!1,isZenMode:!1,searchQuery:"",searchResults:[],isSearching:!1,theme:"dark",fontSize:14,fontFamily:'Menlo, Monaco, "Courier New", monospace',wordWrap:"on",tabSize:2,insertSpaces:!0,autoSave:!1,autoSaveDelay:1e3,minimap:!0,lineNumbers:!0,renderWhitespace:"selection",recentFiles:[],recentFolders:[],lastSession:null,queryPanelOpen:!1,queryLanguage:"sql",queryPanelHeight:300,isQueryRunning:!1,addTab:n=>{const{tabs:r}=e(),s=r.find(o=>o.path===n.path);if(s){t({activeTabId:s.id});return}const i={...n,id:xI()};t({tabs:[...r,i],activeTabId:i.id})},closeTab:n=>{const{tabs:r,activeTabId:s}=e(),i=r.filter(o=>o.id!==n);if(s===n){const o=r.findIndex(l=>l.id===n),a=i[o]||i[o-1];t({tabs:i,activeTabId:(a==null?void 0:a.id)||null})}else t({tabs:i})},closeAllTabs:()=>t({tabs:[],activeTabId:null}),closeOtherTabs:n=>{const{tabs:r}=e(),s=r.find(i=>i.id===n);t({tabs:s?[s]:[],activeTabId:n})},setActiveTab:n=>t({activeTabId:n}),updateTabContent:(n,r)=>{const{tabs:s}=e();t({tabs:s.map(i=>i.id===n?{...i,content:r,isDirty:!0}:i)})},markTabClean:n=>{const{tabs:r}=e();t({tabs:r.map(s=>s.id===n?{...s,isDirty:!1}:s)})},markTabDirty:n=>{const{tabs:r}=e();t({tabs:r.map(s=>s.id===n?{...s,isDirty:!0}:s)})},updateTabPosition:(n,r)=>{const{tabs:s}=e();t({tabs:s.map(i=>i.id===n?{...i,cursorPosition:r}:i)})},updateTabScroll:(n,r)=>{const{tabs:s}=e();t({tabs:s.map(i=>i.id===n?{...i,scrollPosition:r}:i)})},toggleJsonView:n=>{const{tabs:r}=e();t({tabs:r.map(s=>s.id===n?{...s,isJsonView:!s.isJsonView}:s)})},setSplitMode:n=>t({splitMode:n}),setActiveSplitTab:n=>t({activeSplitTabId:n}),toggleSidebar:()=>t(n=>({isSidebarOpen:!n.isSidebarOpen})),setSidebarView:n=>t({sidebarView:n,isSidebarOpen:!0}),openCommandPalette:()=>t({isCommandPaletteOpen:!0}),closeCommandPalette:()=>t({isCommandPaletteOpen:!1}),toggleSettings:()=>t(n=>({isSettingsOpen:!n.isSettingsOpen})),toggleZenMode:()=>t(n=>({isZenMode:!n.isZenMode})),setSearchQuery:n=>t({searchQuery:n,isSearching:!!n}),setSearchResults:n=>t({searchResults:n}),clearSearch:()=>t({searchQuery:"",searchResults:[],isSearching:!1}),setTheme:n=>t({theme:n}),setFontSize:n=>t({fontSize:n}),setFontFamily:n=>t({fontFamily:n}),setWordWrap:n=>t({wordWrap:n}),setTabSize:n=>t({tabSize:n}),setInsertSpaces:n=>t({insertSpaces:n}),setAutoSave:n=>t({autoSave:n}),setMinimap:n=>t({minimap:n}),setLineNumbers:n=>t({lineNumbers:n}),addRecentFile:n=>{const{recentFiles:r}=e(),s=r.filter(i=>i!==n);t({recentFiles:[n,...s].slice(0,20)})},addRecentFolder:n=>{const{recentFolders:r}=e(),s=r.filter(i=>i!==n);t({recentFolders:[n,...s].slice(0,10)})},clearRecentFiles:()=>t({recentFiles:[],recentFolders:[]}),saveSession:()=>{const{tabs:n,activeTabId:r}=e();t({lastSession:{openFiles:n.map(s=>s.path),activeFile:r,openFolder:null}})},restoreSession:()=>{},toggleQueryPanel:()=>t(n=>({queryPanelOpen:!n.queryPanelOpen})),setQueryPanelOpen:n=>t({queryPanelOpen:n}),setQueryLanguage:n=>t({queryLanguage:n}),setQueryPanelHeight:n=>t({queryPanelHeight:n}),setIsQueryRunning:n=>t({isQueryRunning:n})}),{name:"opentext-storage",partialize:t=>({theme:t.theme,fontSize:t.fontSize,fontFamily:t.fontFamily,wordWrap:t.wordWrap,tabSize:t.tabSize,insertSpaces:t.insertSpaces,autoSave:t.autoSave,autoSaveDelay:t.autoSaveDelay,minimap:t.minimap,lineNumbers:t.lineNumbers,renderWhitespace:t.renderWhitespace,recentFiles:t.recentFiles,recentFolders:t.recentFolders,lastSession:t.lastSession})}));function bI(){return window.crypto.getRandomValues(new Uint32Array(1))[0]}function wy(t,e=!1){const n=bI(),r=`_${n}`;return Object.defineProperty(window,r,{value:s=>(e&&Reflect.deleteProperty(window,r),t==null?void 0:t(s)),writable:!1,configurable:!0}),n}async function SI(t,e={}){return new Promise((n,r)=>{const s=wy(o=>{n(o),Reflect.deleteProperty(window,`_${i}`)},!0),i=wy(o=>{r(o),Reflect.deleteProperty(window,`_${s}`)},!0);window.__TAURI_IPC__({cmd:t,callback:s,error:i,...e})})}async function yt(t){return SI("tauri",t)}var Go;(function(t){t[t.Audio=1]="Audio",t[t.Cache=2]="Cache",t[t.Config=3]="Config",t[t.Data=4]="Data",t[t.LocalData=5]="LocalData",t[t.Desktop=6]="Desktop",t[t.Document=7]="Document",t[t.Download=8]="Download",t[t.Executable=9]="Executable",t[t.Font=10]="Font",t[t.Home=11]="Home",t[t.Picture=12]="Picture",t[t.Public=13]="Public",t[t.Runtime=14]="Runtime",t[t.Template=15]="Template",t[t.Video=16]="Video",t[t.Resource=17]="Resource",t[t.App=18]="App",t[t.Log=19]="Log",t[t.Temp=20]="Temp",t[t.AppConfig=21]="AppConfig",t[t.AppData=22]="AppData",t[t.AppLocalData=23]="AppLocalData",t[t.AppCache=24]="AppCache",t[t.AppLog=25]="AppLog"})(Go||(Go={}));async function Z0(t,e={}){return yt({__tauriModule:"Fs",message:{cmd:"readTextFile",path:t,options:e}})}async function II(t,e={}){const n=await yt({__tauriModule:"Fs",message:{cmd:"readFile",path:t,options:e}});return Uint8Array.from(n)}async function ko(t,e,n){typeof n=="object"&&Object.freeze(n),typeof t=="object"&&Object.freeze(t);const r={path:"",contents:""};let s=n;return typeof t=="string"?r.path=t:(r.path=t.path,r.contents=t.contents),typeof e=="string"?r.contents=e!=null?e:"":s=e,yt({__tauriModule:"Fs",message:{cmd:"writeFile",path:r.path,contents:Array.from(new TextEncoder().encode(r.contents)),options:s}})}async function EI(t,e,n){typeof n=="object"&&Object.freeze(n),typeof t=="object"&&Object.freeze(t);const r={path:"",contents:[]};let s=n;return typeof t=="string"?r.path=t:(r.path=t.path,r.contents=t.contents),e&&"dir"in e?s=e:typeof t=="string"&&(r.contents=e!=null?e:[]),yt({__tauriModule:"Fs",message:{cmd:"writeFile",path:r.path,contents:Array.from(r.contents instanceof ArrayBuffer?new Uint8Array(r.contents):r.contents),options:s}})}async function gl(t,e={}){return yt({__tauriModule:"Fs",message:{cmd:"readDir",path:t,options:e}})}async function ew(t,e={}){return yt({__tauriModule:"Fs",message:{cmd:"createDir",path:t,options:e}})}async function tw(t,e={}){return yt({__tauriModule:"Fs",message:{cmd:"removeDir",path:t,options:e}})}async function NI(t,e,n={}){return yt({__tauriModule:"Fs",message:{cmd:"copyFile",source:t,destination:e,options:n}})}async function nw(t,e={}){return yt({__tauriModule:"Fs",message:{cmd:"removeFile",path:t,options:e}})}async function rw(t,e,n={}){return yt({__tauriModule:"Fs",message:{cmd:"renameFile",oldPath:t,newPath:e,options:n}})}async function kI(t,e={}){return yt({__tauriModule:"Fs",message:{cmd:"exists",path:t,options:e}})}const tp=Object.freeze(Object.defineProperty({__proto__:null,get BaseDirectory(){return Go},get Dir(){return Go},copyFile:NI,createDir:ew,exists:kI,readBinaryFile:II,readDir:gl,readTextFile:Z0,removeDir:tw,removeFile:nw,renameFile:rw,writeBinaryFile:EI,writeFile:ko,writeTextFile:ko},Symbol.toStringTag,{value:"Module"}));async function _y(t={}){return typeof t=="object"&&Object.freeze(t),yt({__tauriModule:"Dialog",message:{cmd:"openDialog",options:t}})}async function AI(t={}){return typeof t=="object"&&Object.freeze(t),yt({__tauriModule:"Dialog",message:{cmd:"saveDialog",options:t}})}function sw(){return navigator.appVersion.includes("Win")}sw();sw();async function Cs(...t){return yt({__tauriModule:"Path",message:{cmd:"join",paths:t}})}async function iw(t){return yt({__tauriModule:"Path",message:{cmd:"dirname",path:t}})}async function TI(t,e){return yt({__tauriModule:"Path",message:{cmd:"basename",path:t,ext:e}})}const OI=Object.freeze(Object.defineProperty({__proto__:null,get BaseDirectory(){return Go},basename:TI,dirname:iw,join:Cs},Symbol.toStringTag,{value:"Module"})),CI=t=>({js:"javascript",jsx:"javascript",ts:"typescript",tsx:"typescript",py:"python",html:"html",htm:"html",css:"css",scss:"scss",sass:"sass",less:"less",json:"json",xml:"xml",md:"markdown",java:"java",c:"c",cpp:"cpp",cc:"cpp",cxx:"cpp",h:"c",hpp:"cpp",cs:"csharp",go:"go",rs:"rust",rb:"ruby",php:"php",sql:"sql",sh:"shell",bash:"shell",zsh:"shell",ps1:"powershell",yaml:"yaml",yml:"yaml",toml:"toml",lua:"lua",r:"r",swift:"swift",kt:"kotlin",dart:"dart",vue:"vue",svelte:"svelte",graphql:"graphql",gql:"graphql",dockerfile:"dockerfile",makefile:"makefile",vim:"vim",elm:"elm",erl:"erlang",ex:"elixir",fs:"fsharp",hs:"haskell",jl:"julia",ml:"ocaml",nim:"nim",scala:"scala",clj:"clojure",cljs:"clojure",coffee:"coffeescript",pl:"perl",pm:"perl"})[t.toLowerCase()]||"plaintext",xy=t=>![".git",".svn",".hg","node_modules",".DS_Store","Thumbs.db"].some(n=>t.startsWith(n)),cr=ep((t,e)=>({currentFolder:null,fileTree:[],isLoading:!1,expandedFolders:new Set,selectedPath:null,openFolder:async()=>{try{const n=await _y({directory:!0,multiple:!1,title:"Open Folder"});n&&typeof n=="string"&&await e().loadFolder(n)}catch(n){console.error("Error opening folder:",n)}},loadFolder:async n=>{t({isLoading:!0,currentFolder:n});try{const r=await gl(n),s=[];for(const i of r){if(!xy(i.name||""))continue;const o=await Cs(n,i.name||"");i.children?s.push({name:i.name||"",path:o,type:"directory",children:[],isExpanded:!1}):s.push({name:i.name||"",path:o,type:"file"})}s.sort((i,o)=>i.type!==o.type?i.type==="directory"?-1:1:i.name.localeCompare(o.name)),t({fileTree:s,isLoading:!1})}catch(r){console.error("Error loading folder:",r),t({isLoading:!1})}},refreshFolder:async()=>{const{currentFolder:n}=e();n&&await e().loadFolder(n)},toggleFolder:async n=>{const{expandedFolders:r,fileTree:s}=e(),i=new Set(r);if(i.has(n))i.delete(n);else{i.add(n);const o=async l=>Promise.all(l.map(async u=>{if(u.path===n&&u.type==="directory"&&(!u.children||u.children.length===0))try{const d=await gl(n),f=[];for(const m of d){if(!xy(m.name||""))continue;const y=await Cs(n,m.name||"");m.children?f.push({name:m.name||"",path:y,type:"directory",children:[],isExpanded:!1}):f.push({name:m.name||"",path:y,type:"file"})}return f.sort((m,y)=>m.type!==y.type?m.type==="directory"?-1:1:m.name.localeCompare(y.name)),{...u,children:f,isExpanded:!0}}catch{return{...u,isExpanded:!0}}return u.children?{...u,children:await o(u.children)}:u})),a=await o(s);t({fileTree:a})}t({expandedFolders:i})},selectPath:n=>t({selectedPath:n}),createNewFile:async(n,r)=>{try{const s=await Cs(n,r);await ko(s,""),await e().refreshFolder()}catch(s){throw console.error("Error creating file:",s),s}},createNewFolder:async(n,r)=>{try{const s=await Cs(n,r);await ew(s),await e().refreshFolder()}catch(s){throw console.error("Error creating folder:",s),s}},deleteItem:async n=>{try{try{await gl(n),await tw(n,{recursive:!0})}catch{await nw(n)}await e().refreshFolder()}catch(r){throw console.error("Error deleting item:",r),r}},renameItem:async(n,r)=>{try{const s=await iw(n),i=await Cs(s,r);await rw(n,i),await e().refreshFolder()}catch(s){throw console.error("Error renaming item:",s),s}},openFile:async()=>{try{const n=await _y({multiple:!1,title:"Open File",filters:[{name:"All Files",extensions:["*"]},{name:"Text Files",extensions:["txt","md","json","xml","yaml","yml"]},{name:"Code Files",extensions:["js","ts","jsx","tsx","py","html","css","java","cpp","c","h","go","rs","rb","php"]}]});if(n&&typeof n=="string"){const r=await Z0(n),s=n.split("/").pop()||n;return{path:n,content:r,name:s}}return null}catch(n){return console.error("Error opening file:",n),null}},saveFile:async(n,r)=>{try{await ko(n,r)}catch(s){throw console.error("Error saving file:",s),s}},saveFileAs:async(n,r)=>{try{const s=await AI({defaultPath:r||"untitled",filters:[{name:"All Files",extensions:["*"]},{name:"Text",extensions:["txt"]},{name:"JavaScript",extensions:["js"]},{name:"TypeScript",extensions:["ts"]},{name:"JSON",extensions:["json"]},{name:"HTML",extensions:["html","htm"]},{name:"CSS",extensions:["css"]},{name:"Python",extensions:["py"]},{name:"Markdown",extensions:["md"]}]});if(s&&typeof s=="string"){await ko(s,n);const i=s.split("/").pop()||s;return{path:s,name:i}}return null}catch(s){return console.error("Error saving file:",s),null}},getFileLanguage:n=>{const r=n.split(".").pop()||"";return CI(r)}})),RI=Object.freeze(Object.defineProperty({__proto__:null,useFileSystemStore:cr},Symbol.toStringTag,{value:"Module"})),sd=[{id:"data-analyst",name:"Data Analyst",description:"Analyzes CSV, JSON, and data files to find patterns and insights",icon:"",systemPrompt:`You are a data analyst specializing in structured data analysis. You help users understand their data files (CSV, JSON, TSV, etc.) by:
- Analyzing data structure and schemas
- Finding patterns, trends, and anomalies
- Suggesting SQL queries or Python code for data exploration
- Explaining data relationships and statistics
- Recommending data cleaning or transformation steps

When responding:
- Provide clear, actionable insights
- Suggest specific queries the user can run
- Format data summaries in readable tables
- Highlight important findings`,capabilities:["analyze","query","transform","explain"],color:"#3b82f6",defaultProvider:"openai",defaultModel:"gpt-4o"},{id:"code-reviewer",name:"Code Reviewer",description:"Reviews code for quality, bugs, and best practices",icon:"",systemPrompt:`You are a senior software engineer performing code reviews. You help developers by:
- Identifying bugs and potential issues
- Suggesting performance improvements
- Ensuring code follows best practices
- Checking for security vulnerabilities
- Recommending refactoring when appropriate

When reviewing code:
- Be constructive and specific
- Explain the "why" behind suggestions
- Prioritize critical issues
- Suggest concrete fixes with code examples`,capabilities:["analyze","explain","generate"],color:"#10b981",defaultProvider:"openai",defaultModel:"gpt-4o"},{id:"log-analyzer",name:"Log Analyzer",description:"Parses log files and finds patterns, errors, and insights",icon:"",systemPrompt:`You are a log analysis expert. You help users understand log files by:
- Identifying error patterns and their frequency
- Finding root causes of issues
- Extracting timing and performance metrics
- Parsing structured and unstructured logs
- Suggesting regex patterns for log filtering

When analyzing logs:
- Highlight critical errors first
- Group similar messages together
- Provide timestamps and frequency counts
- Suggest tools or queries for deeper analysis`,capabilities:["analyze","query","explain"],color:"#f59e0b",defaultProvider:"openai",defaultModel:"gpt-4o"},{id:"regex-expert",name:"Regex Expert",description:"Helps with regex patterns, testing, and explanations",icon:"",systemPrompt:`You are a regular expression expert. You help users by:
- Building regex patterns for specific needs
- Explaining complex regex in plain English
- Testing patterns against sample data
- Optimizing regex for performance
- Converting between different regex flavors

When working with regex:
- Provide the pattern and a clear explanation
- Include test cases showing matches
- Explain what each part of the pattern does
- Warn about potential edge cases`,capabilities:["generate","explain","analyze"],color:"#8b5cf6",defaultProvider:"openai",defaultModel:"gpt-4o"},{id:"json-wrangler",name:"JSON Wrangler",description:"Helps transform, query, and manipulate JSON data",icon:"",systemPrompt:`You are a JSON data specialist. You help users work with JSON by:
- Transforming JSON structures
- Suggesting jq or JavaScript operations
- Flattening nested data
- Validating and formatting JSON
- Converting between JSON and other formats

When working with JSON:
- Show before/after examples
- Suggest practical transformations
- Provide working code snippets
- Handle edge cases like null values`,capabilities:["transform","query","generate","explain"],color:"#06b6d4",defaultProvider:"openai",defaultModel:"gpt-4o"},{id:"sql-assistant",name:"SQL Assistant",description:"Writes and optimizes SQL queries for data analysis",icon:"",systemPrompt:`You are a SQL expert specializing in DuckDB syntax. You help users by:
- Writing queries for data analysis
- Optimizing slow queries
- Explaining query execution plans
- Converting between SQL dialects
- Suggesting indexes and optimizations

When writing SQL:
- Use DuckDB-compatible syntax
- Include comments for complex logic
- Consider performance implications
- Provide alternative approaches when relevant`,capabilities:["query","generate","explain","analyze"],color:"#ec4899",defaultProvider:"openai",defaultModel:"gpt-4o"}],Ua=t=>({provider:t,model:t==="openai"?"gpt-4o":t==="anthropic"?"claude-3-5-sonnet-20241022":t==="ollama"?"llama3.2":"",temperature:.7,maxTokens:4096,contextWindow:8e3,apiKey:"",baseUrl:t==="ollama"?"http://localhost:11434":void 0}),by=()=>Math.random().toString(36).substring(2,9),sr=ep()(X0((t,e)=>({isPanelOpen:!1,panelWidth:380,showSettings:!1,providers:{openai:Ua("openai"),anthropic:Ua("anthropic"),ollama:Ua("ollama"),custom:Ua("custom")},activeProvider:"openai",agents:[...sd],activeAgentId:"data-analyst",sessions:[],activeSessionId:null,isLoading:!1,streamingMessageId:null,togglePanel:()=>t(n=>({isPanelOpen:!n.isPanelOpen})),setPanelOpen:n=>t({isPanelOpen:n}),setPanelWidth:n=>t({panelWidth:Math.max(300,Math.min(600,n))}),setProviderConfig:(n,r)=>{t(s=>({providers:{...s.providers,[n]:{...s.providers[n],...r}}}))},setActiveProvider:n=>t({activeProvider:n}),setActiveAgent:n=>t({activeAgentId:n}),addCustomAgent:n=>{t(r=>({agents:[...r.agents,n]}))},removeCustomAgent:n=>{t(r=>({agents:r.agents.filter(s=>s.id!==n),activeAgentId:r.activeAgentId===n?sd[0].id:r.activeAgentId}))},updateAgent:(n,r)=>{t(s=>({agents:s.agents.map(i=>i.id===n?{...i,...r}:i)}))},createSession:(n,r)=>{const s=by(),i=e().agents.find(a=>a.id===(n||e().activeAgentId)),o={id:s,name:r?`${(i==null?void 0:i.name)||"Chat"} - ${r.fileName}`:`${(i==null?void 0:i.name)||"Chat"} ${new Date().toLocaleTimeString()}`,agentId:n||e().activeAgentId,messages:[],createdAt:Date.now(),updatedAt:Date.now(),fileContext:r};return t(a=>({sessions:[o,...a.sessions],activeSessionId:s})),s},deleteSession:n=>{t(r=>{var i;const s=r.sessions.filter(o=>o.id!==n);return{sessions:s,activeSessionId:r.activeSessionId===n?((i=s[0])==null?void 0:i.id)||null:r.activeSessionId}})},setActiveSession:n=>t({activeSessionId:n}),renameSession:(n,r)=>{t(s=>({sessions:s.sessions.map(i=>i.id===n?{...i,name:r,updatedAt:Date.now()}:i)}))},clearAllSessions:()=>t({sessions:[],activeSessionId:null}),addMessage:(n,r)=>{const s={...r,id:by(),timestamp:Date.now()};return t(i=>({sessions:i.sessions.map(o=>o.id===n?{...o,messages:[...o.messages,s],updatedAt:Date.now()}:o)})),s.id},updateMessage:(n,r,s)=>{t(i=>({sessions:i.sessions.map(o=>o.id===n?{...o,messages:o.messages.map(a=>a.id===r?{...a,...s}:a),updatedAt:Date.now()}:o)}))},clearSessionMessages:n=>{t(r=>({sessions:r.sessions.map(s=>s.id===n?{...s,messages:[],updatedAt:Date.now()}:s)}))},deleteMessage:(n,r)=>{t(s=>({sessions:s.sessions.map(i=>i.id===n?{...i,messages:i.messages.filter(o=>o.id!==r),updatedAt:Date.now()}:i)}))},toggleSettings:()=>t(n=>({showSettings:!n.showSettings})),setShowSettings:n=>t({showSettings:n}),setIsLoading:n=>t({isLoading:n}),setStreamingMessageId:n=>t({streamingMessageId:n})}),{name:"ai-agents-storage",partialize:t=>({providers:{openai:{...t.providers.openai,apiKey:void 0},anthropic:{...t.providers.anthropic,apiKey:void 0},ollama:t.providers.ollama,custom:{...t.providers.custom,apiKey:void 0}},activeProvider:t.activeProvider,agents:t.agents.filter(e=>!sd.find(n=>n.id===e.id)),activeAgentId:t.activeAgentId,panelWidth:t.panelWidth})})),Yr=(t,e,n=!0)=>{const r=T.useRef(e);T.useEffect(()=>{r.current=e},[e]),T.useEffect(()=>{if(!n)return;const s=i=>{const o=t.toLowerCase().split("+"),a=o.pop()||"",l={ctrl:o.includes("ctrl")||o.includes("mod"),alt:o.includes("alt"),shift:o.includes("shift"),meta:o.includes("cmd")||o.includes("mod")};i.key.toLowerCase()===a&&i.ctrlKey===l.ctrl&&i.altKey===l.alt&&i.shiftKey===l.shift&&i.metaKey===l.meta&&(i.preventDefault(),r.current())};return window.addEventListener("keydown",s),()=>window.removeEventListener("keydown",s)},[t,n])};/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var jI={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FI=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),q=(t,e)=>{const n=T.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:a="",children:l,...u},d)=>T.createElement("svg",{ref:d,...jI,width:s,height:s,stroke:r,strokeWidth:o?Number(i)*24/Number(s):i,className:["lucide",`lucide-${FI(t)}`,a].join(" "),...u},[...e.map(([f,m])=>T.createElement(f,m)),...Array.isArray(l)?l:[l]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ow=q("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PI=q("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LI=q("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ei=q("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const np=q("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const da=q("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MI=q("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DI=q("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BI=q("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aw=q("Code2",[["path",{d:"m18 16 4-4-4-4",key:"1inbqp"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}],["path",{d:"m14.5 4-5 16",key:"e7oirm"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lw=q("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nf=q("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sy=q("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UI=q("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $I=q("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cw=q("FileJson",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zI=q("FilePen",[["path",{d:"M12 22h6a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v10",key:"x7tsz2"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10.4 12.6a2 2 0 1 1 3 3L8 21l-4 1 1-4Z",key:"o3xyfb"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VI=q("FilePlus",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M9 15h6",key:"cctwl0"}],["path",{d:"M12 18v-6",key:"17g6i2"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WI=q("FileType",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M9 13v-1h6v1",key:"1bb014"}],["path",{d:"M12 12v6",key:"3ahymv"}],["path",{d:"M11 18h2",key:"12mj7e"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iy=q("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qI=q("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HI=q("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uw=q("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QI=q("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KI=q("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JI=q("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YI=q("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GI=q("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XI=q("Keyboard",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",ry:"2",key:"15u882"}],["path",{d:"M6 8h.001",key:"1ej0i3"}],["path",{d:"M10 8h.001",key:"1x2st2"}],["path",{d:"M14 8h.001",key:"1vkmyp"}],["path",{d:"M18 8h.001",key:"kfsenl"}],["path",{d:"M8 12h.001",key:"1sjpby"}],["path",{d:"M12 12h.001",key:"al75ts"}],["path",{d:"M16 12h.001",key:"931bgk"}],["path",{d:"M7 16h10",key:"wp8him"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kf=q("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dw=q("Maximize",[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZI=q("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eE=q("Minimize",[["path",{d:"M8 3v3a2 2 0 0 1-2 2H3",key:"hohbtr"}],["path",{d:"M21 8h-3a2 2 0 0 1-2-2V3",key:"5jw1f3"}],["path",{d:"M3 16h3a2 2 0 0 1 2 2v3",key:"198tvr"}],["path",{d:"M16 21v-3a2 2 0 0 1 2-2h3",key:"ph8mxp"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tE=q("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nE=q("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rE=q("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",key:"1xcu5"}],["circle",{cx:"17.5",cy:"10.5",r:".5",key:"736e4u"}],["circle",{cx:"8.5",cy:"7.5",r:".5",key:"clrty"}],["circle",{cx:"6.5",cy:"12.5",r:".5",key:"1s4xz9"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sE=q("PanelRight",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fw=q("PanelsTopLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iE=q("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hw=q("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rp=q("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ey=q("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pw=q("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hu=q("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oE=q("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aE=q("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sp=q("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ip=q("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ny=q("Split",[["path",{d:"M16 3h5v5",key:"1806ms"}],["path",{d:"M8 3H3v5",key:"15dfkv"}],["path",{d:"M12 22v-8.3a4 4 0 0 0-1.172-2.872L3 3",key:"1qrqzj"}],["path",{d:"m15 9 6-6",key:"ko1vev"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lE=q("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cE=q("Table",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Af=q("Terminal",[["polyline",{points:"4 17 10 11 4 5",key:"akl6gq"}],["line",{x1:"12",x2:"20",y1:"19",y2:"19",key:"q2wloq"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tf=q("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uE=q("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fa=q("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dE=q("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),fE=(t,e)=>{let n;return(...r)=>{clearTimeout(n),n=setTimeout(()=>t(...r),e)}},hE=t=>t.trim().split(/\s+/).filter(e=>e.length>0).length,pE=t=>t.split(`
`).length,mE=(t,e=2)=>{try{const n=JSON.parse(t);return JSON.stringify(n,null,e)}catch{return t}},Of=t=>{var r;const e=(r=t.split(".").pop())==null?void 0:r.toLowerCase();return{js:"",jsx:"",ts:"",tsx:"",py:"",html:"",css:"",scss:"",json:"",md:"",java:"",c:"",cpp:"",go:"",rs:"",rb:"",php:"",sql:"",sh:"",yml:"",yaml:"",dockerfile:"",gitignore:""}[e||""]||""},yE=({width:t=250})=>{const{sidebarView:e,setSidebarView:n}=Te(),r=[{id:"explorer",icon:qI,label:"Explorer"},{id:"search",icon:hu,label:"Search"},{id:"json-viewer",icon:cw,label:"JSON"},{id:"git",icon:uw,label:"Source Control"}];return c.jsxs("div",{className:"flex h-full",style:{width:t},children:[c.jsxs("div",{className:"w-12 bg-secondary border-r border-border-color flex flex-col items-center py-2 gap-1",children:[r.map(s=>c.jsx("button",{onClick:()=>n(s.id),className:`p-2 rounded transition-colors ${e===s.id?"text-white border-l-2 border-accent bg-active":"text-text-secondary hover:text-text-primary hover:bg-hover"}`,title:s.label,children:c.jsx(s.icon,{size:24})},s.id)),c.jsx("div",{className:"flex-1"}),c.jsx("button",{onClick:()=>Te.getState().toggleSettings(),className:"p-2 rounded text-text-secondary hover:text-text-primary hover:bg-hover transition-colors",title:"Settings",children:c.jsx(sp,{size:24})})]}),c.jsxs("div",{className:"flex-1 bg-secondary flex flex-col min-w-0",children:[e==="explorer"&&c.jsx(gE,{}),e==="search"&&c.jsx(vE,{}),e==="json-viewer"&&c.jsx(wE,{}),e==="git"&&c.jsx(_E,{})]})]})},gE=()=>{const{currentFolder:t,fileTree:e,isLoading:n,expandedFolders:r,selectedPath:s,openFolder:i,loadFolder:o,refreshFolder:a,toggleFolder:l,selectPath:u,createNewFile:d,createNewFolder:f,deleteItem:m,renameItem:y}=cr(),{addTab:v,recentFolders:_}=Te(),[b,p]=T.useState(null),[h,g]=T.useState(null),[S,x]=T.useState(""),[I,N]=T.useState(null),[k,C]=T.useState(""),A=async R=>{if(R.type==="directory")l(R.path);else{u(R.path);try{const{readTextFile:oe}=await Si(async()=>{const{readTextFile:D}=await Promise.resolve().then(()=>tp);return{readTextFile:D}},void 0),M=await oe(R.path),W=R.path.split("/").pop()||R.path,{useFileSystemStore:K}=await Si(async()=>{const{useFileSystemStore:D}=await Promise.resolve().then(()=>RI);return{useFileSystemStore:D}},void 0),O=K.getState().getFileLanguage(R.path);v({path:R.path,name:W,content:M,isDirty:!1,language:O})}catch(oe){console.error("Error opening file:",oe)}}},L=(R,oe)=>{R.preventDefault(),R.stopPropagation(),p({x:R.clientX,y:R.clientY,node:oe})},H=async R=>{var oe;if(S.trim())try{const M=((oe=b==null?void 0:b.node)==null?void 0:oe.type)==="directory"?b.node.path:t;R==="file"?await d(M,S):await f(M,S),g(null),x(""),p(null)}catch(M){console.error("Error creating item:",M)}},ye=async()=>{if(!(!I||!k.trim()))try{await y(I.path,k),N(null),C("")}catch(R){console.error("Error renaming item:",R)}},le=async()=>{if(b!=null&&b.node&&confirm(`Are you sure you want to delete "${b.node.name}"?`))try{await m(b.node.path),p(null)}catch(R){console.error("Error deleting item:",R)}},j=(R,oe=0)=>{const M=r.has(R.path),W=s===R.path,K=oe*12+8;return(I==null?void 0:I.path)===R.path?c.jsxs("div",{className:"flex items-center py-1 px-2",style:{paddingLeft:K},children:[c.jsx("span",{className:"mr-1",children:R.type==="directory"?"":Of(R.name)}),c.jsx("input",{type:"text",value:k,onChange:O=>C(O.target.value),onBlur:ye,onKeyDown:O=>O.key==="Enter"&&ye(),autoFocus:!0,className:"flex-1 bg-primary text-text-primary text-sm px-2 py-0.5 rounded outline-none border border-accent"})]},R.path):c.jsxs("div",{children:[c.jsxs("div",{className:`flex items-center py-1 px-2 cursor-pointer text-sm ${W?"bg-accent text-white":"hover:bg-hover text-text-primary"}`,style:{paddingLeft:K},onClick:()=>A(R),onContextMenu:O=>L(O,R),children:[R.type==="directory"&&c.jsx("span",{className:"mr-1 text-text-secondary",children:M?c.jsx(da,{size:14}):c.jsx(MI,{size:14})}),c.jsx("span",{className:"mr-2",children:R.type==="directory"?M?"":"":Of(R.name)}),c.jsx("span",{className:"truncate",children:R.name})]}),R.type==="directory"&&M&&R.children&&c.jsx("div",{children:R.children.map(O=>j(O,oe+1))})]},R.path)};return c.jsxs("div",{className:"flex flex-col h-full",children:[c.jsxs("div",{className:"flex items-center justify-between px-3 py-2 border-b border-border-color",children:[c.jsx("span",{className:"text-xs font-semibold text-text-secondary uppercase tracking-wider",children:"Explorer"}),c.jsxs("div",{className:"flex gap-1",children:[c.jsx("button",{onClick:()=>g("file"),className:"p-1 hover:bg-hover rounded text-text-secondary",title:"New File",children:c.jsx(rp,{size:16})}),c.jsx("button",{onClick:a,className:"p-1 hover:bg-hover rounded text-text-secondary",title:"Refresh",children:c.jsx(Ey,{size:16})})]})]}),t?c.jsxs("div",{className:"flex-1 overflow-y-auto",children:[c.jsx("div",{className:"px-3 py-2 text-sm font-medium text-text-secondary uppercase truncate",children:t.split("/").pop()}),n?c.jsxs("div",{className:"flex items-center justify-center py-8 text-text-secondary",children:[c.jsx(Ey,{className:"animate-spin mr-2",size:16}),"Loading..."]}):c.jsx("div",{children:e.map(R=>j(R))})]}):c.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-4 text-center",children:[c.jsx("p",{className:"text-text-secondary mb-4 text-sm",children:"You have not yet opened a folder."}),c.jsx("button",{onClick:i,className:"px-4 py-2 bg-accent hover:bg-accent-hover text-white rounded text-sm transition-colors",children:"Open Folder"}),_.length>0&&c.jsxs("div",{className:"mt-4 w-full",children:[c.jsx("p",{className:"text-text-secondary text-xs mb-2",children:"Recent Folders:"}),_.slice(0,5).map(R=>c.jsx("button",{onClick:()=>o(R),className:"block w-full text-left px-2 py-1 text-xs text-text-secondary hover:text-text-primary hover:bg-hover rounded truncate",children:R},R))]})]}),h&&c.jsx("div",{className:"px-3 py-2 border-t border-border-color bg-tertiary",children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{children:h==="file"?"":""}),c.jsx("input",{type:"text",placeholder:`New ${h} name...`,value:S,onChange:R=>x(R.target.value),onKeyDown:R=>{R.key==="Enter"&&H(h),R.key==="Escape"&&(g(null),x(""))},autoFocus:!0,className:"flex-1 bg-primary text-text-primary text-sm px-2 py-1 rounded outline-none border border-border-color"})]})}),b&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>p(null)}),c.jsxs("div",{className:"fixed z-50 bg-tertiary border border-border-color rounded shadow-lg py-1 min-w-[150px]",style:{top:b.y,left:b.x},children:[c.jsx("button",{onClick:()=>{g("file"),p(null)},className:"w-full text-left px-3 py-1.5 text-sm hover:bg-hover text-text-primary",children:"New File"}),c.jsx("button",{onClick:()=>{g("folder"),p(null)},className:"w-full text-left px-3 py-1.5 text-sm hover:bg-hover text-text-primary",children:"New Folder"}),c.jsx("div",{className:"border-t border-border-color my-1"}),c.jsx("button",{onClick:()=>{b.node&&(N(b.node),C(b.node.name),p(null))},className:"w-full text-left px-3 py-1.5 text-sm hover:bg-hover text-text-primary",children:"Rename"}),c.jsx("button",{onClick:le,className:"w-full text-left px-3 py-1.5 text-sm hover:bg-hover text-red-400",children:"Delete"})]})]})]})},vE=()=>{const{searchQuery:t,setSearchQuery:e,searchResults:n,clearSearch:r}=Te(),[s,i]=T.useState(""),[o,a]=T.useState(!1),[l,u]=T.useState(!1),[d,f]=T.useState(!1),m=async()=>{t&&console.log("Searching for:",t)};return c.jsxs("div",{className:"flex flex-col h-full p-3",children:[c.jsx("div",{className:"text-xs font-semibold text-text-secondary uppercase tracking-wider mb-3",children:"Search"}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"relative",children:[c.jsx(hu,{className:"absolute left-2 top-2 text-text-secondary",size:14}),c.jsx("input",{type:"text",placeholder:"Search",value:t,onChange:y=>e(y.target.value),onKeyDown:y=>y.key==="Enter"&&m(),className:"w-full bg-primary text-text-primary text-sm pl-8 pr-2 py-1.5 rounded outline-none border border-border-color focus:border-accent"})]}),c.jsx("div",{className:"relative",children:c.jsx("input",{type:"text",placeholder:"Replace",value:s,onChange:y=>i(y.target.value),className:"w-full bg-primary text-text-primary text-sm px-2 py-1.5 rounded outline-none border border-border-color focus:border-accent"})}),c.jsxs("div",{className:"flex flex-wrap gap-1",children:[c.jsx("button",{onClick:()=>a(!o),className:`px-2 py-1 text-xs rounded ${o?"bg-accent text-white":"bg-tertiary text-text-secondary"}`,title:"Match Case",children:"Aa"}),c.jsx("button",{onClick:()=>u(!l),className:`px-2 py-1 text-xs rounded ${l?"bg-accent text-white":"bg-tertiary text-text-secondary"}`,title:"Match Whole Word",children:"ab"}),c.jsx("button",{onClick:()=>f(!d),className:`px-2 py-1 text-xs rounded ${d?"bg-accent text-white":"bg-tertiary text-text-secondary"}`,title:"Use Regular Expression",children:".*"})]}),c.jsxs("div",{className:"flex gap-2 pt-2",children:[c.jsx("button",{onClick:m,className:"flex-1 px-3 py-1.5 bg-accent hover:bg-accent-hover text-white text-sm rounded transition-colors",children:"Find All"}),c.jsx("button",{onClick:()=>{r(),i("")},className:"px-3 py-1.5 bg-tertiary hover:bg-hover text-text-primary text-sm rounded transition-colors",children:"Clear"})]})]}),n.length>0&&c.jsxs("div",{className:"flex-1 mt-4 overflow-y-auto",children:[c.jsxs("div",{className:"text-xs text-text-secondary mb-2",children:[n.length," results"]}),n.map((y,v)=>c.jsxs("div",{className:"p-2 hover:bg-hover cursor-pointer text-sm border-l-2 border-transparent hover:border-accent",children:[c.jsx("div",{className:"text-text-secondary text-xs truncate",children:y.filePath}),c.jsx("div",{className:"text-text-primary truncate",children:y.preview})]},v))]})]})},wE=()=>c.jsxs("div",{className:"flex flex-col h-full p-3",children:[c.jsx("div",{className:"text-xs font-semibold text-text-secondary uppercase tracking-wider mb-3",children:"JSON Viewer"}),c.jsxs("p",{className:"text-sm text-text-secondary",children:["Open a JSON file and press ",c.jsx("kbd",{className:"px-1 py-0.5 bg-tertiary rounded",children:"Ctrl+Shift+J"})," to toggle JSON view mode."]})]}),_E=()=>c.jsxs("div",{className:"flex flex-col h-full p-3",children:[c.jsx("div",{className:"text-xs font-semibold text-text-secondary uppercase tracking-wider mb-3",children:"Source Control"}),c.jsx("p",{className:"text-sm text-text-secondary",children:"Git integration coming soon. Open a folder with a Git repository to see changes."})]}),xE=()=>{const{tabs:t,activeTabId:e,splitMode:n,setActiveTab:r,closeTab:s,setSplitMode:i}=Te(),{saveFile:o}=cr(),a=d=>{r(d)},l=async(d,f)=>{d.stopPropagation();const m=t.find(y=>y.id===f);if(m!=null&&m.isDirty&&confirm(`Do you want to save changes to ${m.name}?`))try{await o(m.path,m.content)}catch(v){console.error("Error saving file:",v);return}s(f)},u=(d,f)=>{d.preventDefault()};return t.length===0?null:c.jsxs("div",{className:"flex items-center bg-secondary border-b border-border-color",children:[c.jsx("div",{className:"flex-1 flex overflow-x-auto",children:t.map(d=>c.jsxs("div",{onClick:()=>a(d.id),onContextMenu:f=>u(f,d.id),className:`group flex items-center gap-2 px-3 py-2 min-w-[120px] max-w-[200px] cursor-pointer border-r border-border-color transition-colors ${e===d.id?"bg-primary border-t-2 border-t-accent":"bg-secondary hover:bg-hover border-t-2 border-t-transparent"}`,children:[c.jsx("span",{className:"text-sm",children:Of(d.name)}),c.jsx("span",{className:`flex-1 text-sm truncate ${d.isDirty?"italic":""}`,children:d.name}),d.isDirty&&c.jsx(BI,{size:8,className:"fill-text-secondary text-text-secondary"}),c.jsx("button",{onClick:f=>l(f,d.id),className:"opacity-0 group-hover:opacity-100 p-0.5 hover:bg-tertiary rounded transition-all",children:c.jsx(fa,{size:14})})]},d.id))}),c.jsxs("div",{className:"flex items-center gap-1 px-2 border-l border-border-color",children:[c.jsx("button",{onClick:()=>i(n==="vertical"?"none":"vertical"),className:`p-1.5 rounded transition-colors ${n==="vertical"?"bg-accent text-white":"hover:bg-hover text-text-secondary"}`,title:"Split Editor Right",children:c.jsx(Ny,{size:16,className:"rotate-90"})}),c.jsx("button",{onClick:()=>i(n==="horizontal"?"none":"horizontal"),className:`p-1.5 rounded transition-colors ${n==="horizontal"?"bg-accent text-white":"hover:bg-hover text-text-secondary"}`,title:"Split Editor Down",children:c.jsx(Ny,{size:16})})]})]})};function ky(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function bE(t){if(Array.isArray(t))return t}function SE(t,e,n){return(e=OE(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function IE(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,i,o,a=[],l=!0,u=!1;try{if(i=(n=n.call(t)).next,e!==0)for(;!(l=(r=i.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(d){u=!0,s=d}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw s}}return a}}function EE(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ay(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Ty(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Ay(Object(n),!0).forEach(function(r){SE(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ay(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function NE(t,e){if(t==null)return{};var n,r,s=kE(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function kE(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function AE(t,e){return bE(t)||IE(t,e)||CE(t,e)||EE()}function TE(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function OE(t){var e=TE(t,"string");return typeof e=="symbol"?e:e+""}function CE(t,e){if(t){if(typeof t=="string")return ky(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ky(t,e):void 0}}function RE(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Oy(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Cy(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Oy(Object(n),!0).forEach(function(r){RE(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Oy(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function jE(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(r){return e.reduceRight(function(s,i){return i(s)},r)}}function Zi(t){return function e(){for(var n=this,r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return s.length>=t.length?t.apply(this,s):function(){for(var o=arguments.length,a=new Array(o),l=0;l<o;l++)a[l]=arguments[l];return e.apply(n,[].concat(s,a))}}}function cc(t){return{}.toString.call(t).includes("Object")}function FE(t){return!Object.keys(t).length}function Xo(t){return typeof t=="function"}function PE(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function LE(t,e){return cc(e)||Dr("changeType"),Object.keys(e).some(function(n){return!PE(t,n)})&&Dr("changeField"),e}function ME(t){Xo(t)||Dr("selectorType")}function DE(t){Xo(t)||cc(t)||Dr("handlerType"),cc(t)&&Object.values(t).some(function(e){return!Xo(e)})&&Dr("handlersType")}function BE(t){t||Dr("initialIsRequired"),cc(t)||Dr("initialType"),FE(t)&&Dr("initialContent")}function UE(t,e){throw new Error(t[e]||t.default)}var $E={initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"},Dr=Zi(UE)($E),$a={changes:LE,selector:ME,handler:DE,initial:BE};function zE(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};$a.initial(t),$a.handler(e);var n={current:t},r=Zi(qE)(n,e),s=Zi(WE)(n),i=Zi($a.changes)(t),o=Zi(VE)(n);function a(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(d){return d};return $a.selector(u),u(n.current)}function l(u){jE(r,s,i,o)(u)}return[a,l]}function VE(t,e){return Xo(e)?e(t.current):e}function WE(t,e){return t.current=Cy(Cy({},t.current),e),e}function qE(t,e,n){return Xo(e)?e(t.current):Object.keys(n).forEach(function(r){var s;return(s=e[r])===null||s===void 0?void 0:s.call(e,t.current[r])}),n}var HE={create:zE},QE={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.55.1/min/vs"}};function KE(t){return function e(){for(var n=this,r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return s.length>=t.length?t.apply(this,s):function(){for(var o=arguments.length,a=new Array(o),l=0;l<o;l++)a[l]=arguments[l];return e.apply(n,[].concat(s,a))}}}function JE(t){return{}.toString.call(t).includes("Object")}function YE(t){return t||Ry("configIsRequired"),JE(t)||Ry("configType"),t.urls?(GE(),{paths:{vs:t.urls.monacoBase}}):t}function GE(){console.warn(mw.deprecation)}function XE(t,e){throw new Error(t[e]||t.default)}var mw={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })

    For more please check the link https://github.com/suren-atoyan/monaco-loader#config
  `},Ry=KE(XE)(mw),ZE={config:YE},eN=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return function(s){return n.reduceRight(function(i,o){return o(i)},s)}};function yw(t,e){return Object.keys(e).forEach(function(n){e[n]instanceof Object&&t[n]&&Object.assign(e[n],yw(t[n],e[n]))}),Ty(Ty({},t),e)}var tN={type:"cancelation",msg:"operation is manually canceled"};function id(t){var e=!1,n=new Promise(function(r,s){t.then(function(i){return e?s(tN):r(i)}),t.catch(s)});return n.cancel=function(){return e=!0},n}var nN=["monaco"],rN=HE.create({config:QE,isInitialized:!1,resolve:null,reject:null,monaco:null}),gw=AE(rN,2),ha=gw[0],pu=gw[1];function sN(t){var e=ZE.config(t),n=e.monaco,r=NE(e,nN);pu(function(s){return{config:yw(s.config,r),monaco:n}})}function iN(){var t=ha(function(e){var n=e.monaco,r=e.isInitialized,s=e.resolve;return{monaco:n,isInitialized:r,resolve:s}});if(!t.isInitialized){if(pu({isInitialized:!0}),t.monaco)return t.resolve(t.monaco),id(od);if(window.monaco&&window.monaco.editor)return vw(window.monaco),t.resolve(window.monaco),id(od);eN(oN,lN)(cN)}return id(od)}function oN(t){return document.body.appendChild(t)}function aN(t){var e=document.createElement("script");return t&&(e.src=t),e}function lN(t){var e=ha(function(r){var s=r.config,i=r.reject;return{config:s,reject:i}}),n=aN("".concat(e.config.paths.vs,"/loader.js"));return n.onload=function(){return t()},n.onerror=e.reject,n}function cN(){var t=ha(function(n){var r=n.config,s=n.resolve,i=n.reject;return{config:r,resolve:s,reject:i}}),e=window.require;e.config(t.config),e(["vs/editor/editor.main"],function(n){var r=n.m||n;vw(r),t.resolve(r)},function(n){t.reject(n)})}function vw(t){ha().monaco||pu({monaco:t})}function uN(){return ha(function(t){var e=t.monaco;return e})}var od=new Promise(function(t,e){return pu({resolve:t,reject:e})}),ww={config:sN,init:iN,__getMonacoInstance:uN},dN={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},ad=dN,fN={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}},hN=fN;function pN({children:t}){return Tr.createElement("div",{style:hN.container},t)}var mN=pN,yN=mN;function gN({width:t,height:e,isEditorReady:n,loading:r,_ref:s,className:i,wrapperProps:o}){return Tr.createElement("section",{style:{...ad.wrapper,width:t,height:e},...o},!n&&Tr.createElement(yN,null,r),Tr.createElement("div",{ref:s,style:{...ad.fullWidth,...!n&&ad.hide},className:i}))}var vN=gN,_w=T.memo(vN);function wN(t){T.useEffect(t,[])}var xw=wN;function _N(t,e,n=!0){let r=T.useRef(!0);T.useEffect(r.current||!n?()=>{r.current=!1}:t,e)}var zt=_N;function Ao(){}function ri(t,e,n,r){return xN(t,r)||bN(t,e,n,r)}function xN(t,e){return t.editor.getModel(bw(t,e))}function bN(t,e,n,r){return t.editor.createModel(e,n,r?bw(t,r):void 0)}function bw(t,e){return t.Uri.parse(e)}function SN({original:t,modified:e,language:n,originalLanguage:r,modifiedLanguage:s,originalModelPath:i,modifiedModelPath:o,keepCurrentOriginalModel:a=!1,keepCurrentModifiedModel:l=!1,theme:u="light",loading:d="Loading...",options:f={},height:m="100%",width:y="100%",className:v,wrapperProps:_={},beforeMount:b=Ao,onMount:p=Ao}){let[h,g]=T.useState(!1),[S,x]=T.useState(!0),I=T.useRef(null),N=T.useRef(null),k=T.useRef(null),C=T.useRef(p),A=T.useRef(b),L=T.useRef(!1);xw(()=>{let j=ww.init();return j.then(R=>(N.current=R)&&x(!1)).catch(R=>(R==null?void 0:R.type)!=="cancelation"&&console.error("Monaco initialization: error:",R)),()=>I.current?le():j.cancel()}),zt(()=>{if(I.current&&N.current){let j=I.current.getOriginalEditor(),R=ri(N.current,t||"",r||n||"text",i||"");R!==j.getModel()&&j.setModel(R)}},[i],h),zt(()=>{if(I.current&&N.current){let j=I.current.getModifiedEditor(),R=ri(N.current,e||"",s||n||"text",o||"");R!==j.getModel()&&j.setModel(R)}},[o],h),zt(()=>{let j=I.current.getModifiedEditor();j.getOption(N.current.editor.EditorOption.readOnly)?j.setValue(e||""):e!==j.getValue()&&(j.executeEdits("",[{range:j.getModel().getFullModelRange(),text:e||"",forceMoveMarkers:!0}]),j.pushUndoStop())},[e],h),zt(()=>{var j,R;(R=(j=I.current)==null?void 0:j.getModel())==null||R.original.setValue(t||"")},[t],h),zt(()=>{let{original:j,modified:R}=I.current.getModel();N.current.editor.setModelLanguage(j,r||n||"text"),N.current.editor.setModelLanguage(R,s||n||"text")},[n,r,s],h),zt(()=>{var j;(j=N.current)==null||j.editor.setTheme(u)},[u],h),zt(()=>{var j;(j=I.current)==null||j.updateOptions(f)},[f],h);let H=T.useCallback(()=>{var oe;if(!N.current)return;A.current(N.current);let j=ri(N.current,t||"",r||n||"text",i||""),R=ri(N.current,e||"",s||n||"text",o||"");(oe=I.current)==null||oe.setModel({original:j,modified:R})},[n,e,s,t,r,i,o]),ye=T.useCallback(()=>{var j;!L.current&&k.current&&(I.current=N.current.editor.createDiffEditor(k.current,{automaticLayout:!0,...f}),H(),(j=N.current)==null||j.editor.setTheme(u),g(!0),L.current=!0)},[f,u,H]);T.useEffect(()=>{h&&C.current(I.current,N.current)},[h]),T.useEffect(()=>{!S&&!h&&ye()},[S,h,ye]);function le(){var R,oe,M,W;let j=(R=I.current)==null?void 0:R.getModel();a||((oe=j==null?void 0:j.original)==null||oe.dispose()),l||((M=j==null?void 0:j.modified)==null||M.dispose()),(W=I.current)==null||W.dispose()}return Tr.createElement(_w,{width:y,height:m,isEditorReady:h,loading:d,_ref:k,className:v,wrapperProps:_})}var IN=SN;T.memo(IN);function EN(t){let e=T.useRef();return T.useEffect(()=>{e.current=t},[t]),e.current}var NN=EN,za=new Map;function kN({defaultValue:t,defaultLanguage:e,defaultPath:n,value:r,language:s,path:i,theme:o="light",line:a,loading:l="Loading...",options:u={},overrideServices:d={},saveViewState:f=!0,keepCurrentModel:m=!1,width:y="100%",height:v="100%",className:_,wrapperProps:b={},beforeMount:p=Ao,onMount:h=Ao,onChange:g,onValidate:S=Ao}){let[x,I]=T.useState(!1),[N,k]=T.useState(!0),C=T.useRef(null),A=T.useRef(null),L=T.useRef(null),H=T.useRef(h),ye=T.useRef(p),le=T.useRef(),j=T.useRef(r),R=NN(i),oe=T.useRef(!1),M=T.useRef(!1);xw(()=>{let O=ww.init();return O.then(D=>(C.current=D)&&k(!1)).catch(D=>(D==null?void 0:D.type)!=="cancelation"&&console.error("Monaco initialization: error:",D)),()=>A.current?K():O.cancel()}),zt(()=>{var D,fe,be,xe;let O=ri(C.current,t||r||"",e||s||"",i||n||"");O!==((D=A.current)==null?void 0:D.getModel())&&(f&&za.set(R,(fe=A.current)==null?void 0:fe.saveViewState()),(be=A.current)==null||be.setModel(O),f&&((xe=A.current)==null||xe.restoreViewState(za.get(i))))},[i],x),zt(()=>{var O;(O=A.current)==null||O.updateOptions(u)},[u],x),zt(()=>{!A.current||r===void 0||(A.current.getOption(C.current.editor.EditorOption.readOnly)?A.current.setValue(r):r!==A.current.getValue()&&(M.current=!0,A.current.executeEdits("",[{range:A.current.getModel().getFullModelRange(),text:r,forceMoveMarkers:!0}]),A.current.pushUndoStop(),M.current=!1))},[r],x),zt(()=>{var D,fe;let O=(D=A.current)==null?void 0:D.getModel();O&&s&&((fe=C.current)==null||fe.editor.setModelLanguage(O,s))},[s],x),zt(()=>{var O;a!==void 0&&((O=A.current)==null||O.revealLine(a))},[a],x),zt(()=>{var O;(O=C.current)==null||O.editor.setTheme(o)},[o],x);let W=T.useCallback(()=>{var O;if(!(!L.current||!C.current)&&!oe.current){ye.current(C.current);let D=i||n,fe=ri(C.current,r||t||"",e||s||"",D||"");A.current=(O=C.current)==null?void 0:O.editor.create(L.current,{model:fe,automaticLayout:!0,...u},d),f&&A.current.restoreViewState(za.get(D)),C.current.editor.setTheme(o),a!==void 0&&A.current.revealLine(a),I(!0),oe.current=!0}},[t,e,n,r,s,i,u,d,f,o,a]);T.useEffect(()=>{x&&H.current(A.current,C.current)},[x]),T.useEffect(()=>{!N&&!x&&W()},[N,x,W]),j.current=r,T.useEffect(()=>{var O,D;x&&g&&((O=le.current)==null||O.dispose(),le.current=(D=A.current)==null?void 0:D.onDidChangeModelContent(fe=>{M.current||g(A.current.getValue(),fe)}))},[x,g]),T.useEffect(()=>{if(x){let O=C.current.editor.onDidChangeMarkers(D=>{var be;let fe=(be=A.current.getModel())==null?void 0:be.uri;if(fe&&D.find(xe=>xe.path===fe.path)){let xe=C.current.editor.getModelMarkers({resource:fe});S==null||S(xe)}});return()=>{O==null||O.dispose()}}return()=>{}},[x,S]);function K(){var O,D;(O=le.current)==null||O.dispose(),m?f&&za.set(i,A.current.saveViewState()):(D=A.current.getModel())==null||D.dispose(),A.current.dispose()}return Tr.createElement(_w,{width:y,height:v,isEditorReady:x,loading:l,_ref:L,className:_,wrapperProps:b})}var AN=kN,TN=T.memo(AN),op=TN;const ON=()=>{const{tabs:t,activeTabId:e,splitMode:n,activeSplitTabId:r,fontSize:s,fontFamily:i,wordWrap:o,tabSize:a,insertSpaces:l,minimap:u,lineNumbers:d,renderWhitespace:f,updateTabContent:m,markTabClean:y,updateTabPosition:v,updateTabScroll:_,toggleJsonView:b}=Te(),{saveFile:p}=cr(),h=T.useRef(null),g=t.find(k=>k.id===e),S=T.useCallback(fE(async(k,C,A)=>{try{await p(A,C),y(k)}catch(L){console.error("Auto-save failed:",L)}},1e3),[]),x=k=>{!g||k===void 0||(m(g.id,k),Te.getState().autoSave&&S(g.id,k,g.path))},I=(k,C)=>{h.current=k,C.editor.defineTheme("opentext-dark",{base:"vs-dark",inherit:!0,rules:[],colors:{"editor.background":"#1e1e1e","editor.lineHighlightBackground":"#2d2d30","editorLineNumber.foreground":"#858585","editorLineNumber.activeForeground":"#cccccc"}}),C.editor.defineTheme("opentext-light",{base:"vs",inherit:!0,rules:[],colors:{"editor.background":"#ffffff","editor.lineHighlightBackground":"#f0f0f0","editorLineNumber.foreground":"#237893","editorLineNumber.activeForeground":"#0b216f"}});const A=Te.getState().theme;C.editor.setTheme(A==="light"?"opentext-light":"opentext-dark"),k.onDidChangeCursorPosition(()=>{const L=k.getPosition();L&&g&&v(g.id,{line:L.lineNumber,column:L.column})}),k.onDidScrollChange(()=>{const L=k.getScrollTop(),H=k.getScrollLeft();g&&_(g.id,{top:L,left:H})}),k.addCommand(C.KeyMod.CtrlCmd|C.KeyMod.Shift|C.KeyCode.KeyJ,()=>{g&&g.language==="json"&&b(g.id)})};if(T.useEffect(()=>{h.current&&(g!=null&&g.cursorPosition)&&(h.current.setPosition({lineNumber:g.cursorPosition.line,column:g.cursorPosition.column}),h.current.revealPositionInCenterIfOutsideViewport({lineNumber:g.cursorPosition.line,column:g.cursorPosition.column}))},[e]),T.useEffect(()=>{},[]),!g)return c.jsx("div",{className:"flex items-center justify-center h-full bg-primary text-text-secondary",children:c.jsx("p",{children:"No file open"})});const N={fontSize:s,fontFamily:i,wordWrap:o,tabSize:a,insertSpaces:l,minimap:{enabled:u},lineNumbers:d?"on":"off",renderWhitespace:f,automaticLayout:!0,scrollBeyondLastLine:!1,smoothScrolling:!0,cursorBlinking:"smooth",cursorSmoothCaretAnimation:"on",bracketPairColorization:{enabled:!0},guides:{bracketPairs:!0,indentation:!0},folding:!0,foldingHighlight:!0,foldingImportsByDefault:!1,showFoldingControls:"always",unfoldOnClickAfterEndOfLine:!0,dragAndDrop:!0,links:!0,quickSuggestions:!0,suggestOnTriggerCharacters:!0,acceptSuggestionOnEnter:"on",snippetSuggestions:"inline",formatOnPaste:!0,formatOnType:!0,autoIndent:"full",detectIndentation:!0,trimAutoWhitespace:!0};return c.jsxs("div",{className:"h-full w-full flex",children:[c.jsx("div",{className:`flex-1 ${n!=="none"?"border-r border-border-color":""}`,children:c.jsx(op,{height:"100%",language:g.language,value:g.content,theme:Te.getState().theme==="light"?"opentext-light":"opentext-dark",options:N,onChange:x,onMount:I,loading:c.jsx("div",{className:"flex items-center justify-center h-full bg-primary text-text-secondary",children:c.jsx("span",{className:"animate-pulse",children:"Loading editor..."})})})}),n!=="none"&&r&&c.jsx("div",{className:"flex-1",children:c.jsx(CN,{tabId:r,options:N})})]})},CN=({tabId:t,options:e})=>{const{tabs:n,updateTabContent:r}=Te(),s=n.find(a=>a.id===t),i=T.useRef(null);if(!s)return null;const o=a=>{a!==void 0&&r(t,a)};return c.jsx(op,{height:"100%",language:s.language,value:s.content,theme:Te.getState().theme==="light"?"opentext-light":"opentext-dark",options:e,onChange:o,onMount:a=>{i.current=a}})},RN=()=>{const{activeTabId:t,tabs:e,toggleZenMode:n,isZenMode:r,theme:s,setTheme:i,lineNumbers:o,setLineNumbers:a,wordWrap:l,setWordWrap:u,queryPanelOpen:d,toggleQueryPanel:f}=Te(),{isPanelOpen:m,togglePanel:y}=sr(),{currentFolder:v}=cr(),[_,b]=T.useState({line:1,column:1}),[p,h]=T.useState(null),g=e.find(N=>N.id===t);T.useEffect(()=>{const k=setInterval(()=>{var A,L,H;const C=((H=(L=(A=window.monaco)==null?void 0:A.editor)==null?void 0:L.getEditors)==null?void 0:H.call(L))||[];C.length>0&&C[0]!==p&&(h(C[0]),C[0].onDidChangeCursorPosition(ye=>{b({line:ye.position.lineNumber,column:ye.position.column})}))},500);return()=>clearInterval(k)},[p,t]);const S=g?hE(g.content):0,x=g?pE(g.content):0,I=async()=>{if(g&&g.language==="json")try{const N=mE(g.content),{updateTabContent:k}=Te.getState();k(g.id,N);const{saveFile:C}=cr.getState();await C(g.path,N)}catch(N){console.error("Error formatting JSON:",N)}};return c.jsxs("div",{className:"h-[22px] bg-accent text-white flex items-center justify-between text-xs px-2 select-none",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[v&&c.jsxs("div",{className:"flex items-center gap-1.5",children:[c.jsx(uw,{size:12}),c.jsx("span",{className:"truncate max-w-[150px]",children:v.split("/").pop()})]}),(g==null?void 0:g.isDirty)&&c.jsxs("div",{className:"flex items-center gap-1.5 text-yellow-300",children:[c.jsx(ow,{size:12}),c.jsx("span",{children:"Unsaved"})]}),(g==null?void 0:g.language)==="json"&&c.jsxs("button",{onClick:I,className:"flex items-center gap-1.5 hover:bg-white hover:bg-opacity-20 px-2 py-0.5 rounded transition-colors",children:[c.jsx(dE,{size:12}),c.jsx("span",{children:"Format JSON"})]})]}),c.jsxs("div",{className:"flex items-center gap-1",children:[g&&c.jsxs("div",{className:"px-2 py-0.5 hover:bg-white hover:bg-opacity-20 rounded cursor-pointer",children:["Ln ",_.line,", Col ",_.column]}),g&&c.jsx("div",{className:"px-2 py-0.5 hover:bg-white hover:bg-opacity-20 rounded cursor-pointer",children:"UTF-8"}),g&&c.jsx("div",{className:"px-2 py-0.5 hover:bg-white hover:bg-opacity-20 rounded cursor-pointer uppercase",children:g.language}),g&&c.jsxs("div",{className:"px-2 py-0.5 hover:bg-white hover:bg-opacity-20 rounded cursor-pointer",title:`${S} words, ${x} lines`,children:[S," words"]}),g&&c.jsx("div",{className:"px-2 py-0.5 hover:bg-white hover:bg-opacity-20 rounded cursor-pointer",children:"LF"}),c.jsx("button",{onClick:()=>u(l==="on"?"off":"on"),className:`px-2 py-0.5 rounded transition-colors ${l==="on"?"bg-white bg-opacity-20":"hover:bg-white hover:bg-opacity-20"}`,title:"Toggle Word Wrap",children:l==="on"?"Wrap":"No Wrap"}),c.jsx("button",{onClick:()=>a(!o),className:`px-2 py-0.5 rounded transition-colors ${o?"bg-white bg-opacity-20":"hover:bg-white hover:bg-opacity-20"}`,title:"Toggle Line Numbers",children:o?"Lines":"No Lines"}),c.jsx("button",{onClick:()=>i(s==="dark"?"light":"dark"),className:"px-2 py-0.5 hover:bg-white hover:bg-opacity-20 rounded transition-colors",title:"Toggle Theme",children:s==="dark"?"Dark":"Light"}),c.jsxs("button",{onClick:f,className:`px-2 py-0.5 rounded transition-colors flex items-center gap-1 ${d?"bg-white bg-opacity-20":"hover:bg-white hover:bg-opacity-20"}`,title:"Toggle Query Panel (Q)",children:[c.jsx(Nf,{size:12}),"Query"]}),c.jsxs("button",{onClick:y,className:`px-2 py-0.5 rounded transition-colors flex items-center gap-1 ${m?"bg-white bg-opacity-20":"hover:bg-white hover:bg-opacity-20"}`,title:"Toggle AI Agents (A)",children:[c.jsx(Ei,{size:12}),"AI"]}),c.jsx("button",{onClick:n,className:"px-2 py-0.5 hover:bg-white hover:bg-opacity-20 rounded transition-colors",title:"Toggle Zen Mode",children:r?c.jsx(eE,{size:12}):c.jsx(dw,{size:12})}),c.jsx("button",{className:"px-2 py-0.5 hover:bg-white hover:bg-opacity-20 rounded transition-colors",children:c.jsx(PI,{size:12})})]})]})},jN=()=>{const{isCommandPaletteOpen:t,closeCommandPalette:e,tabs:n,activeTabId:r,setActiveTab:s,setTheme:i,theme:o,toggleZenMode:a,toggleSettings:l,toggleQueryPanel:u,setQueryLanguage:d,queryPanelOpen:f,addTab:m}=Te(),{openFile:y,openFolder:v,getFileLanguage:_}=cr(),{togglePanel:b,isPanelOpen:p,createSession:h,setActiveAgent:g,agents:S}=sr(),[x,I]=T.useState(""),[N,k]=T.useState(0),C=T.useRef(null),A=T.useMemo(()=>[{id:"open-file",label:"Open File...",icon:c.jsx(Iy,{size:18}),shortcut:"O",category:"File",action:async()=>{e();const j=await y();j&&m({path:j.path,name:j.name,content:j.content,isDirty:!1,language:_(j.path)})}},{id:"open-folder",label:"Open Folder...",icon:c.jsx(HI,{size:18}),shortcut:"O",category:"File",action:()=>{e(),v()}},{id:"new-file",label:"New File",icon:c.jsx(VI,{size:18}),shortcut:"N",category:"File",action:()=>{e(),m({path:`untitled-${Date.now()}`,name:"Untitled",content:"",isDirty:!1,language:"plaintext"})}},{id:"save",label:"Save",icon:c.jsx(pw,{size:18}),shortcut:"S",category:"File",action:async()=>{e();const j=n.find(R=>R.id===r);if(j){const{writeTextFile:R}=await Si(async()=>{const{writeTextFile:oe}=await Promise.resolve().then(()=>tp);return{writeTextFile:oe}},void 0);await R(j.path,j.content)}}},{id:"toggle-sidebar",label:"Toggle Sidebar",icon:c.jsx(fw,{size:18}),shortcut:"B",category:"View",action:()=>{Te.getState().toggleSidebar(),e()}},{id:"zen-mode",label:"Toggle Zen Mode",icon:c.jsx(dw,{size:18}),shortcut:"K Z",category:"View",action:()=>{a(),e()}},{id:"toggle-query-panel",label:f?"Close Query Panel":"Open Query Panel",icon:c.jsx(Nf,{size:18}),shortcut:"Q",category:"Query",action:()=>{u(),e()}},{id:"query-sql",label:"Query with SQL",icon:c.jsx(Nf,{size:18}),category:"Query",action:()=>{d("sql"),f||u(),e()}},{id:"query-python",label:"Query with Python",icon:c.jsx(aw,{size:18}),category:"Query",action:()=>{d("python"),f||u(),e()}},{id:"settings",label:"Settings",icon:c.jsx(sp,{size:18}),shortcut:",",category:"Preferences",action:()=>{l(),e()}},{id:"toggle-theme",label:`Switch to ${o==="dark"?"Light":"Dark"} Theme`,icon:o==="dark"?c.jsx(lE,{size:18}):c.jsx(tE,{size:18}),category:"Preferences",action:()=>{i(o==="dark"?"light":"dark"),e()}},...n.map((j,R)=>({id:`tab-${j.id}`,label:`Open: ${j.name}${j.isDirty?" (modified)":""}`,icon:c.jsx(Iy,{size:18}),shortcut:R<9?`${R+1}`:void 0,category:"Open Editors",action:()=>{s(j.id),e()}})),{id:"toggle-ai-agents",label:p?"Close AI Agents Panel":"Open AI Agents Panel",icon:c.jsx(Ei,{size:18}),shortcut:"A",category:"AI Agents",action:()=>{b(),e()}},...S.map(j=>({id:`agent-${j.id}`,label:`Chat with ${j.name}`,icon:c.jsx(ip,{size:18}),category:"AI Agents",action:()=>{g(j.id),p||b(),h(j.id),e()}}))],[n,r,o,f,p,S,e,y,v,m,_,s,i,a,l,u,d,b,g,h]),L=T.useMemo(()=>{if(!x)return A;const le=x.toLowerCase();return A.filter(j=>j.label.toLowerCase().includes(le)||j.category.toLowerCase().includes(le))},[A,x]),H=T.useMemo(()=>{const le={};return L.forEach(j=>{le[j.category]||(le[j.category]=[]),le[j.category].push(j)}),le},[L]);if(T.useEffect(()=>{t&&(I(""),k(0),setTimeout(()=>{var le;return(le=C.current)==null?void 0:le.focus()},100))},[t]),T.useEffect(()=>{const le=j=>{if(t)switch(j.key){case"Escape":e();break;case"ArrowDown":j.preventDefault(),k(R=>R<L.length-1?R+1:R);break;case"ArrowUp":j.preventDefault(),k(R=>R>0?R-1:0);break;case"Enter":j.preventDefault(),L[N]&&L[N].action();break}};return window.addEventListener("keydown",le),()=>window.removeEventListener("keydown",le)},[t,L,N,e]),!t)return null;let ye=0;return c.jsx("div",{className:"fixed inset-0 z-50 flex items-start justify-center pt-[100px] bg-black bg-opacity-50",children:c.jsxs("div",{className:"w-[600px] bg-secondary rounded-lg shadow-2xl overflow-hidden animate-in fade-in zoom-in-95 duration-200",children:[c.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 border-b border-border-color",children:[c.jsx(hu,{size:20,className:"text-text-secondary"}),c.jsx("input",{ref:C,type:"text",placeholder:"Type a command or search...",value:x,onChange:le=>{I(le.target.value),k(0)},className:"flex-1 bg-transparent text-text-primary text-lg outline-none placeholder-text-secondary"}),c.jsx("kbd",{className:"px-2 py-1 bg-tertiary rounded text-xs text-text-secondary",children:"ESC"})]}),c.jsx("div",{className:"max-h-[400px] overflow-y-auto py-2",children:L.length===0?c.jsx("div",{className:"px-4 py-8 text-center text-text-secondary",children:"No commands found"}):Object.entries(H).map(([le,j])=>c.jsxs("div",{children:[c.jsx("div",{className:"px-4 py-1.5 text-xs font-semibold text-text-secondary uppercase tracking-wider",children:le}),j.map(R=>{const oe=ye++,M=oe===N;return c.jsxs("button",{onClick:()=>R.action(),onMouseEnter:()=>k(oe),className:`w-full flex items-center gap-3 px-4 py-2.5 text-left transition-colors ${M?"bg-accent text-white":"text-text-primary hover:bg-hover"}`,children:[c.jsx("span",{className:M?"text-white":"text-text-secondary",children:R.icon}),c.jsx("span",{className:"flex-1",children:R.label}),R.shortcut&&c.jsx("kbd",{className:`px-2 py-0.5 rounded text-xs ${M?"bg-white bg-opacity-20":"bg-tertiary"}`,children:R.shortcut})]},R.id)})]},le))}),c.jsxs("div",{className:"px-4 py-2 bg-tertiary border-t border-border-color flex items-center justify-between text-xs text-text-secondary",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx("kbd",{className:"px-1.5 py-0.5 bg-secondary rounded",children:""}),c.jsx("span",{children:"Navigate"})]}),c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx("kbd",{className:"px-1.5 py-0.5 bg-secondary rounded",children:""}),c.jsx("span",{children:"Select"})]})]}),c.jsxs("span",{children:[L.length," commands"]})]})]})})},FN=({onClose:t})=>{var s;const[e,n]=T.useState("editor"),r=[{id:"editor",label:"Text Editor",icon:WI},{id:"appearance",label:"Appearance",icon:rE},{id:"files",label:"Files",icon:fw},{id:"keyboard",label:"Keyboard",icon:XI},{id:"about",label:"About",icon:YI}];return c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:c.jsxs("div",{className:"w-[800px] h-[600px] bg-secondary rounded-lg shadow-xl flex overflow-hidden",children:[c.jsxs("div",{className:"w-48 bg-tertiary border-r border-border-color flex flex-col",children:[c.jsx("div",{className:"p-4 border-b border-border-color",children:c.jsx("h2",{className:"text-lg font-semibold text-text-primary",children:"Settings"})}),c.jsx("nav",{className:"flex-1 py-2",children:r.map(i=>c.jsxs("button",{onClick:()=>n(i.id),className:`w-full flex items-center gap-3 px-4 py-2.5 text-sm transition-colors ${e===i.id?"bg-accent text-white":"text-text-secondary hover:text-text-primary hover:bg-hover"}`,children:[c.jsx(i.icon,{size:18}),i.label]},i.id))})]}),c.jsxs("div",{className:"flex-1 flex flex-col",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-border-color",children:[c.jsx("h3",{className:"text-xl font-medium text-text-primary",children:(s=r.find(i=>i.id===e))==null?void 0:s.label}),c.jsx("button",{onClick:t,className:"p-1 hover:bg-hover rounded text-text-secondary hover:text-text-primary",children:c.jsx(fa,{size:20})})]}),c.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[e==="editor"&&c.jsx(PN,{}),e==="appearance"&&c.jsx(LN,{}),e==="files"&&c.jsx(MN,{}),e==="keyboard"&&c.jsx(DN,{}),e==="about"&&c.jsx(BN,{})]})]})]})})},PN=()=>{const{fontSize:t,setFontSize:e,fontFamily:n,setFontFamily:r,tabSize:s,setTabSize:i,insertSpaces:o,setInsertSpaces:a,wordWrap:l,setWordWrap:u,minimap:d,setMinimap:f,lineNumbers:m,setLineNumbers:y}=Te();return c.jsxs("div",{className:"space-y-6",children:[c.jsxs(Un,{title:"Font",children:[c.jsx(Kn,{label:"Font Size",children:c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("input",{type:"range",min:"8",max:"32",value:t,onChange:v=>e(Number(v.target.value)),className:"w-32"}),c.jsxs("span",{className:"text-text-secondary w-8",children:[t,"px"]})]})}),c.jsx(Kn,{label:"Font Family",children:c.jsxs("select",{value:n,onChange:v=>r(v.target.value),className:"bg-primary border border-border-color rounded px-3 py-1.5 text-sm",children:[c.jsx("option",{value:"Menlo, Monaco, 'Courier New', monospace",children:"Menlo (Default)"}),c.jsx("option",{value:"'Fira Code', monospace",children:"Fira Code"}),c.jsx("option",{value:"'JetBrains Mono', monospace",children:"JetBrains Mono"}),c.jsx("option",{value:"'Source Code Pro', monospace",children:"Source Code Pro"}),c.jsx("option",{value:"Consolas, monospace",children:"Consolas"})]})})]}),c.jsxs(Un,{title:"Editing",children:[c.jsx(Kn,{label:"Tab Size",children:c.jsx("div",{className:"flex items-center gap-2",children:[2,4,8].map(v=>c.jsx("button",{onClick:()=>i(v),className:`px-3 py-1.5 rounded text-sm ${s===v?"bg-accent text-white":"bg-tertiary text-text-primary hover:bg-hover"}`,children:v},v))})}),c.jsx(Kn,{label:"Insert Spaces",children:c.jsx(vl,{checked:o,onChange:a})}),c.jsx(Kn,{label:"Word Wrap",children:c.jsxs("select",{value:l,onChange:v=>u(v.target.value),className:"bg-primary border border-border-color rounded px-3 py-1.5 text-sm",children:[c.jsx("option",{value:"on",children:"On"}),c.jsx("option",{value:"off",children:"Off"}),c.jsx("option",{value:"wordWrapColumn",children:"Column"})]})})]}),c.jsxs(Un,{title:"Display",children:[c.jsx(Kn,{label:"Minimap",children:c.jsx(vl,{checked:d,onChange:f})}),c.jsx(Kn,{label:"Line Numbers",children:c.jsx(vl,{checked:m,onChange:y})})]})]})},LN=()=>{const{theme:t,setTheme:e}=Te();return c.jsx("div",{className:"space-y-6",children:c.jsx(Un,{title:"Color Theme",children:c.jsx("div",{className:"grid grid-cols-3 gap-4",children:[{id:"dark",label:"Dark",color:"#1e1e1e"},{id:"light",label:"Light",color:"#ffffff"},{id:"system",label:"System",color:"linear-gradient(135deg, #1e1e1e 50%, #ffffff 50%)"}].map(n=>c.jsxs("button",{onClick:()=>e(n.id),className:`p-4 rounded-lg border-2 transition-all ${t===n.id?"border-accent bg-accent bg-opacity-10":"border-border-color hover:border-text-secondary"}`,children:[c.jsx("div",{className:"w-full h-16 rounded mb-2 border border-border-color",style:{background:n.color}}),c.jsx("span",{className:"text-sm text-text-primary",children:n.label})]},n.id))})})})},MN=()=>{const{autoSave:t,setAutoSave:e,recentFiles:n,clearRecentFiles:r}=Te();return c.jsxs("div",{className:"space-y-6",children:[c.jsxs(Un,{title:"Auto Save",children:[c.jsx(Kn,{label:"Auto Save",children:c.jsx(vl,{checked:t,onChange:e})}),c.jsx("p",{className:"text-sm text-text-secondary",children:"Automatically save files after 1 second of inactivity."})]}),c.jsxs(Un,{title:"Recent Files",children:[c.jsx(Kn,{label:"Recent Files History",children:c.jsxs("span",{className:"text-text-secondary",children:[n.length," files"]})}),c.jsx("button",{onClick:r,className:"px-4 py-2 bg-tertiary hover:bg-hover text-text-primary text-sm rounded transition-colors",children:"Clear Recent Files"})]})]})},DN=()=>{const t=[{key:"Open File",binding:"O / Ctrl+O"},{key:"Open Folder",binding:"O / Ctrl+Shift+O"},{key:"Save",binding:"S / Ctrl+S"},{key:"Save As",binding:"S / Ctrl+Shift+S"},{key:"Close Tab",binding:"W / Ctrl+W"},{key:"Toggle Sidebar",binding:"B / Ctrl+B"},{key:"AI Agents Panel",binding:"A / Ctrl+Shift+A"},{key:"Query Panel",binding:"Q / Ctrl+Shift+Q"},{key:"Command Palette",binding:"P / Ctrl+Shift+P"},{key:"Find",binding:"F / Ctrl+F"},{key:"Find and Replace",binding:"H / Ctrl+H"},{key:"Find in Files",binding:"F / Ctrl+Shift+F"},{key:"Settings",binding:", / Ctrl+,"},{key:"Zen Mode",binding:"K Z / Ctrl+K Z"}];return c.jsx("div",{className:"space-y-6",children:c.jsx(Un,{title:"Keyboard Shortcuts",children:c.jsx("div",{className:"space-y-1",children:t.map(e=>c.jsxs("div",{className:"flex items-center justify-between py-2 px-3 hover:bg-hover rounded",children:[c.jsx("span",{className:"text-text-primary",children:e.key}),c.jsx("kbd",{className:"px-2 py-1 bg-tertiary rounded text-sm text-text-secondary font-mono",children:e.binding})]},e.key))})})})},BN=()=>{const{setPanelOpen:t,setShowSettings:e}=sr();return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"text-center py-8",children:[c.jsx("h2",{className:"text-4xl font-light text-accent mb-2",children:"OpenText"}),c.jsx("p",{className:"text-text-secondary mb-4",children:"Version 1.0.0"}),c.jsx("p",{className:"text-sm text-text-secondary max-w-md mx-auto",children:"A modern, cross-platform text editor built with Tauri and React. Designed for speed, extensibility, and developer productivity."})]}),c.jsx(Un,{title:"AI Integration",children:c.jsxs("div",{className:"flex items-center justify-between py-2 px-3 bg-primary rounded-lg",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx(Ei,{size:20,className:"text-accent"}),c.jsxs("div",{children:[c.jsx("div",{className:"text-text-primary font-medium",children:"AI Agents"}),c.jsx("div",{className:"text-xs text-text-secondary",children:"Chat with AI about your files"})]})]}),c.jsx("button",{onClick:()=>{Te.getState().toggleSettings(),t(!0),e(!0)},className:"px-3 py-1.5 bg-accent hover:bg-accent/90 text-white text-sm rounded transition-colors",children:"Configure"})]})}),c.jsx(Un,{title:"Links",children:c.jsxs("div",{className:"space-y-2",children:[c.jsxs("a",{href:"https://github.com/opentext/editor",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 py-2 px-3 hover:bg-hover rounded text-text-primary",children:[c.jsx(QI,{size:18}),"GitHub Repository"]}),c.jsxs("a",{href:"https://opentext.dev",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 py-2 px-3 hover:bg-hover rounded text-text-primary",children:[c.jsx(KI,{size:18}),"Website"]})]})}),c.jsxs(Un,{title:"Credits",children:[c.jsx("p",{className:"text-sm text-text-secondary",children:"Built with  using:"}),c.jsxs("ul",{className:"text-sm text-text-secondary list-disc list-inside mt-2 space-y-1",children:[c.jsx("li",{children:"Tauri - Native desktop framework"}),c.jsx("li",{children:"React - UI library"}),c.jsx("li",{children:"Monaco Editor - VS Code's powerful editor"}),c.jsx("li",{children:"Zustand - State management"}),c.jsx("li",{children:"Lucide - Beautiful icons"})]})]})]})},Un=({title:t,children:e})=>c.jsxs("div",{className:"space-y-4",children:[c.jsx("h4",{className:"text-sm font-semibold text-text-secondary uppercase tracking-wider border-b border-border-color pb-2",children:t}),e]}),Kn=({label:t,children:e})=>c.jsxs("div",{className:"flex items-center justify-between py-2",children:[c.jsx("span",{className:"text-text-primary",children:t}),e]}),vl=({checked:t,onChange:e})=>c.jsx("button",{onClick:()=>e(!t),className:`relative w-11 h-6 rounded-full transition-colors ${t?"bg-accent":"bg-tertiary"}`,children:c.jsx("span",{className:`absolute top-1 left-1 w-4 h-4 bg-white rounded-full transition-transform ${t?"translate-x-5":"translate-x-0"}`})});function ae(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(d){try{u(r.next(d))}catch(f){o(f)}}function l(d){try{u(r.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):s(d.value).then(a,l)}u((r=r.apply(t,e||[])).next())})}function jy(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ue(t){return this instanceof ue?(this.v=t,this):new ue(t)}function Pn(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),s,i=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),s[Symbol.asyncIterator]=function(){return this},s;function o(y){return function(v){return Promise.resolve(v).then(y,f)}}function a(y,v){r[y]&&(s[y]=function(_){return new Promise(function(b,p){i.push([y,_,b,p])>1||l(y,_)})},v&&(s[y]=v(s[y])))}function l(y,v){try{u(r[y](v))}catch(_){m(i[0][3],_)}}function u(y){y.value instanceof ue?Promise.resolve(y.value.v).then(d,f):m(i[0][2],y)}function d(y){l("next",y)}function f(y){l("throw",y)}function m(y,v){y(v),i.shift(),i.length&&l(i[0][0],i[0][1])}}function wl(t){var e,n;return e={},r("next"),r("throw",function(s){throw s}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(s,i){e[s]=t[s]?function(o){return(n=!n)?{value:ue(t[s](o)),done:!1}:i?i(o):o}:i}}function ds(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof jy=="function"?jy(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(o){return new Promise(function(a,l){o=t[i](o),s(a,l,o.done,o.value)})}}function s(i,o,a,l){Promise.resolve(l).then(function(u){i({value:u,done:a})},o)}}const UN=new TextDecoder("utf-8"),Cf=t=>UN.decode(t),$N=new TextEncoder,ap=t=>$N.encode(t),zN=t=>typeof t=="number",Sw=t=>typeof t=="boolean",Ge=t=>typeof t=="function",Pt=t=>t!=null&&Object(t)===t,gs=t=>Pt(t)&&Ge(t.then),pa=t=>Pt(t)&&Ge(t[Symbol.iterator]),Fi=t=>Pt(t)&&Ge(t[Symbol.asyncIterator]),Rf=t=>Pt(t)&&Pt(t.schema),Iw=t=>Pt(t)&&"done"in t&&"value"in t,Ew=t=>Pt(t)&&Ge(t.stat)&&zN(t.fd),Nw=t=>Pt(t)&&lp(t.body),mu=t=>"_getDOMStream"in t&&"_getNodeStream"in t,VN=t=>Pt(t)&&Ge(t.abort)&&Ge(t.getWriter)&&!mu(t),lp=t=>Pt(t)&&Ge(t.cancel)&&Ge(t.getReader)&&!mu(t),WN=t=>Pt(t)&&Ge(t.end)&&Ge(t.write)&&Sw(t.writable)&&!mu(t),kw=t=>Pt(t)&&Ge(t.read)&&Ge(t.pipe)&&Sw(t.readable)&&!mu(t),qN=t=>Pt(t)&&Ge(t.clear)&&Ge(t.bytes)&&Ge(t.position)&&Ge(t.setPosition)&&Ge(t.capacity)&&Ge(t.getBufferIdentifier)&&Ge(t.createLong),cp=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:ArrayBuffer;function HN(t){const e=t[0]?[t[0]]:[];let n,r,s,i;for(let o,a,l=0,u=0,d=t.length;++l<d;){if(o=e[u],a=t[l],!o||!a||o.buffer!==a.buffer||a.byteOffset<o.byteOffset){a&&(e[++u]=a);continue}if({byteOffset:n,byteLength:s}=o,{byteOffset:r,byteLength:i}=a,n+s<r||r+i<n){a&&(e[++u]=a);continue}e[u]=new Uint8Array(o.buffer,n,r-n+i)}return e}function Fy(t,e,n=0,r=e.byteLength){const s=t.byteLength,i=new Uint8Array(t.buffer,t.byteOffset,s),o=new Uint8Array(e.buffer,e.byteOffset,Math.min(r,s));return i.set(o,n),t}function $n(t,e){const n=HN(t),r=n.reduce((d,f)=>d+f.byteLength,0);let s,i,o,a=0,l=-1;const u=Math.min(e||Number.POSITIVE_INFINITY,r);for(const d=n.length;++l<d;){if(s=n[l],i=s.subarray(0,Math.min(s.length,u-a)),u<=a+i.length){i.length<s.length?n[l]=s.subarray(i.length):i.length===s.length&&l++,o?Fy(o,i,a):o=i;break}Fy(o||(o=new Uint8Array(u)),i,a),a+=i.length}return[o||new Uint8Array(0),n.slice(l),r-(o?o.byteLength:0)]}function Ae(t,e){let n=Iw(e)?e.value:e;return n instanceof t?t===Uint8Array?new t(n.buffer,n.byteOffset,n.byteLength):n:n?(typeof n=="string"&&(n=ap(n)),n instanceof ArrayBuffer?new t(n):n instanceof cp?new t(n):qN(n)?Ae(t,n.bytes()):ArrayBuffer.isView(n)?n.byteLength<=0?new t(0):new t(n.buffer,n.byteOffset,n.byteLength/t.BYTES_PER_ELEMENT):t.from(n)):new t(0)}const Qi=t=>Ae(Int32Array,t),Py=t=>Ae(BigInt64Array,t),ge=t=>Ae(Uint8Array,t),jf=t=>(t.next(),t);function*QN(t,e){const n=function*(s){yield s},r=typeof e=="string"||ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof cp?n(e):pa(e)?e:n(e);return yield*jf(function*(s){let i=null;do i=s.next(yield Ae(t,i));while(!i.done)}(r[Symbol.iterator]())),new t}const KN=t=>QN(Uint8Array,t);function Aw(t,e){return Pn(this,arguments,function*(){if(gs(e))return yield ue(yield ue(yield*wl(ds(Aw(t,yield ue(e))))));const r=function(o){return Pn(this,arguments,function*(){yield yield ue(yield ue(o))})},s=function(o){return Pn(this,arguments,function*(){yield ue(yield*wl(ds(jf(function*(a){let l=null;do l=a.next(yield l==null?void 0:l.value);while(!l.done)}(o[Symbol.iterator]())))))})},i=typeof e=="string"||ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof cp?r(e):pa(e)?s(e):Fi(e)?e:r(e);return yield ue(yield*wl(ds(jf(function(o){return Pn(this,arguments,function*(){let a=null;do a=yield ue(o.next(yield yield ue(Ae(t,a))));while(!a.done)})}(i[Symbol.asyncIterator]()))))),yield ue(new t)})}const JN=t=>Aw(Uint8Array,t);function Tw(t,e,n){if(t!==0){n=n.slice(0,e);for(let r=-1,s=n.length;++r<s;)n[r]+=t}return n.subarray(0,e)}function YN(t,e){let n=0;const r=t.length;if(r!==e.length)return!1;if(r>0)do if(t[n]!==e[n])return!1;while(++n<r);return!0}const Xt={fromIterable(t){return Va(GN(t))},fromAsyncIterable(t){return Va(XN(t))},fromDOMStream(t){return Va(ZN(t))},fromNodeStream(t){return Va(tk(t))},toDOMStream(t,e){throw new Error('"toDOMStream" not available in this environment')},toNodeStream(t,e){throw new Error('"toNodeStream" not available in this environment')}},Va=t=>(t.next(),t);function*GN(t){let e,n=!1,r=[],s,i,o,a=0;function l(){return i==="peek"?$n(r,o)[0]:([s,r,a]=$n(r,o),s)}({cmd:i,size:o}=(yield null)||{cmd:"read",size:0});const u=KN(t)[Symbol.iterator]();try{do if({done:e,value:s}=Number.isNaN(o-a)?u.next():u.next(o-a),!e&&s.byteLength>0&&(r.push(s),a+=s.byteLength),e||o<=a)do({cmd:i,size:o}=yield l());while(o<a);while(!e)}catch(d){(n=!0)&&typeof u.throw=="function"&&u.throw(d)}finally{n===!1&&typeof u.return=="function"&&u.return(null)}return null}function XN(t){return Pn(this,arguments,function*(){let n,r=!1,s=[],i,o,a,l=0;function u(){return o==="peek"?$n(s,a)[0]:([i,s,l]=$n(s,a),i)}({cmd:o,size:a}=(yield yield ue(null))||{cmd:"read",size:0});const d=JN(t)[Symbol.asyncIterator]();try{do if({done:n,value:i}=Number.isNaN(a-l)?yield ue(d.next()):yield ue(d.next(a-l)),!n&&i.byteLength>0&&(s.push(i),l+=i.byteLength),n||a<=l)do({cmd:o,size:a}=yield yield ue(u()));while(a<l);while(!n)}catch(f){(r=!0)&&typeof d.throw=="function"&&(yield ue(d.throw(f)))}finally{r===!1&&typeof d.return=="function"&&(yield ue(d.return(new Uint8Array(0))))}return yield ue(null)})}function ZN(t){return Pn(this,arguments,function*(){let n=!1,r=!1,s=[],i,o,a,l=0;function u(){return o==="peek"?$n(s,a)[0]:([i,s,l]=$n(s,a),i)}({cmd:o,size:a}=(yield yield ue(null))||{cmd:"read",size:0});const d=new ek(t);try{do if({done:n,value:i}=Number.isNaN(a-l)?yield ue(d.read()):yield ue(d.read(a-l)),!n&&i.byteLength>0&&(s.push(ge(i)),l+=i.byteLength),n||a<=l)do({cmd:o,size:a}=yield yield ue(u()));while(a<l);while(!n)}catch(f){(r=!0)&&(yield ue(d.cancel(f)))}finally{r===!1?yield ue(d.cancel()):t.locked&&d.releaseLock()}return yield ue(null)})}class ek{constructor(e){this.source=e,this.reader=null,this.reader=this.source.getReader(),this.reader.closed.catch(()=>{})}get closed(){return this.reader?this.reader.closed.catch(()=>{}):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=null}cancel(e){return ae(this,void 0,void 0,function*(){const{reader:n,source:r}=this;n&&(yield n.cancel(e).catch(()=>{})),r&&r.locked&&this.releaseLock()})}read(e){return ae(this,void 0,void 0,function*(){if(e===0)return{done:this.reader==null,value:new Uint8Array(0)};const n=yield this.reader.read();return!n.done&&(n.value=ge(n)),n})}}const ld=(t,e)=>{const n=s=>r([e,s]);let r;return[e,n,new Promise(s=>(r=s)&&t.once(e,n))]};function tk(t){return Pn(this,arguments,function*(){const n=[];let r="error",s=!1,i=null,o,a,l=0,u=[],d;function f(){return o==="peek"?$n(u,a)[0]:([d,u,l]=$n(u,a),d)}if({cmd:o,size:a}=(yield yield ue(null))||{cmd:"read",size:0},t.isTTY)return yield yield ue(new Uint8Array(0)),yield ue(null);try{n[0]=ld(t,"end"),n[1]=ld(t,"error");do{if(n[2]=ld(t,"readable"),[r,i]=yield ue(Promise.race(n.map(y=>y[2]))),r==="error")break;if((s=r==="end")||(Number.isFinite(a-l)?(d=ge(t.read(a-l)),d.byteLength<a-l&&(d=ge(t.read()))):d=ge(t.read()),d.byteLength>0&&(u.push(d),l+=d.byteLength)),s||a<=l)do({cmd:o,size:a}=yield yield ue(f()));while(a<l)}while(!s)}finally{yield ue(m(n,r==="error"?i:null))}return yield ue(null);function m(y,v){return d=u=null,new Promise((_,b)=>{for(const[p,h]of y)t.off(p,h);try{const p=t.destroy;p&&p.call(t,v),v=void 0}catch(p){v=p||v}finally{v!=null?b(v):_()}})}})}var qe;(function(t){t[t.V1=0]="V1",t[t.V2=1]="V2",t[t.V3=2]="V3",t[t.V4=3]="V4",t[t.V5=4]="V5"})(qe||(qe={}));var mt;(function(t){t[t.Sparse=0]="Sparse",t[t.Dense=1]="Dense"})(mt||(mt={}));var ht;(function(t){t[t.HALF=0]="HALF",t[t.SINGLE=1]="SINGLE",t[t.DOUBLE=2]="DOUBLE"})(ht||(ht={}));var un;(function(t){t[t.DAY=0]="DAY",t[t.MILLISECOND=1]="MILLISECOND"})(un||(un={}));var Z;(function(t){t[t.SECOND=0]="SECOND",t[t.MILLISECOND=1]="MILLISECOND",t[t.MICROSECOND=2]="MICROSECOND",t[t.NANOSECOND=3]="NANOSECOND"})(Z||(Z={}));var zn;(function(t){t[t.YEAR_MONTH=0]="YEAR_MONTH",t[t.DAY_TIME=1]="DAY_TIME",t[t.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(zn||(zn={}));const cd=2,Rn=4,Zn=4,Ee=4,Sr=new Int32Array(2),Ly=new Float32Array(Sr.buffer),My=new Float64Array(Sr.buffer),Wa=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1;var Ff;(function(t){t[t.UTF8_BYTES=1]="UTF8_BYTES",t[t.UTF16_STRING=2]="UTF16_STRING"})(Ff||(Ff={}));let Ni=class Ow{constructor(e){this.bytes_=e,this.position_=0,this.text_decoder_=new TextDecoder}static allocate(e){return new Ow(new Uint8Array(e))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(e){this.position_=e}capacity(){return this.bytes_.length}readInt8(e){return this.readUint8(e)<<24>>24}readUint8(e){return this.bytes_[e]}readInt16(e){return this.readUint16(e)<<16>>16}readUint16(e){return this.bytes_[e]|this.bytes_[e+1]<<8}readInt32(e){return this.bytes_[e]|this.bytes_[e+1]<<8|this.bytes_[e+2]<<16|this.bytes_[e+3]<<24}readUint32(e){return this.readInt32(e)>>>0}readInt64(e){return BigInt.asIntN(64,BigInt(this.readUint32(e))+(BigInt(this.readUint32(e+4))<<BigInt(32)))}readUint64(e){return BigInt.asUintN(64,BigInt(this.readUint32(e))+(BigInt(this.readUint32(e+4))<<BigInt(32)))}readFloat32(e){return Sr[0]=this.readInt32(e),Ly[0]}readFloat64(e){return Sr[Wa?0:1]=this.readInt32(e),Sr[Wa?1:0]=this.readInt32(e+4),My[0]}writeInt8(e,n){this.bytes_[e]=n}writeUint8(e,n){this.bytes_[e]=n}writeInt16(e,n){this.bytes_[e]=n,this.bytes_[e+1]=n>>8}writeUint16(e,n){this.bytes_[e]=n,this.bytes_[e+1]=n>>8}writeInt32(e,n){this.bytes_[e]=n,this.bytes_[e+1]=n>>8,this.bytes_[e+2]=n>>16,this.bytes_[e+3]=n>>24}writeUint32(e,n){this.bytes_[e]=n,this.bytes_[e+1]=n>>8,this.bytes_[e+2]=n>>16,this.bytes_[e+3]=n>>24}writeInt64(e,n){this.writeInt32(e,Number(BigInt.asIntN(32,n))),this.writeInt32(e+4,Number(BigInt.asIntN(32,n>>BigInt(32))))}writeUint64(e,n){this.writeUint32(e,Number(BigInt.asUintN(32,n))),this.writeUint32(e+4,Number(BigInt.asUintN(32,n>>BigInt(32))))}writeFloat32(e,n){Ly[0]=n,this.writeInt32(e,Sr[0])}writeFloat64(e,n){My[0]=n,this.writeInt32(e,Sr[Wa?0:1]),this.writeInt32(e+4,Sr[Wa?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+Rn+Zn)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let e="";for(let n=0;n<Zn;n++)e+=String.fromCharCode(this.readInt8(this.position_+Rn+n));return e}__offset(e,n){const r=e-this.readInt32(e);return n<this.readInt16(r)?this.readInt16(r+n):0}__union(e,n){return e.bb_pos=n+this.readInt32(n),e.bb=this,e}__string(e,n){e+=this.readInt32(e);const r=this.readInt32(e);e+=Rn;const s=this.bytes_.subarray(e,e+r);return n===Ff.UTF8_BYTES?s:this.text_decoder_.decode(s)}__union_with_string(e,n){return typeof e=="string"?this.__string(n):this.__union(e,n)}__indirect(e){return e+this.readInt32(e)}__vector(e){return e+this.readInt32(e)+Rn}__vector_len(e){return this.readInt32(e+this.readInt32(e))}__has_identifier(e){if(e.length!=Zn)throw new Error("FlatBuffers: file identifier must be length "+Zn);for(let n=0;n<Zn;n++)if(e.charCodeAt(n)!=this.readInt8(this.position()+Rn+n))return!1;return!0}createScalarList(e,n){const r=[];for(let s=0;s<n;++s){const i=e(s);i!==null&&r.push(i)}return r}createObjList(e,n){const r=[];for(let s=0;s<n;++s){const i=e(s);i!==null&&r.push(i.unpack())}return r}},Cw=class Rw{constructor(e){this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null,this.text_encoder=new TextEncoder;let n;e?n=e:n=1024,this.bb=Ni.allocate(n),this.space=n}clear(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}forceDefaults(e){this.force_defaults=e}dataBuffer(){return this.bb}asUint8Array(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}prep(e,n){e>this.minalign&&(this.minalign=e);const r=~(this.bb.capacity()-this.space+n)+1&e-1;for(;this.space<r+e+n;){const s=this.bb.capacity();this.bb=Rw.growByteBuffer(this.bb),this.space+=this.bb.capacity()-s}this.pad(r)}pad(e){for(let n=0;n<e;n++)this.bb.writeInt8(--this.space,0)}writeInt8(e){this.bb.writeInt8(this.space-=1,e)}writeInt16(e){this.bb.writeInt16(this.space-=2,e)}writeInt32(e){this.bb.writeInt32(this.space-=4,e)}writeInt64(e){this.bb.writeInt64(this.space-=8,e)}writeFloat32(e){this.bb.writeFloat32(this.space-=4,e)}writeFloat64(e){this.bb.writeFloat64(this.space-=8,e)}addInt8(e){this.prep(1,0),this.writeInt8(e)}addInt16(e){this.prep(2,0),this.writeInt16(e)}addInt32(e){this.prep(4,0),this.writeInt32(e)}addInt64(e){this.prep(8,0),this.writeInt64(e)}addFloat32(e){this.prep(4,0),this.writeFloat32(e)}addFloat64(e){this.prep(8,0),this.writeFloat64(e)}addFieldInt8(e,n,r){(this.force_defaults||n!=r)&&(this.addInt8(n),this.slot(e))}addFieldInt16(e,n,r){(this.force_defaults||n!=r)&&(this.addInt16(n),this.slot(e))}addFieldInt32(e,n,r){(this.force_defaults||n!=r)&&(this.addInt32(n),this.slot(e))}addFieldInt64(e,n,r){(this.force_defaults||n!==r)&&(this.addInt64(n),this.slot(e))}addFieldFloat32(e,n,r){(this.force_defaults||n!=r)&&(this.addFloat32(n),this.slot(e))}addFieldFloat64(e,n,r){(this.force_defaults||n!=r)&&(this.addFloat64(n),this.slot(e))}addFieldOffset(e,n,r){(this.force_defaults||n!=r)&&(this.addOffset(n),this.slot(e))}addFieldStruct(e,n,r){n!=r&&(this.nested(n),this.slot(e))}nested(e){if(e!=this.offset())throw new TypeError("FlatBuffers: struct must be serialized inline.")}notNested(){if(this.isNested)throw new TypeError("FlatBuffers: object serialization must not be nested.")}slot(e){this.vtable!==null&&(this.vtable[e]=this.offset())}offset(){return this.bb.capacity()-this.space}static growByteBuffer(e){const n=e.capacity();if(n&3221225472)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");const r=n<<1,s=Ni.allocate(r);return s.setPosition(r-n),s.bytes().set(e.bytes(),r-n),s}addOffset(e){this.prep(Rn,0),this.writeInt32(this.offset()-e+Rn)}startObject(e){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=e;for(let n=0;n<e;n++)this.vtable[n]=0;this.isNested=!0,this.object_start=this.offset()}endObject(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);const e=this.offset();let n=this.vtable_in_use-1;for(;n>=0&&this.vtable[n]==0;n--);const r=n+1;for(;n>=0;n--)this.addInt16(this.vtable[n]!=0?e-this.vtable[n]:0);const s=2;this.addInt16(e-this.object_start);const i=(r+s)*cd;this.addInt16(i);let o=0;const a=this.space;e:for(n=0;n<this.vtables.length;n++){const l=this.bb.capacity()-this.vtables[n];if(i==this.bb.readInt16(l)){for(let u=cd;u<i;u+=cd)if(this.bb.readInt16(a+u)!=this.bb.readInt16(l+u))continue e;o=this.vtables[n];break}}return o?(this.space=this.bb.capacity()-e,this.bb.writeInt32(this.space,o-e)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-e,this.offset()-e)),this.isNested=!1,e}finish(e,n,r){const s=r?Ee:0;if(n){const i=n;if(this.prep(this.minalign,Rn+Zn+s),i.length!=Zn)throw new TypeError("FlatBuffers: file identifier must be length "+Zn);for(let o=Zn-1;o>=0;o--)this.writeInt8(i.charCodeAt(o))}this.prep(this.minalign,Rn+s),this.addOffset(e),s&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}finishSizePrefixed(e,n){this.finish(e,n,!0)}requiredField(e,n){const r=this.bb.capacity()-e,s=r-this.bb.readInt32(r);if(!(n<this.bb.readInt16(s)&&this.bb.readInt16(s+n)!=0))throw new TypeError("FlatBuffers: field "+n+" must be set")}startVector(e,n,r){this.notNested(),this.vector_num_elems=n,this.prep(Rn,e*n),this.prep(r,e*n)}endVector(){return this.writeInt32(this.vector_num_elems),this.offset()}createSharedString(e){if(!e)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(e))return this.string_maps.get(e);const n=this.createString(e);return this.string_maps.set(e,n),n}createString(e){if(e==null)return 0;let n;return e instanceof Uint8Array?n=e:n=this.text_encoder.encode(e),this.addInt8(0),this.startVector(1,n.length,1),this.bb.setPosition(this.space-=n.length),this.bb.bytes().set(n,this.space),this.endVector()}createByteVector(e){return e==null?0:(this.startVector(1,e.length,1),this.bb.setPosition(this.space-=e.length),this.bb.bytes().set(e,this.space),this.endVector())}createObjectOffset(e){return e===null?0:typeof e=="string"?this.createString(e):e.pack(this)}createObjectOffsetList(e){const n=[];for(let r=0;r<e.length;++r){const s=e[r];if(s!==null)n.push(this.createObjectOffset(s));else throw new TypeError("FlatBuffers: Argument for createObjectOffsetList cannot contain null.")}return n}createStructOffsetList(e,n){return n(this,e.length),this.createObjectOffsetList(e.slice().reverse()),this.endVector()}};var uc;(function(t){t[t.BUFFER=0]="BUFFER"})(uc||(uc={}));var dc;(function(t){t[t.LZ4_FRAME=0]="LZ4_FRAME",t[t.ZSTD=1]="ZSTD"})(dc||(dc={}));class Ir{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsBodyCompression(e,n){return(n||new Ir).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsBodyCompression(e,n){return e.setPosition(e.position()+Ee),(n||new Ir).__init(e.readInt32(e.position())+e.position(),e)}codec(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt8(this.bb_pos+e):dc.LZ4_FRAME}method(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt8(this.bb_pos+e):uc.BUFFER}static startBodyCompression(e){e.startObject(2)}static addCodec(e,n){e.addFieldInt8(0,n,dc.LZ4_FRAME)}static addMethod(e,n){e.addFieldInt8(1,n,uc.BUFFER)}static endBodyCompression(e){return e.endObject()}static createBodyCompression(e,n,r){return Ir.startBodyCompression(e),Ir.addCodec(e,n),Ir.addMethod(e,r),Ir.endBodyCompression(e)}}let jw=class{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createBuffer(e,n,r){return e.prep(8,16),e.writeInt64(BigInt(r!=null?r:0)),e.writeInt64(BigInt(n!=null?n:0)),e.offset()}},Fw=class{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createFieldNode(e,n,r){return e.prep(8,16),e.writeInt64(BigInt(r!=null?r:0)),e.writeInt64(BigInt(n!=null?n:0)),e.offset()}},Jn=class Pf{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsRecordBatch(e,n){return(n||new Pf).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsRecordBatch(e,n){return e.setPosition(e.position()+Ee),(n||new Pf).__init(e.readInt32(e.position())+e.position(),e)}length(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt64(this.bb_pos+e):BigInt("0")}nodes(e,n){const r=this.bb.__offset(this.bb_pos,6);return r?(n||new Fw).__init(this.bb.__vector(this.bb_pos+r)+e*16,this.bb):null}nodesLength(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}buffers(e,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new jw).__init(this.bb.__vector(this.bb_pos+r)+e*16,this.bb):null}buffersLength(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}compression(e){const n=this.bb.__offset(this.bb_pos,10);return n?(e||new Ir).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}static startRecordBatch(e){e.startObject(4)}static addLength(e,n){e.addFieldInt64(0,n,BigInt("0"))}static addNodes(e,n){e.addFieldOffset(1,n,0)}static startNodesVector(e,n){e.startVector(16,n,8)}static addBuffers(e,n){e.addFieldOffset(2,n,0)}static startBuffersVector(e,n){e.startVector(16,n,8)}static addCompression(e,n){e.addFieldOffset(3,n,0)}static endRecordBatch(e){return e.endObject()}},Rs=class Lf{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsDictionaryBatch(e,n){return(n||new Lf).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDictionaryBatch(e,n){return e.setPosition(e.position()+Ee),(n||new Lf).__init(e.readInt32(e.position())+e.position(),e)}id(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt64(this.bb_pos+e):BigInt("0")}data(e){const n=this.bb.__offset(this.bb_pos,6);return n?(e||new Jn).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isDelta(){const e=this.bb.__offset(this.bb_pos,8);return e?!!this.bb.readInt8(this.bb_pos+e):!1}static startDictionaryBatch(e){e.startObject(3)}static addId(e,n){e.addFieldInt64(0,n,BigInt("0"))}static addData(e,n){e.addFieldOffset(1,n,0)}static addIsDelta(e,n){e.addFieldInt8(2,+n,0)}static endDictionaryBatch(e){return e.endObject()}};var ki;(function(t){t[t.Little=0]="Little",t[t.Big=1]="Big"})(ki||(ki={}));var fc;(function(t){t[t.DenseArray=0]="DenseArray"})(fc||(fc={}));class Vt{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsInt(e,n){return(n||new Vt).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsInt(e,n){return e.setPosition(e.position()+Ee),(n||new Vt).__init(e.readInt32(e.position())+e.position(),e)}bitWidth(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0}isSigned(){const e=this.bb.__offset(this.bb_pos,6);return e?!!this.bb.readInt8(this.bb_pos+e):!1}static startInt(e){e.startObject(2)}static addBitWidth(e,n){e.addFieldInt32(0,n,0)}static addIsSigned(e,n){e.addFieldInt8(1,+n,0)}static endInt(e){return e.endObject()}static createInt(e,n,r){return Vt.startInt(e),Vt.addBitWidth(e,n),Vt.addIsSigned(e,r),Vt.endInt(e)}}class er{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsDictionaryEncoding(e,n){return(n||new er).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDictionaryEncoding(e,n){return e.setPosition(e.position()+Ee),(n||new er).__init(e.readInt32(e.position())+e.position(),e)}id(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt64(this.bb_pos+e):BigInt("0")}indexType(e){const n=this.bb.__offset(this.bb_pos,6);return n?(e||new Vt).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isOrdered(){const e=this.bb.__offset(this.bb_pos,8);return e?!!this.bb.readInt8(this.bb_pos+e):!1}dictionaryKind(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readInt16(this.bb_pos+e):fc.DenseArray}static startDictionaryEncoding(e){e.startObject(4)}static addId(e,n){e.addFieldInt64(0,n,BigInt("0"))}static addIndexType(e,n){e.addFieldOffset(1,n,0)}static addIsOrdered(e,n){e.addFieldInt8(2,+n,0)}static addDictionaryKind(e,n){e.addFieldInt16(3,n,fc.DenseArray)}static endDictionaryEncoding(e){return e.endObject()}}class Xe{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsKeyValue(e,n){return(n||new Xe).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsKeyValue(e,n){return e.setPosition(e.position()+Ee),(n||new Xe).__init(e.readInt32(e.position())+e.position(),e)}key(e){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,e):null}value(e){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,e):null}static startKeyValue(e){e.startObject(2)}static addKey(e,n){e.addFieldOffset(0,n,0)}static addValue(e,n){e.addFieldOffset(1,n,0)}static endKeyValue(e){return e.endObject()}static createKeyValue(e,n,r){return Xe.startKeyValue(e),Xe.addKey(e,n),Xe.addValue(e,r),Xe.endKeyValue(e)}}let Dy=class eo{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsBinary(e,n){return(n||new eo).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsBinary(e,n){return e.setPosition(e.position()+Ee),(n||new eo).__init(e.readInt32(e.position())+e.position(),e)}static startBinary(e){e.startObject(0)}static endBinary(e){return e.endObject()}static createBinary(e){return eo.startBinary(e),eo.endBinary(e)}},By=class to{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsBool(e,n){return(n||new to).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsBool(e,n){return e.setPosition(e.position()+Ee),(n||new to).__init(e.readInt32(e.position())+e.position(),e)}static startBool(e){e.startObject(0)}static endBool(e){return e.endObject()}static createBool(e){return to.startBool(e),to.endBool(e)}},_l=class js{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsDate(e,n){return(n||new js).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDate(e,n){return e.setPosition(e.position()+Ee),(n||new js).__init(e.readInt32(e.position())+e.position(),e)}unit(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):un.MILLISECOND}static startDate(e){e.startObject(1)}static addUnit(e,n){e.addFieldInt16(0,n,un.MILLISECOND)}static endDate(e){return e.endObject()}static createDate(e,n){return js.startDate(e),js.addUnit(e,n),js.endDate(e)}},Fs=class _r{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsDecimal(e,n){return(n||new _r).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDecimal(e,n){return e.setPosition(e.position()+Ee),(n||new _r).__init(e.readInt32(e.position())+e.position(),e)}precision(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0}scale(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt32(this.bb_pos+e):0}bitWidth(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readInt32(this.bb_pos+e):128}static startDecimal(e){e.startObject(3)}static addPrecision(e,n){e.addFieldInt32(0,n,0)}static addScale(e,n){e.addFieldInt32(1,n,0)}static addBitWidth(e,n){e.addFieldInt32(2,n,128)}static endDecimal(e){return e.endObject()}static createDecimal(e,n,r,s){return _r.startDecimal(e),_r.addPrecision(e,n),_r.addScale(e,r),_r.addBitWidth(e,s),_r.endDecimal(e)}},xl=class Ps{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsDuration(e,n){return(n||new Ps).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDuration(e,n){return e.setPosition(e.position()+Ee),(n||new Ps).__init(e.readInt32(e.position())+e.position(),e)}unit(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):Z.MILLISECOND}static startDuration(e){e.startObject(1)}static addUnit(e,n){e.addFieldInt16(0,n,Z.MILLISECOND)}static endDuration(e){return e.endObject()}static createDuration(e,n){return Ps.startDuration(e),Ps.addUnit(e,n),Ps.endDuration(e)}},bl=class Ls{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsFixedSizeBinary(e,n){return(n||new Ls).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsFixedSizeBinary(e,n){return e.setPosition(e.position()+Ee),(n||new Ls).__init(e.readInt32(e.position())+e.position(),e)}byteWidth(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0}static startFixedSizeBinary(e){e.startObject(1)}static addByteWidth(e,n){e.addFieldInt32(0,n,0)}static endFixedSizeBinary(e){return e.endObject()}static createFixedSizeBinary(e,n){return Ls.startFixedSizeBinary(e),Ls.addByteWidth(e,n),Ls.endFixedSizeBinary(e)}},Sl=class Ms{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsFixedSizeList(e,n){return(n||new Ms).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsFixedSizeList(e,n){return e.setPosition(e.position()+Ee),(n||new Ms).__init(e.readInt32(e.position())+e.position(),e)}listSize(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0}static startFixedSizeList(e){e.startObject(1)}static addListSize(e,n){e.addFieldInt32(0,n,0)}static endFixedSizeList(e){return e.endObject()}static createFixedSizeList(e,n){return Ms.startFixedSizeList(e),Ms.addListSize(e,n),Ms.endFixedSizeList(e)}};class jn{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsFloatingPoint(e,n){return(n||new jn).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsFloatingPoint(e,n){return e.setPosition(e.position()+Ee),(n||new jn).__init(e.readInt32(e.position())+e.position(),e)}precision(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):ht.HALF}static startFloatingPoint(e){e.startObject(1)}static addPrecision(e,n){e.addFieldInt16(0,n,ht.HALF)}static endFloatingPoint(e){return e.endObject()}static createFloatingPoint(e,n){return jn.startFloatingPoint(e),jn.addPrecision(e,n),jn.endFloatingPoint(e)}}class Fn{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsInterval(e,n){return(n||new Fn).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsInterval(e,n){return e.setPosition(e.position()+Ee),(n||new Fn).__init(e.readInt32(e.position())+e.position(),e)}unit(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):zn.YEAR_MONTH}static startInterval(e){e.startObject(1)}static addUnit(e,n){e.addFieldInt16(0,n,zn.YEAR_MONTH)}static endInterval(e){return e.endObject()}static createInterval(e,n){return Fn.startInterval(e),Fn.addUnit(e,n),Fn.endInterval(e)}}let Uy=class no{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsLargeBinary(e,n){return(n||new no).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsLargeBinary(e,n){return e.setPosition(e.position()+Ee),(n||new no).__init(e.readInt32(e.position())+e.position(),e)}static startLargeBinary(e){e.startObject(0)}static endLargeBinary(e){return e.endObject()}static createLargeBinary(e){return no.startLargeBinary(e),no.endLargeBinary(e)}},$y=class ro{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsLargeUtf8(e,n){return(n||new ro).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsLargeUtf8(e,n){return e.setPosition(e.position()+Ee),(n||new ro).__init(e.readInt32(e.position())+e.position(),e)}static startLargeUtf8(e){e.startObject(0)}static endLargeUtf8(e){return e.endObject()}static createLargeUtf8(e){return ro.startLargeUtf8(e),ro.endLargeUtf8(e)}},zy=class so{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsList(e,n){return(n||new so).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsList(e,n){return e.setPosition(e.position()+Ee),(n||new so).__init(e.readInt32(e.position())+e.position(),e)}static startList(e){e.startObject(0)}static endList(e){return e.endObject()}static createList(e){return so.startList(e),so.endList(e)}},Il=class Ds{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsMap(e,n){return(n||new Ds).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsMap(e,n){return e.setPosition(e.position()+Ee),(n||new Ds).__init(e.readInt32(e.position())+e.position(),e)}keysSorted(){const e=this.bb.__offset(this.bb_pos,4);return e?!!this.bb.readInt8(this.bb_pos+e):!1}static startMap(e){e.startObject(1)}static addKeysSorted(e,n){e.addFieldInt8(0,+n,0)}static endMap(e){return e.endObject()}static createMap(e,n){return Ds.startMap(e),Ds.addKeysSorted(e,n),Ds.endMap(e)}},Vy=class io{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsNull(e,n){return(n||new io).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsNull(e,n){return e.setPosition(e.position()+Ee),(n||new io).__init(e.readInt32(e.position())+e.position(),e)}static startNull(e){e.startObject(0)}static endNull(e){return e.endObject()}static createNull(e){return io.startNull(e),io.endNull(e)}};class os{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsStruct_(e,n){return(n||new os).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsStruct_(e,n){return e.setPosition(e.position()+Ee),(n||new os).__init(e.readInt32(e.position())+e.position(),e)}static startStruct_(e){e.startObject(0)}static endStruct_(e){return e.endObject()}static createStruct_(e){return os.startStruct_(e),os.endStruct_(e)}}class tn{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsTime(e,n){return(n||new tn).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsTime(e,n){return e.setPosition(e.position()+Ee),(n||new tn).__init(e.readInt32(e.position())+e.position(),e)}unit(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):Z.MILLISECOND}bitWidth(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt32(this.bb_pos+e):32}static startTime(e){e.startObject(2)}static addUnit(e,n){e.addFieldInt16(0,n,Z.MILLISECOND)}static addBitWidth(e,n){e.addFieldInt32(1,n,32)}static endTime(e){return e.endObject()}static createTime(e,n,r){return tn.startTime(e),tn.addUnit(e,n),tn.addBitWidth(e,r),tn.endTime(e)}}class nn{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsTimestamp(e,n){return(n||new nn).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsTimestamp(e,n){return e.setPosition(e.position()+Ee),(n||new nn).__init(e.readInt32(e.position())+e.position(),e)}unit(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):Z.SECOND}timezone(e){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,e):null}static startTimestamp(e){e.startObject(2)}static addUnit(e,n){e.addFieldInt16(0,n,Z.SECOND)}static addTimezone(e,n){e.addFieldOffset(1,n,0)}static endTimestamp(e){return e.endObject()}static createTimestamp(e,n,r){return nn.startTimestamp(e),nn.addUnit(e,n),nn.addTimezone(e,r),nn.endTimestamp(e)}}class Tt{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsUnion(e,n){return(n||new Tt).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsUnion(e,n){return e.setPosition(e.position()+Ee),(n||new Tt).__init(e.readInt32(e.position())+e.position(),e)}mode(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):mt.Sparse}typeIds(e){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.readInt32(this.bb.__vector(this.bb_pos+n)+e*4):0}typeIdsLength(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}typeIdsArray(){const e=this.bb.__offset(this.bb_pos,6);return e?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}static startUnion(e){e.startObject(2)}static addMode(e,n){e.addFieldInt16(0,n,mt.Sparse)}static addTypeIds(e,n){e.addFieldOffset(1,n,0)}static createTypeIdsVector(e,n){e.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)e.addInt32(n[r]);return e.endVector()}static startTypeIdsVector(e,n){e.startVector(4,n,4)}static endUnion(e){return e.endObject()}static createUnion(e,n,r){return Tt.startUnion(e),Tt.addMode(e,n),Tt.addTypeIds(e,r),Tt.endUnion(e)}}let Wy=class oo{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsUtf8(e,n){return(n||new oo).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsUtf8(e,n){return e.setPosition(e.position()+Ee),(n||new oo).__init(e.readInt32(e.position())+e.position(),e)}static startUtf8(e){e.startObject(0)}static endUtf8(e){return e.endObject()}static createUtf8(e){return oo.startUtf8(e),oo.endUtf8(e)}};var Re;(function(t){t[t.NONE=0]="NONE",t[t.Null=1]="Null",t[t.Int=2]="Int",t[t.FloatingPoint=3]="FloatingPoint",t[t.Binary=4]="Binary",t[t.Utf8=5]="Utf8",t[t.Bool=6]="Bool",t[t.Decimal=7]="Decimal",t[t.Date=8]="Date",t[t.Time=9]="Time",t[t.Timestamp=10]="Timestamp",t[t.Interval=11]="Interval",t[t.List=12]="List",t[t.Struct_=13]="Struct_",t[t.Union=14]="Union",t[t.FixedSizeBinary=15]="FixedSizeBinary",t[t.FixedSizeList=16]="FixedSizeList",t[t.Map=17]="Map",t[t.Duration=18]="Duration",t[t.LargeBinary=19]="LargeBinary",t[t.LargeUtf8=20]="LargeUtf8",t[t.LargeList=21]="LargeList",t[t.RunEndEncoded=22]="RunEndEncoded"})(Re||(Re={}));let Gt=class El{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsField(e,n){return(n||new El).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsField(e,n){return e.setPosition(e.position()+Ee),(n||new El).__init(e.readInt32(e.position())+e.position(),e)}name(e){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,e):null}nullable(){const e=this.bb.__offset(this.bb_pos,6);return e?!!this.bb.readInt8(this.bb_pos+e):!1}typeType(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readUint8(this.bb_pos+e):Re.NONE}type(e){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.__union(e,this.bb_pos+n):null}dictionary(e){const n=this.bb.__offset(this.bb_pos,12);return n?(e||new er).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}children(e,n){const r=this.bb.__offset(this.bb_pos,14);return r?(n||new El).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+e*4),this.bb):null}childrenLength(){const e=this.bb.__offset(this.bb_pos,14);return e?this.bb.__vector_len(this.bb_pos+e):0}customMetadata(e,n){const r=this.bb.__offset(this.bb_pos,16);return r?(n||new Xe).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+e*4),this.bb):null}customMetadataLength(){const e=this.bb.__offset(this.bb_pos,16);return e?this.bb.__vector_len(this.bb_pos+e):0}static startField(e){e.startObject(7)}static addName(e,n){e.addFieldOffset(0,n,0)}static addNullable(e,n){e.addFieldInt8(1,+n,0)}static addTypeType(e,n){e.addFieldInt8(2,n,Re.NONE)}static addType(e,n){e.addFieldOffset(3,n,0)}static addDictionary(e,n){e.addFieldOffset(4,n,0)}static addChildren(e,n){e.addFieldOffset(5,n,0)}static createChildrenVector(e,n){e.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)e.addOffset(n[r]);return e.endVector()}static startChildrenVector(e,n){e.startVector(4,n,4)}static addCustomMetadata(e,n){e.addFieldOffset(6,n,0)}static createCustomMetadataVector(e,n){e.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)e.addOffset(n[r]);return e.endVector()}static startCustomMetadataVector(e,n){e.startVector(4,n,4)}static endField(e){return e.endObject()}},An=class qn{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsSchema(e,n){return(n||new qn).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsSchema(e,n){return e.setPosition(e.position()+Ee),(n||new qn).__init(e.readInt32(e.position())+e.position(),e)}endianness(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):ki.Little}fields(e,n){const r=this.bb.__offset(this.bb_pos,6);return r?(n||new Gt).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+e*4),this.bb):null}fieldsLength(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}customMetadata(e,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new Xe).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+e*4),this.bb):null}customMetadataLength(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}features(e){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.readInt64(this.bb.__vector(this.bb_pos+n)+e*8):BigInt(0)}featuresLength(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__vector_len(this.bb_pos+e):0}static startSchema(e){e.startObject(4)}static addEndianness(e,n){e.addFieldInt16(0,n,ki.Little)}static addFields(e,n){e.addFieldOffset(1,n,0)}static createFieldsVector(e,n){e.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)e.addOffset(n[r]);return e.endVector()}static startFieldsVector(e,n){e.startVector(4,n,4)}static addCustomMetadata(e,n){e.addFieldOffset(2,n,0)}static createCustomMetadataVector(e,n){e.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)e.addOffset(n[r]);return e.endVector()}static startCustomMetadataVector(e,n){e.startVector(4,n,4)}static addFeatures(e,n){e.addFieldOffset(3,n,0)}static createFeaturesVector(e,n){e.startVector(8,n.length,8);for(let r=n.length-1;r>=0;r--)e.addInt64(n[r]);return e.endVector()}static startFeaturesVector(e,n){e.startVector(8,n,8)}static endSchema(e){return e.endObject()}static finishSchemaBuffer(e,n){e.finish(n)}static finishSizePrefixedSchemaBuffer(e,n){e.finish(n,void 0,!0)}static createSchema(e,n,r,s,i){return qn.startSchema(e),qn.addEndianness(e,n),qn.addFields(e,r),qn.addCustomMetadata(e,s),qn.addFeatures(e,i),qn.endSchema(e)}};var _e;(function(t){t[t.NONE=0]="NONE",t[t.Schema=1]="Schema",t[t.DictionaryBatch=2]="DictionaryBatch",t[t.RecordBatch=3]="RecordBatch",t[t.Tensor=4]="Tensor",t[t.SparseTensor=5]="SparseTensor"})(_e||(_e={}));var w;(function(t){t[t.NONE=0]="NONE",t[t.Null=1]="Null",t[t.Int=2]="Int",t[t.Float=3]="Float",t[t.Binary=4]="Binary",t[t.Utf8=5]="Utf8",t[t.Bool=6]="Bool",t[t.Decimal=7]="Decimal",t[t.Date=8]="Date",t[t.Time=9]="Time",t[t.Timestamp=10]="Timestamp",t[t.Interval=11]="Interval",t[t.List=12]="List",t[t.Struct=13]="Struct",t[t.Union=14]="Union",t[t.FixedSizeBinary=15]="FixedSizeBinary",t[t.FixedSizeList=16]="FixedSizeList",t[t.Map=17]="Map",t[t.Duration=18]="Duration",t[t.LargeBinary=19]="LargeBinary",t[t.LargeUtf8=20]="LargeUtf8",t[t.Dictionary=-1]="Dictionary",t[t.Int8=-2]="Int8",t[t.Int16=-3]="Int16",t[t.Int32=-4]="Int32",t[t.Int64=-5]="Int64",t[t.Uint8=-6]="Uint8",t[t.Uint16=-7]="Uint16",t[t.Uint32=-8]="Uint32",t[t.Uint64=-9]="Uint64",t[t.Float16=-10]="Float16",t[t.Float32=-11]="Float32",t[t.Float64=-12]="Float64",t[t.DateDay=-13]="DateDay",t[t.DateMillisecond=-14]="DateMillisecond",t[t.TimestampSecond=-15]="TimestampSecond",t[t.TimestampMillisecond=-16]="TimestampMillisecond",t[t.TimestampMicrosecond=-17]="TimestampMicrosecond",t[t.TimestampNanosecond=-18]="TimestampNanosecond",t[t.TimeSecond=-19]="TimeSecond",t[t.TimeMillisecond=-20]="TimeMillisecond",t[t.TimeMicrosecond=-21]="TimeMicrosecond",t[t.TimeNanosecond=-22]="TimeNanosecond",t[t.DenseUnion=-23]="DenseUnion",t[t.SparseUnion=-24]="SparseUnion",t[t.IntervalDayTime=-25]="IntervalDayTime",t[t.IntervalYearMonth=-26]="IntervalYearMonth",t[t.DurationSecond=-27]="DurationSecond",t[t.DurationMillisecond=-28]="DurationMillisecond",t[t.DurationMicrosecond=-29]="DurationMicrosecond",t[t.DurationNanosecond=-30]="DurationNanosecond"})(w||(w={}));var Yn;(function(t){t[t.OFFSET=0]="OFFSET",t[t.DATA=1]="DATA",t[t.VALIDITY=2]="VALIDITY",t[t.TYPE=3]="TYPE"})(Yn||(Yn={}));const nk=void 0;function Zo(t){if(t===null)return"null";if(t===nk)return"undefined";switch(typeof t){case"number":return`${t}`;case"bigint":return`${t}`;case"string":return`"${t}"`}return typeof t[Symbol.toPrimitive]=="function"?t[Symbol.toPrimitive]("string"):ArrayBuffer.isView(t)?t instanceof BigInt64Array||t instanceof BigUint64Array?`[${[...t].map(e=>Zo(e))}]`:`[${t}]`:ArrayBuffer.isView(t)?`[${t}]`:JSON.stringify(t,(e,n)=>typeof n=="bigint"?`${n}`:n)}function Ce(t){if(typeof t=="bigint"&&(t<Number.MIN_SAFE_INTEGER||t>Number.MAX_SAFE_INTEGER))throw new TypeError(`${t} is not safe to convert to a number.`);return Number(t)}function Pw(t,e){return Ce(t/e)+Ce(t%e)/Ce(e)}const rk=Symbol.for("isArrowBigNum");function Sn(t,...e){return e.length===0?Object.setPrototypeOf(Ae(this.TypedArray,t),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(t,...e),this.constructor.prototype)}Sn.prototype[rk]=!0;Sn.prototype.toJSON=function(){return`"${ta(this)}"`};Sn.prototype.valueOf=function(t){return Lw(this,t)};Sn.prototype.toString=function(){return ta(this)};Sn.prototype[Symbol.toPrimitive]=function(t="default"){switch(t){case"number":return Lw(this);case"string":return ta(this);case"default":return ok(this)}return ta(this)};function fi(...t){return Sn.apply(this,t)}function hi(...t){return Sn.apply(this,t)}function ea(...t){return Sn.apply(this,t)}Object.setPrototypeOf(fi.prototype,Object.create(Int32Array.prototype));Object.setPrototypeOf(hi.prototype,Object.create(Uint32Array.prototype));Object.setPrototypeOf(ea.prototype,Object.create(Uint32Array.prototype));Object.assign(fi.prototype,Sn.prototype,{constructor:fi,signed:!0,TypedArray:Int32Array,BigIntArray:BigInt64Array});Object.assign(hi.prototype,Sn.prototype,{constructor:hi,signed:!1,TypedArray:Uint32Array,BigIntArray:BigUint64Array});Object.assign(ea.prototype,Sn.prototype,{constructor:ea,signed:!0,TypedArray:Uint32Array,BigIntArray:BigUint64Array});const sk=BigInt(4294967296)*BigInt(4294967296),ik=sk-BigInt(1);function Lw(t,e){const{buffer:n,byteOffset:r,byteLength:s,signed:i}=t,o=new BigUint64Array(n,r,s/8),a=i&&o.at(-1)&BigInt(1)<<BigInt(63);let l=BigInt(0),u=0;if(a){for(const d of o)l|=(d^ik)*(BigInt(1)<<BigInt(64*u++));l*=BigInt(-1),l-=BigInt(1)}else for(const d of o)l|=d*(BigInt(1)<<BigInt(64*u++));if(typeof e=="number"){const d=BigInt(Math.pow(10,e)),f=l/d,m=l%d;return Ce(f)+Ce(m)/Ce(d)}return Ce(l)}function ta(t){if(t.byteLength===8)return`${new t.BigIntArray(t.buffer,t.byteOffset,1)[0]}`;if(!t.signed)return ud(t);let e=new Uint16Array(t.buffer,t.byteOffset,t.byteLength/2);if(new Int16Array([e.at(-1)])[0]>=0)return ud(t);e=e.slice();let r=1;for(let i=0;i<e.length;i++){const o=e[i],a=~o+r;e[i]=a,r&=o===0?1:0}return`-${ud(e)}`}function ok(t){return t.byteLength===8?new t.BigIntArray(t.buffer,t.byteOffset,1)[0]:ta(t)}function ud(t){let e="";const n=new Uint32Array(2);let r=new Uint16Array(t.buffer,t.byteOffset,t.byteLength/2);const s=new Uint32Array((r=new Uint16Array(r).reverse()).buffer);let i=-1;const o=r.length-1;do{for(n[0]=r[i=0];i<o;)r[i++]=n[1]=n[0]/10,n[0]=(n[0]-n[1]*10<<16)+r[i];r[i]=n[1]=n[0]/10,n[0]=n[0]-n[1]*10,e=`${n[0]}${e}`}while(s[0]||s[1]||s[2]||s[3]);return e!=null?e:"0"}class up{static new(e,n){switch(n){case!0:return new fi(e);case!1:return new hi(e)}switch(e.constructor){case Int8Array:case Int16Array:case Int32Array:case BigInt64Array:return new fi(e)}return e.byteLength===16?new ea(e):new hi(e)}static signed(e){return new fi(e)}static unsigned(e){return new hi(e)}static decimal(e){return new ea(e)}constructor(e,n){return up.new(e,n)}}var Mw,Dw,Bw,Uw,$w,zw,Vw,Ww,qw,Hw,Qw,Kw,Jw,Yw,Gw,Xw,Zw,e_,t_,n_,r_,s_;class z{static isNull(e){return(e==null?void 0:e.typeId)===w.Null}static isInt(e){return(e==null?void 0:e.typeId)===w.Int}static isFloat(e){return(e==null?void 0:e.typeId)===w.Float}static isBinary(e){return(e==null?void 0:e.typeId)===w.Binary}static isLargeBinary(e){return(e==null?void 0:e.typeId)===w.LargeBinary}static isUtf8(e){return(e==null?void 0:e.typeId)===w.Utf8}static isLargeUtf8(e){return(e==null?void 0:e.typeId)===w.LargeUtf8}static isBool(e){return(e==null?void 0:e.typeId)===w.Bool}static isDecimal(e){return(e==null?void 0:e.typeId)===w.Decimal}static isDate(e){return(e==null?void 0:e.typeId)===w.Date}static isTime(e){return(e==null?void 0:e.typeId)===w.Time}static isTimestamp(e){return(e==null?void 0:e.typeId)===w.Timestamp}static isInterval(e){return(e==null?void 0:e.typeId)===w.Interval}static isDuration(e){return(e==null?void 0:e.typeId)===w.Duration}static isList(e){return(e==null?void 0:e.typeId)===w.List}static isStruct(e){return(e==null?void 0:e.typeId)===w.Struct}static isUnion(e){return(e==null?void 0:e.typeId)===w.Union}static isFixedSizeBinary(e){return(e==null?void 0:e.typeId)===w.FixedSizeBinary}static isFixedSizeList(e){return(e==null?void 0:e.typeId)===w.FixedSizeList}static isMap(e){return(e==null?void 0:e.typeId)===w.Map}static isDictionary(e){return(e==null?void 0:e.typeId)===w.Dictionary}static isDenseUnion(e){return z.isUnion(e)&&e.mode===mt.Dense}static isSparseUnion(e){return z.isUnion(e)&&e.mode===mt.Sparse}constructor(e){this.typeId=e}}Mw=Symbol.toStringTag;z[Mw]=(t=>(t.children=null,t.ArrayType=Array,t.OffsetArrayType=Int32Array,t[Symbol.toStringTag]="DataType"))(z.prototype);class $r extends z{constructor(){super(w.Null)}toString(){return"Null"}}Dw=Symbol.toStringTag;$r[Dw]=(t=>t[Symbol.toStringTag]="Null")($r.prototype);class vs extends z{constructor(e,n){super(w.Int),this.isSigned=e,this.bitWidth=n}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:return this.isSigned?Int32Array:Uint32Array;case 64:return this.isSigned?BigInt64Array:BigUint64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}}Bw=Symbol.toStringTag;vs[Bw]=(t=>(t.isSigned=null,t.bitWidth=null,t[Symbol.toStringTag]="Int"))(vs.prototype);class na extends vs{constructor(){super(!0,32)}get ArrayType(){return Int32Array}}Object.defineProperty(na.prototype,"ArrayType",{value:Int32Array});class hc extends z{constructor(e){super(w.Float),this.precision=e}get ArrayType(){switch(this.precision){case ht.HALF:return Uint16Array;case ht.SINGLE:return Float32Array;case ht.DOUBLE:return Float64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`Float${this.precision<<5||16}`}}Uw=Symbol.toStringTag;hc[Uw]=(t=>(t.precision=null,t[Symbol.toStringTag]="Float"))(hc.prototype);class pc extends z{constructor(){super(w.Binary)}toString(){return"Binary"}}$w=Symbol.toStringTag;pc[$w]=(t=>(t.ArrayType=Uint8Array,t[Symbol.toStringTag]="Binary"))(pc.prototype);class mc extends z{constructor(){super(w.LargeBinary)}toString(){return"LargeBinary"}}zw=Symbol.toStringTag;mc[zw]=(t=>(t.ArrayType=Uint8Array,t.OffsetArrayType=BigInt64Array,t[Symbol.toStringTag]="LargeBinary"))(mc.prototype);class yc extends z{constructor(){super(w.Utf8)}toString(){return"Utf8"}}Vw=Symbol.toStringTag;yc[Vw]=(t=>(t.ArrayType=Uint8Array,t[Symbol.toStringTag]="Utf8"))(yc.prototype);class gc extends z{constructor(){super(w.LargeUtf8)}toString(){return"LargeUtf8"}}Ww=Symbol.toStringTag;gc[Ww]=(t=>(t.ArrayType=Uint8Array,t.OffsetArrayType=BigInt64Array,t[Symbol.toStringTag]="LargeUtf8"))(gc.prototype);class vc extends z{constructor(){super(w.Bool)}toString(){return"Bool"}}qw=Symbol.toStringTag;vc[qw]=(t=>(t.ArrayType=Uint8Array,t[Symbol.toStringTag]="Bool"))(vc.prototype);class wc extends z{constructor(e,n,r=128){super(w.Decimal),this.scale=e,this.precision=n,this.bitWidth=r}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}}Hw=Symbol.toStringTag;wc[Hw]=(t=>(t.scale=null,t.precision=null,t.ArrayType=Uint32Array,t[Symbol.toStringTag]="Decimal"))(wc.prototype);class _c extends z{constructor(e){super(w.Date),this.unit=e}toString(){return`Date${(this.unit+1)*32}<${un[this.unit]}>`}get ArrayType(){return this.unit===un.DAY?Int32Array:BigInt64Array}}Qw=Symbol.toStringTag;_c[Qw]=(t=>(t.unit=null,t[Symbol.toStringTag]="Date"))(_c.prototype);class xc extends z{constructor(e,n){super(w.Time),this.unit=e,this.bitWidth=n}toString(){return`Time${this.bitWidth}<${Z[this.unit]}>`}get ArrayType(){switch(this.bitWidth){case 32:return Int32Array;case 64:return BigInt64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}}Kw=Symbol.toStringTag;xc[Kw]=(t=>(t.unit=null,t.bitWidth=null,t[Symbol.toStringTag]="Time"))(xc.prototype);class bc extends z{constructor(e,n){super(w.Timestamp),this.unit=e,this.timezone=n}toString(){return`Timestamp<${Z[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}}Jw=Symbol.toStringTag;bc[Jw]=(t=>(t.unit=null,t.timezone=null,t.ArrayType=BigInt64Array,t[Symbol.toStringTag]="Timestamp"))(bc.prototype);class Sc extends z{constructor(e){super(w.Interval),this.unit=e}toString(){return`Interval<${zn[this.unit]}>`}}Yw=Symbol.toStringTag;Sc[Yw]=(t=>(t.unit=null,t.ArrayType=Int32Array,t[Symbol.toStringTag]="Interval"))(Sc.prototype);class Ic extends z{constructor(e){super(w.Duration),this.unit=e}toString(){return`Duration<${Z[this.unit]}>`}}Gw=Symbol.toStringTag;Ic[Gw]=(t=>(t.unit=null,t.ArrayType=BigInt64Array,t[Symbol.toStringTag]="Duration"))(Ic.prototype);class Ec extends z{constructor(e){super(w.List),this.children=[e]}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}}Xw=Symbol.toStringTag;Ec[Xw]=(t=>(t.children=null,t[Symbol.toStringTag]="List"))(Ec.prototype);class _t extends z{constructor(e){super(w.Struct),this.children=e}toString(){return`Struct<{${this.children.map(e=>`${e.name}:${e.type}`).join(", ")}}>`}}Zw=Symbol.toStringTag;_t[Zw]=(t=>(t.children=null,t[Symbol.toStringTag]="Struct"))(_t.prototype);class Nc extends z{constructor(e,n,r){super(w.Union),this.mode=e,this.children=r,this.typeIds=n=Int32Array.from(n),this.typeIdToChildIndex=n.reduce((s,i,o)=>(s[i]=o)&&s||s,Object.create(null))}toString(){return`${this[Symbol.toStringTag]}<${this.children.map(e=>`${e.type}`).join(" | ")}>`}}e_=Symbol.toStringTag;Nc[e_]=(t=>(t.mode=null,t.typeIds=null,t.children=null,t.typeIdToChildIndex=null,t.ArrayType=Int8Array,t[Symbol.toStringTag]="Union"))(Nc.prototype);class kc extends z{constructor(e){super(w.FixedSizeBinary),this.byteWidth=e}toString(){return`FixedSizeBinary[${this.byteWidth}]`}}t_=Symbol.toStringTag;kc[t_]=(t=>(t.byteWidth=null,t.ArrayType=Uint8Array,t[Symbol.toStringTag]="FixedSizeBinary"))(kc.prototype);class Ac extends z{constructor(e,n){super(w.FixedSizeList),this.listSize=e,this.children=[n]}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}}n_=Symbol.toStringTag;Ac[n_]=(t=>(t.children=null,t.listSize=null,t[Symbol.toStringTag]="FixedSizeList"))(Ac.prototype);class Tc extends z{constructor(e,n=!1){var r,s,i;if(super(w.Map),this.children=[e],this.keysSorted=n,e&&(e.name="entries",!((r=e==null?void 0:e.type)===null||r===void 0)&&r.children)){const o=(s=e==null?void 0:e.type)===null||s===void 0?void 0:s.children[0];o&&(o.name="key");const a=(i=e==null?void 0:e.type)===null||i===void 0?void 0:i.children[1];a&&(a.name="value")}}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}get childType(){return this.children[0].type}toString(){return`Map<{${this.children[0].type.children.map(e=>`${e.name}:${e.type}`).join(", ")}}>`}}r_=Symbol.toStringTag;Tc[r_]=(t=>(t.children=null,t.keysSorted=null,t[Symbol.toStringTag]="Map_"))(Tc.prototype);const ak=(t=>()=>++t)(-1);class Ai extends z{constructor(e,n,r,s){super(w.Dictionary),this.indices=n,this.dictionary=e,this.isOrdered=s||!1,this.id=r==null?ak():Ce(r)}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}}s_=Symbol.toStringTag;Ai[s_]=(t=>(t.id=null,t.indices=null,t.isOrdered=null,t.dictionary=null,t[Symbol.toStringTag]="Dictionary"))(Ai.prototype);function Gn(t){const e=t;switch(t.typeId){case w.Decimal:return t.bitWidth/32;case w.Interval:return 1+e.unit;case w.FixedSizeList:return e.listSize;case w.FixedSizeBinary:return e.byteWidth;default:return 1}}class he{visitMany(e,...n){return e.map((r,s)=>this.visit(r,...n.map(i=>i[s])))}visit(...e){return this.getVisitFn(e[0],!1).apply(this,e)}getVisitFn(e,n=!0){return lk(this,e,n)}getVisitFnByTypeId(e,n=!0){return Bs(this,e,n)}visitNull(e,...n){return null}visitBool(e,...n){return null}visitInt(e,...n){return null}visitFloat(e,...n){return null}visitUtf8(e,...n){return null}visitLargeUtf8(e,...n){return null}visitBinary(e,...n){return null}visitLargeBinary(e,...n){return null}visitFixedSizeBinary(e,...n){return null}visitDate(e,...n){return null}visitTimestamp(e,...n){return null}visitTime(e,...n){return null}visitDecimal(e,...n){return null}visitList(e,...n){return null}visitStruct(e,...n){return null}visitUnion(e,...n){return null}visitDictionary(e,...n){return null}visitInterval(e,...n){return null}visitDuration(e,...n){return null}visitFixedSizeList(e,...n){return null}visitMap(e,...n){return null}}function lk(t,e,n=!0){return typeof e=="number"?Bs(t,e,n):typeof e=="string"&&e in w?Bs(t,w[e],n):e&&e instanceof z?Bs(t,qy(e),n):e!=null&&e.type&&e.type instanceof z?Bs(t,qy(e.type),n):Bs(t,w.NONE,n)}function Bs(t,e,n=!0){let r=null;switch(e){case w.Null:r=t.visitNull;break;case w.Bool:r=t.visitBool;break;case w.Int:r=t.visitInt;break;case w.Int8:r=t.visitInt8||t.visitInt;break;case w.Int16:r=t.visitInt16||t.visitInt;break;case w.Int32:r=t.visitInt32||t.visitInt;break;case w.Int64:r=t.visitInt64||t.visitInt;break;case w.Uint8:r=t.visitUint8||t.visitInt;break;case w.Uint16:r=t.visitUint16||t.visitInt;break;case w.Uint32:r=t.visitUint32||t.visitInt;break;case w.Uint64:r=t.visitUint64||t.visitInt;break;case w.Float:r=t.visitFloat;break;case w.Float16:r=t.visitFloat16||t.visitFloat;break;case w.Float32:r=t.visitFloat32||t.visitFloat;break;case w.Float64:r=t.visitFloat64||t.visitFloat;break;case w.Utf8:r=t.visitUtf8;break;case w.LargeUtf8:r=t.visitLargeUtf8;break;case w.Binary:r=t.visitBinary;break;case w.LargeBinary:r=t.visitLargeBinary;break;case w.FixedSizeBinary:r=t.visitFixedSizeBinary;break;case w.Date:r=t.visitDate;break;case w.DateDay:r=t.visitDateDay||t.visitDate;break;case w.DateMillisecond:r=t.visitDateMillisecond||t.visitDate;break;case w.Timestamp:r=t.visitTimestamp;break;case w.TimestampSecond:r=t.visitTimestampSecond||t.visitTimestamp;break;case w.TimestampMillisecond:r=t.visitTimestampMillisecond||t.visitTimestamp;break;case w.TimestampMicrosecond:r=t.visitTimestampMicrosecond||t.visitTimestamp;break;case w.TimestampNanosecond:r=t.visitTimestampNanosecond||t.visitTimestamp;break;case w.Time:r=t.visitTime;break;case w.TimeSecond:r=t.visitTimeSecond||t.visitTime;break;case w.TimeMillisecond:r=t.visitTimeMillisecond||t.visitTime;break;case w.TimeMicrosecond:r=t.visitTimeMicrosecond||t.visitTime;break;case w.TimeNanosecond:r=t.visitTimeNanosecond||t.visitTime;break;case w.Decimal:r=t.visitDecimal;break;case w.List:r=t.visitList;break;case w.Struct:r=t.visitStruct;break;case w.Union:r=t.visitUnion;break;case w.DenseUnion:r=t.visitDenseUnion||t.visitUnion;break;case w.SparseUnion:r=t.visitSparseUnion||t.visitUnion;break;case w.Dictionary:r=t.visitDictionary;break;case w.Interval:r=t.visitInterval;break;case w.IntervalDayTime:r=t.visitIntervalDayTime||t.visitInterval;break;case w.IntervalYearMonth:r=t.visitIntervalYearMonth||t.visitInterval;break;case w.Duration:r=t.visitDuration;break;case w.DurationSecond:r=t.visitDurationSecond||t.visitDuration;break;case w.DurationMillisecond:r=t.visitDurationMillisecond||t.visitDuration;break;case w.DurationMicrosecond:r=t.visitDurationMicrosecond||t.visitDuration;break;case w.DurationNanosecond:r=t.visitDurationNanosecond||t.visitDuration;break;case w.FixedSizeList:r=t.visitFixedSizeList;break;case w.Map:r=t.visitMap;break}if(typeof r=="function")return r;if(!n)return()=>null;throw new Error(`Unrecognized type '${w[e]}'`)}function qy(t){switch(t.typeId){case w.Null:return w.Null;case w.Int:{const{bitWidth:e,isSigned:n}=t;switch(e){case 8:return n?w.Int8:w.Uint8;case 16:return n?w.Int16:w.Uint16;case 32:return n?w.Int32:w.Uint32;case 64:return n?w.Int64:w.Uint64}return w.Int}case w.Float:switch(t.precision){case ht.HALF:return w.Float16;case ht.SINGLE:return w.Float32;case ht.DOUBLE:return w.Float64}return w.Float;case w.Binary:return w.Binary;case w.LargeBinary:return w.LargeBinary;case w.Utf8:return w.Utf8;case w.LargeUtf8:return w.LargeUtf8;case w.Bool:return w.Bool;case w.Decimal:return w.Decimal;case w.Time:switch(t.unit){case Z.SECOND:return w.TimeSecond;case Z.MILLISECOND:return w.TimeMillisecond;case Z.MICROSECOND:return w.TimeMicrosecond;case Z.NANOSECOND:return w.TimeNanosecond}return w.Time;case w.Timestamp:switch(t.unit){case Z.SECOND:return w.TimestampSecond;case Z.MILLISECOND:return w.TimestampMillisecond;case Z.MICROSECOND:return w.TimestampMicrosecond;case Z.NANOSECOND:return w.TimestampNanosecond}return w.Timestamp;case w.Date:switch(t.unit){case un.DAY:return w.DateDay;case un.MILLISECOND:return w.DateMillisecond}return w.Date;case w.Interval:switch(t.unit){case zn.DAY_TIME:return w.IntervalDayTime;case zn.YEAR_MONTH:return w.IntervalYearMonth}return w.Interval;case w.Duration:switch(t.unit){case Z.SECOND:return w.DurationSecond;case Z.MILLISECOND:return w.DurationMillisecond;case Z.MICROSECOND:return w.DurationMicrosecond;case Z.NANOSECOND:return w.DurationNanosecond}return w.Duration;case w.Map:return w.Map;case w.List:return w.List;case w.Struct:return w.Struct;case w.Union:switch(t.mode){case mt.Dense:return w.DenseUnion;case mt.Sparse:return w.SparseUnion}return w.Union;case w.FixedSizeBinary:return w.FixedSizeBinary;case w.FixedSizeList:return w.FixedSizeList;case w.Dictionary:return w.Dictionary}throw new Error(`Unrecognized type '${w[t.typeId]}'`)}he.prototype.visitInt8=null;he.prototype.visitInt16=null;he.prototype.visitInt32=null;he.prototype.visitInt64=null;he.prototype.visitUint8=null;he.prototype.visitUint16=null;he.prototype.visitUint32=null;he.prototype.visitUint64=null;he.prototype.visitFloat16=null;he.prototype.visitFloat32=null;he.prototype.visitFloat64=null;he.prototype.visitDateDay=null;he.prototype.visitDateMillisecond=null;he.prototype.visitTimestampSecond=null;he.prototype.visitTimestampMillisecond=null;he.prototype.visitTimestampMicrosecond=null;he.prototype.visitTimestampNanosecond=null;he.prototype.visitTimeSecond=null;he.prototype.visitTimeMillisecond=null;he.prototype.visitTimeMicrosecond=null;he.prototype.visitTimeNanosecond=null;he.prototype.visitDenseUnion=null;he.prototype.visitSparseUnion=null;he.prototype.visitIntervalDayTime=null;he.prototype.visitIntervalYearMonth=null;he.prototype.visitDuration=null;he.prototype.visitDurationSecond=null;he.prototype.visitDurationMillisecond=null;he.prototype.visitDurationMicrosecond=null;he.prototype.visitDurationNanosecond=null;const i_=new Float64Array(1),Ns=new Uint32Array(i_.buffer);function o_(t){const e=(t&31744)>>10,n=(t&1023)/1024,r=Math.pow(-1,(t&32768)>>15);switch(e){case 31:return r*(n?Number.NaN:1/0);case 0:return r*(n?6103515625e-14*n:0)}return r*Math.pow(2,e-15)*(1+n)}function ck(t){if(t!==t)return 32256;i_[0]=t;const e=(Ns[1]&2147483648)>>16&65535;let n=Ns[1]&2146435072,r=0;return n>=1089470464?Ns[0]>0?n=31744:(n=(n&2080374784)>>16,r=(Ns[1]&1048575)>>10):n<=1056964608?(r=1048576+(Ns[1]&1048575),r=1048576+(r<<(n>>20)-998)>>21,n=0):(n=n-1056964608>>10,r=(Ns[1]&1048575)+512>>10),e|n|r&65535}class ee extends he{}function re(t){return(e,n,r)=>{if(e.setValid(n,r!=null))return t(e,n,r)}}const uk=(t,e,n)=>{t[e]=Math.floor(n/864e5)},a_=(t,e,n,r)=>{if(n+1<e.length){const s=Ce(e[n]),i=Ce(e[n+1]);t.set(r.subarray(0,i-s),s)}},dk=({offset:t,values:e},n,r)=>{const s=t+n;r?e[s>>3]|=1<<s%8:e[s>>3]&=~(1<<s%8)},dr=({values:t},e,n)=>{t[e]=n},dp=({values:t},e,n)=>{t[e]=n},l_=({values:t},e,n)=>{t[e]=ck(n)},fk=(t,e,n)=>{switch(t.type.precision){case ht.HALF:return l_(t,e,n);case ht.SINGLE:case ht.DOUBLE:return dp(t,e,n)}},c_=({values:t},e,n)=>{uk(t,e,n.valueOf())},u_=({values:t},e,n)=>{t[e]=BigInt(n)},hk=({stride:t,values:e},n,r)=>{e.set(r.subarray(0,t),t*n)},d_=({values:t,valueOffsets:e},n,r)=>a_(t,e,n,r),f_=({values:t,valueOffsets:e},n,r)=>a_(t,e,n,ap(r)),pk=(t,e,n)=>{t.type.unit===un.DAY?c_(t,e,n):u_(t,e,n)},h_=({values:t},e,n)=>{t[e]=BigInt(n/1e3)},p_=({values:t},e,n)=>{t[e]=BigInt(n)},m_=({values:t},e,n)=>{t[e]=BigInt(n*1e3)},y_=({values:t},e,n)=>{t[e]=BigInt(n*1e6)},mk=(t,e,n)=>{switch(t.type.unit){case Z.SECOND:return h_(t,e,n);case Z.MILLISECOND:return p_(t,e,n);case Z.MICROSECOND:return m_(t,e,n);case Z.NANOSECOND:return y_(t,e,n)}},g_=({values:t},e,n)=>{t[e]=n},v_=({values:t},e,n)=>{t[e]=n},w_=({values:t},e,n)=>{t[e]=n},__=({values:t},e,n)=>{t[e]=n},yk=(t,e,n)=>{switch(t.type.unit){case Z.SECOND:return g_(t,e,n);case Z.MILLISECOND:return v_(t,e,n);case Z.MICROSECOND:return w_(t,e,n);case Z.NANOSECOND:return __(t,e,n)}},gk=({values:t,stride:e},n,r)=>{t.set(r.subarray(0,e),e*n)},vk=(t,e,n)=>{const r=t.children[0],s=t.valueOffsets,i=dn.getVisitFn(r);if(Array.isArray(n))for(let o=-1,a=s[e],l=s[e+1];a<l;)i(r,a++,n[++o]);else for(let o=-1,a=s[e],l=s[e+1];a<l;)i(r,a++,n.get(++o))},wk=(t,e,n)=>{const r=t.children[0],{valueOffsets:s}=t,i=dn.getVisitFn(r);let{[e]:o,[e+1]:a}=s;const l=n instanceof Map?n.entries():Object.entries(n);for(const u of l)if(i(r,o,u),++o>=a)break},_k=(t,e)=>(n,r,s,i)=>r&&n(r,t,e[i]),xk=(t,e)=>(n,r,s,i)=>r&&n(r,t,e.get(i)),bk=(t,e)=>(n,r,s,i)=>r&&n(r,t,e.get(s.name)),Sk=(t,e)=>(n,r,s,i)=>r&&n(r,t,e[s.name]),Ik=(t,e,n)=>{const r=t.type.children.map(i=>dn.getVisitFn(i.type)),s=n instanceof Map?bk(e,n):n instanceof Se?xk(e,n):Array.isArray(n)?_k(e,n):Sk(e,n);t.type.children.forEach((i,o)=>s(r[o],t.children[o],i,o))},Ek=(t,e,n)=>{t.type.mode===mt.Dense?x_(t,e,n):b_(t,e,n)},x_=(t,e,n)=>{const r=t.type.typeIdToChildIndex[t.typeIds[e]],s=t.children[r];dn.visit(s,t.valueOffsets[e],n)},b_=(t,e,n)=>{const r=t.type.typeIdToChildIndex[t.typeIds[e]],s=t.children[r];dn.visit(s,e,n)},Nk=(t,e,n)=>{var r;(r=t.dictionary)===null||r===void 0||r.set(t.values[e],n)},kk=(t,e,n)=>{t.type.unit===zn.DAY_TIME?S_(t,e,n):I_(t,e,n)},S_=({values:t},e,n)=>{t.set(n.subarray(0,2),2*e)},I_=({values:t},e,n)=>{t[e]=n[0]*12+n[1]%12},E_=({values:t},e,n)=>{t[e]=n},N_=({values:t},e,n)=>{t[e]=n},k_=({values:t},e,n)=>{t[e]=n},A_=({values:t},e,n)=>{t[e]=n},Ak=(t,e,n)=>{switch(t.type.unit){case Z.SECOND:return E_(t,e,n);case Z.MILLISECOND:return N_(t,e,n);case Z.MICROSECOND:return k_(t,e,n);case Z.NANOSECOND:return A_(t,e,n)}},Tk=(t,e,n)=>{const{stride:r}=t,s=t.children[0],i=dn.getVisitFn(s);if(Array.isArray(n))for(let o=-1,a=e*r;++o<r;)i(s,a+o,n[o]);else for(let o=-1,a=e*r;++o<r;)i(s,a+o,n.get(o))};ee.prototype.visitBool=re(dk);ee.prototype.visitInt=re(dr);ee.prototype.visitInt8=re(dr);ee.prototype.visitInt16=re(dr);ee.prototype.visitInt32=re(dr);ee.prototype.visitInt64=re(dr);ee.prototype.visitUint8=re(dr);ee.prototype.visitUint16=re(dr);ee.prototype.visitUint32=re(dr);ee.prototype.visitUint64=re(dr);ee.prototype.visitFloat=re(fk);ee.prototype.visitFloat16=re(l_);ee.prototype.visitFloat32=re(dp);ee.prototype.visitFloat64=re(dp);ee.prototype.visitUtf8=re(f_);ee.prototype.visitLargeUtf8=re(f_);ee.prototype.visitBinary=re(d_);ee.prototype.visitLargeBinary=re(d_);ee.prototype.visitFixedSizeBinary=re(hk);ee.prototype.visitDate=re(pk);ee.prototype.visitDateDay=re(c_);ee.prototype.visitDateMillisecond=re(u_);ee.prototype.visitTimestamp=re(mk);ee.prototype.visitTimestampSecond=re(h_);ee.prototype.visitTimestampMillisecond=re(p_);ee.prototype.visitTimestampMicrosecond=re(m_);ee.prototype.visitTimestampNanosecond=re(y_);ee.prototype.visitTime=re(yk);ee.prototype.visitTimeSecond=re(g_);ee.prototype.visitTimeMillisecond=re(v_);ee.prototype.visitTimeMicrosecond=re(w_);ee.prototype.visitTimeNanosecond=re(__);ee.prototype.visitDecimal=re(gk);ee.prototype.visitList=re(vk);ee.prototype.visitStruct=re(Ik);ee.prototype.visitUnion=re(Ek);ee.prototype.visitDenseUnion=re(x_);ee.prototype.visitSparseUnion=re(b_);ee.prototype.visitDictionary=re(Nk);ee.prototype.visitInterval=re(kk);ee.prototype.visitIntervalDayTime=re(S_);ee.prototype.visitIntervalYearMonth=re(I_);ee.prototype.visitDuration=re(Ak);ee.prototype.visitDurationSecond=re(E_);ee.prototype.visitDurationMillisecond=re(N_);ee.prototype.visitDurationMicrosecond=re(k_);ee.prototype.visitDurationNanosecond=re(A_);ee.prototype.visitFixedSizeList=re(Tk);ee.prototype.visitMap=re(wk);const dn=new ee,gn=Symbol.for("parent"),pi=Symbol.for("rowIndex");class fp{constructor(e,n){return this[gn]=e,this[pi]=n,new Proxy(this,new Ck)}toArray(){return Object.values(this.toJSON())}toJSON(){const e=this[pi],n=this[gn],r=n.type.children,s={};for(let i=-1,o=r.length;++i<o;)s[r[i].name]=Lt.visit(n.children[i],e);return s}toString(){return`{${[...this].map(([e,n])=>`${Zo(e)}: ${Zo(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}[Symbol.iterator](){return new Ok(this[gn],this[pi])}}class Ok{constructor(e,n){this.childIndex=0,this.children=e.children,this.rowIndex=n,this.childFields=e.type.children,this.numChildren=this.childFields.length}[Symbol.iterator](){return this}next(){const e=this.childIndex;return e<this.numChildren?(this.childIndex=e+1,{done:!1,value:[this.childFields[e].name,Lt.visit(this.children[e],this.rowIndex)]}):{done:!0,value:null}}}Object.defineProperties(fp.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[gn]:{writable:!0,enumerable:!1,configurable:!1,value:null},[pi]:{writable:!0,enumerable:!1,configurable:!1,value:-1}});class Ck{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(e){return e[gn].type.children.map(n=>n.name)}has(e,n){return e[gn].type.children.findIndex(r=>r.name===n)!==-1}getOwnPropertyDescriptor(e,n){if(e[gn].type.children.findIndex(r=>r.name===n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(e,n){if(Reflect.has(e,n))return e[n];const r=e[gn].type.children.findIndex(s=>s.name===n);if(r!==-1){const s=Lt.visit(e[gn].children[r],e[pi]);return Reflect.set(e,n,s),s}}set(e,n,r){const s=e[gn].type.children.findIndex(i=>i.name===n);return s!==-1?(dn.visit(e[gn].children[s],e[pi],r),Reflect.set(e,n,r)):Reflect.has(e,n)||typeof n=="symbol"?Reflect.set(e,n,r):!1}}class J extends he{}function te(t){return(e,n)=>e.getValid(n)?t(e,n):null}const Rk=(t,e)=>864e5*t[e],jk=(t,e)=>null,T_=(t,e,n)=>{if(n+1>=e.length)return null;const r=Ce(e[n]),s=Ce(e[n+1]);return t.subarray(r,s)},Fk=({offset:t,values:e},n)=>{const r=t+n;return(e[r>>3]&1<<r%8)!==0},O_=({values:t},e)=>Rk(t,e),C_=({values:t},e)=>Ce(t[e]),Kr=({stride:t,values:e},n)=>e[t*n],Pk=({stride:t,values:e},n)=>o_(e[t*n]),R_=({values:t},e)=>t[e],Lk=({stride:t,values:e},n)=>e.subarray(t*n,t*(n+1)),j_=({values:t,valueOffsets:e},n)=>T_(t,e,n),F_=({values:t,valueOffsets:e},n)=>{const r=T_(t,e,n);return r!==null?Cf(r):null},Mk=({values:t},e)=>t[e],Dk=({type:t,values:e},n)=>t.precision!==ht.HALF?e[n]:o_(e[n]),Bk=(t,e)=>t.type.unit===un.DAY?O_(t,e):C_(t,e),P_=({values:t},e)=>1e3*Ce(t[e]),L_=({values:t},e)=>Ce(t[e]),M_=({values:t},e)=>Pw(t[e],BigInt(1e3)),D_=({values:t},e)=>Pw(t[e],BigInt(1e6)),Uk=(t,e)=>{switch(t.type.unit){case Z.SECOND:return P_(t,e);case Z.MILLISECOND:return L_(t,e);case Z.MICROSECOND:return M_(t,e);case Z.NANOSECOND:return D_(t,e)}},B_=({values:t},e)=>t[e],U_=({values:t},e)=>t[e],$_=({values:t},e)=>t[e],z_=({values:t},e)=>t[e],$k=(t,e)=>{switch(t.type.unit){case Z.SECOND:return B_(t,e);case Z.MILLISECOND:return U_(t,e);case Z.MICROSECOND:return $_(t,e);case Z.NANOSECOND:return z_(t,e)}},zk=({values:t,stride:e},n)=>up.decimal(t.subarray(e*n,e*(n+1))),Vk=(t,e)=>{const{valueOffsets:n,stride:r,children:s}=t,{[e*r]:i,[e*r+1]:o}=n,l=s[0].slice(i,o-i);return new Se([l])},Wk=(t,e)=>{const{valueOffsets:n,children:r}=t,{[e]:s,[e+1]:i}=n,o=r[0];return new hp(o.slice(s,i-s))},qk=(t,e)=>new fp(t,e),Hk=(t,e)=>t.type.mode===mt.Dense?V_(t,e):W_(t,e),V_=(t,e)=>{const n=t.type.typeIdToChildIndex[t.typeIds[e]],r=t.children[n];return Lt.visit(r,t.valueOffsets[e])},W_=(t,e)=>{const n=t.type.typeIdToChildIndex[t.typeIds[e]],r=t.children[n];return Lt.visit(r,e)},Qk=(t,e)=>{var n;return(n=t.dictionary)===null||n===void 0?void 0:n.get(t.values[e])},Kk=(t,e)=>t.type.unit===zn.DAY_TIME?q_(t,e):H_(t,e),q_=({values:t},e)=>t.subarray(2*e,2*(e+1)),H_=({values:t},e)=>{const n=t[e],r=new Int32Array(2);return r[0]=Math.trunc(n/12),r[1]=Math.trunc(n%12),r},Q_=({values:t},e)=>t[e],K_=({values:t},e)=>t[e],J_=({values:t},e)=>t[e],Y_=({values:t},e)=>t[e],Jk=(t,e)=>{switch(t.type.unit){case Z.SECOND:return Q_(t,e);case Z.MILLISECOND:return K_(t,e);case Z.MICROSECOND:return J_(t,e);case Z.NANOSECOND:return Y_(t,e)}},Yk=(t,e)=>{const{stride:n,children:r}=t,i=r[0].slice(e*n,n);return new Se([i])};J.prototype.visitNull=te(jk);J.prototype.visitBool=te(Fk);J.prototype.visitInt=te(Mk);J.prototype.visitInt8=te(Kr);J.prototype.visitInt16=te(Kr);J.prototype.visitInt32=te(Kr);J.prototype.visitInt64=te(R_);J.prototype.visitUint8=te(Kr);J.prototype.visitUint16=te(Kr);J.prototype.visitUint32=te(Kr);J.prototype.visitUint64=te(R_);J.prototype.visitFloat=te(Dk);J.prototype.visitFloat16=te(Pk);J.prototype.visitFloat32=te(Kr);J.prototype.visitFloat64=te(Kr);J.prototype.visitUtf8=te(F_);J.prototype.visitLargeUtf8=te(F_);J.prototype.visitBinary=te(j_);J.prototype.visitLargeBinary=te(j_);J.prototype.visitFixedSizeBinary=te(Lk);J.prototype.visitDate=te(Bk);J.prototype.visitDateDay=te(O_);J.prototype.visitDateMillisecond=te(C_);J.prototype.visitTimestamp=te(Uk);J.prototype.visitTimestampSecond=te(P_);J.prototype.visitTimestampMillisecond=te(L_);J.prototype.visitTimestampMicrosecond=te(M_);J.prototype.visitTimestampNanosecond=te(D_);J.prototype.visitTime=te($k);J.prototype.visitTimeSecond=te(B_);J.prototype.visitTimeMillisecond=te(U_);J.prototype.visitTimeMicrosecond=te($_);J.prototype.visitTimeNanosecond=te(z_);J.prototype.visitDecimal=te(zk);J.prototype.visitList=te(Vk);J.prototype.visitStruct=te(qk);J.prototype.visitUnion=te(Hk);J.prototype.visitDenseUnion=te(V_);J.prototype.visitSparseUnion=te(W_);J.prototype.visitDictionary=te(Qk);J.prototype.visitInterval=te(Kk);J.prototype.visitIntervalDayTime=te(q_);J.prototype.visitIntervalYearMonth=te(H_);J.prototype.visitDuration=te(Jk);J.prototype.visitDurationSecond=te(Q_);J.prototype.visitDurationMillisecond=te(K_);J.prototype.visitDurationMicrosecond=te(J_);J.prototype.visitDurationNanosecond=te(Y_);J.prototype.visitFixedSizeList=te(Yk);J.prototype.visitMap=te(Wk);const Lt=new J,Us=Symbol.for("keys"),mi=Symbol.for("vals"),$s=Symbol.for("kKeysAsStrings"),Mf=Symbol.for("_kKeysAsStrings");class hp{constructor(e){return this[Us]=new Se([e.children[0]]).memoize(),this[mi]=e.children[1],new Proxy(this,new Xk)}get[$s](){return this[Mf]||(this[Mf]=Array.from(this[Us].toArray(),String))}[Symbol.iterator](){return new Gk(this[Us],this[mi])}get size(){return this[Us].length}toArray(){return Object.values(this.toJSON())}toJSON(){const e=this[Us],n=this[mi],r={};for(let s=-1,i=e.length;++s<i;)r[e.get(s)]=Lt.visit(n,s);return r}toString(){return`{${[...this].map(([e,n])=>`${Zo(e)}: ${Zo(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}}class Gk{constructor(e,n){this.keys=e,this.vals=n,this.keyIndex=0,this.numKeys=e.length}[Symbol.iterator](){return this}next(){const e=this.keyIndex;return e===this.numKeys?{done:!0,value:null}:(this.keyIndex++,{done:!1,value:[this.keys.get(e),Lt.visit(this.vals,e)]})}}class Xk{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(e){return e[$s]}has(e,n){return e[$s].includes(n)}getOwnPropertyDescriptor(e,n){if(e[$s].indexOf(n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(e,n){if(Reflect.has(e,n))return e[n];const r=e[$s].indexOf(n);if(r!==-1){const s=Lt.visit(Reflect.get(e,mi),r);return Reflect.set(e,n,s),s}}set(e,n,r){const s=e[$s].indexOf(n);return s!==-1?(dn.visit(Reflect.get(e,mi),s,r),Reflect.set(e,n,r)):Reflect.has(e,n)?Reflect.set(e,n,r):!1}}Object.defineProperties(hp.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[Us]:{writable:!0,enumerable:!1,configurable:!1,value:null},[mi]:{writable:!0,enumerable:!1,configurable:!1,value:null},[Mf]:{writable:!0,enumerable:!1,configurable:!1,value:null}});let Hy;function G_(t,e,n,r){const{length:s=0}=t;let i=typeof e!="number"?0:e,o=typeof n!="number"?s:n;return i<0&&(i=(i%s+s)%s),o<0&&(o=(o%s+s)%s),o<i&&(Hy=i,i=o,o=Hy),o>s&&(o=s),r?r(t,i,o):[i,o]}const pp=(t,e)=>t<0?e+t:t,Qy=t=>t!==t;function Pi(t){if(typeof t!=="object"||t===null)return Qy(t)?Qy:n=>n===t;if(t instanceof Date){const n=t.valueOf();return r=>r instanceof Date?r.valueOf()===n:!1}return ArrayBuffer.isView(t)?n=>n?YN(t,n):!1:t instanceof Map?eA(t):Array.isArray(t)?Zk(t):t instanceof Se?tA(t):nA(t,!0)}function Zk(t){const e=[];for(let n=-1,r=t.length;++n<r;)e[n]=Pi(t[n]);return yu(e)}function eA(t){let e=-1;const n=[];for(const r of t.values())n[++e]=Pi(r);return yu(n)}function tA(t){const e=[];for(let n=-1,r=t.length;++n<r;)e[n]=Pi(t.get(n));return yu(e)}function nA(t,e=!1){const n=Object.keys(t);if(!e&&n.length===0)return()=>!1;const r=[];for(let s=-1,i=n.length;++s<i;)r[s]=Pi(t[n[s]]);return yu(r,n)}function yu(t,e){return n=>{if(!n||typeof n!="object")return!1;switch(n.constructor){case Array:return rA(t,n);case Map:return Ky(t,n,n.keys());case hp:case fp:case Object:case void 0:return Ky(t,n,e||Object.keys(n))}return n instanceof Se?sA(t,n):!1}}function rA(t,e){const n=t.length;if(e.length!==n)return!1;for(let r=-1;++r<n;)if(!t[r](e[r]))return!1;return!0}function sA(t,e){const n=t.length;if(e.length!==n)return!1;for(let r=-1;++r<n;)if(!t[r](e.get(r)))return!1;return!0}function Ky(t,e,n){const r=n[Symbol.iterator](),s=e instanceof Map?e.keys():Object.keys(e)[Symbol.iterator](),i=e instanceof Map?e.values():Object.values(e)[Symbol.iterator]();let o=0;const a=t.length;let l=i.next(),u=r.next(),d=s.next();for(;o<a&&!u.done&&!d.done&&!l.done&&!(u.value!==d.value||!t[o](l.value));++o,u=r.next(),d=s.next(),l=i.next());return o===a&&u.done&&d.done&&l.done?!0:(r.return&&r.return(),s.return&&s.return(),i.return&&i.return(),!1)}function X_(t,e,n,r){return(n&1<<r)!==0}function iA(t,e,n,r){return(n&1<<r)>>r}function Oc(t,e,n){const r=n.byteLength+7&-8;if(t>0||n.byteLength<r){const s=new Uint8Array(r);return s.set(t%8===0?n.subarray(t>>3):Cc(new mp(n,t,e,null,X_)).subarray(0,r)),s}return n}function Cc(t){const e=[];let n=0,r=0,s=0;for(const o of t)o&&(s|=1<<r),++r===8&&(e[n++]=s,s=r=0);(n===0||r>0)&&(e[n++]=s);const i=new Uint8Array(e.length+7&-8);return i.set(e),i}class mp{constructor(e,n,r,s,i){this.bytes=e,this.length=r,this.context=s,this.get=i,this.bit=n%8,this.byteIndex=n>>3,this.byte=e[this.byteIndex++],this.index=0}next(){return this.index<this.length?(this.bit===8&&(this.bit=0,this.byte=this.bytes[this.byteIndex++]),{value:this.get(this.context,this.index++,this.byte,this.bit++)}):{done:!0,value:null}}[Symbol.iterator](){return this}}function Df(t,e,n){if(n-e<=0)return 0;if(n-e<8){let i=0;for(const o of new mp(t,e,n-e,t,iA))i+=o;return i}const r=n>>3<<3,s=e+(e%8===0?0:8-e%8);return Df(t,e,s)+Df(t,r,n)+oA(t,s>>3,r-s>>3)}function oA(t,e,n){let r=0,s=Math.trunc(e);const i=new DataView(t.buffer,t.byteOffset,t.byteLength),o=n===void 0?t.byteLength:s+n;for(;o-s>=4;)r+=dd(i.getUint32(s)),s+=4;for(;o-s>=2;)r+=dd(i.getUint16(s)),s+=2;for(;o-s>=1;)r+=dd(i.getUint8(s)),s+=1;return r}function dd(t){let e=Math.trunc(t);return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),(e+(e>>>4)&252645135)*16843009>>>24}const aA=-1;class Ne{get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get nullable(){if(this._nullCount!==0){const{type:e}=this;return z.isSparseUnion(e)?this.children.some(n=>n.nullable):z.isDenseUnion(e)?this.children.some(n=>n.nullable):this.nullBitmap&&this.nullBitmap.byteLength>0}return!0}get byteLength(){let e=0;const{valueOffsets:n,values:r,nullBitmap:s,typeIds:i}=this;return n&&(e+=n.byteLength),r&&(e+=r.byteLength),s&&(e+=s.byteLength),i&&(e+=i.byteLength),this.children.reduce((o,a)=>o+a.byteLength,e)}get nullCount(){if(z.isUnion(this.type))return this.children.reduce((r,s)=>r+s.nullCount,0);let e=this._nullCount,n;return e<=aA&&(n=this.nullBitmap)&&(this._nullCount=e=n.length===0?0:this.length-Df(n,this.offset,this.offset+this.length)),e}constructor(e,n,r,s,i,o=[],a){this.type=e,this.children=o,this.dictionary=a,this.offset=Math.floor(Math.max(n||0,0)),this.length=Math.floor(Math.max(r||0,0)),this._nullCount=Math.floor(Math.max(s||0,-1));let l;i instanceof Ne?(this.stride=i.stride,this.values=i.values,this.typeIds=i.typeIds,this.nullBitmap=i.nullBitmap,this.valueOffsets=i.valueOffsets):(this.stride=Gn(e),i&&((l=i[0])&&(this.valueOffsets=l),(l=i[1])&&(this.values=l),(l=i[2])&&(this.nullBitmap=l),(l=i[3])&&(this.typeIds=l)))}getValid(e){const{type:n}=this;if(z.isUnion(n)){const r=n,s=this.children[r.typeIdToChildIndex[this.typeIds[e]]],i=r.mode===mt.Dense?this.valueOffsets[e]:e;return s.getValid(i)}if(this.nullable&&this.nullCount>0){const r=this.offset+e;return(this.nullBitmap[r>>3]&1<<r%8)!==0}return!0}setValid(e,n){let r;const{type:s}=this;if(z.isUnion(s)){const i=s,o=this.children[i.typeIdToChildIndex[this.typeIds[e]]],a=i.mode===mt.Dense?this.valueOffsets[e]:e;r=o.getValid(a),o.setValid(a,n)}else{let{nullBitmap:i}=this;const{offset:o,length:a}=this,l=o+e,u=1<<l%8,d=l>>3;(!i||i.byteLength<=d)&&(i=new Uint8Array((o+a+63&-64)>>3).fill(255),this.nullCount>0?(i.set(Oc(o,a,this.nullBitmap),0),Object.assign(this,{nullBitmap:i})):Object.assign(this,{nullBitmap:i,_nullCount:0}));const f=i[d];r=(f&u)!==0,i[d]=n?f|u:f&~u}return r!==!!n&&(this._nullCount=this.nullCount+(n?-1:1)),n}clone(e=this.type,n=this.offset,r=this.length,s=this._nullCount,i=this,o=this.children){return new Ne(e,n,r,s,i,o,this.dictionary)}slice(e,n){const{stride:r,typeId:s,children:i}=this,o=+(this._nullCount===0)-1,a=s===16?r:1,l=this._sliceBuffers(e,n,r,s);return this.clone(this.type,this.offset+e,n,o,l,i.length===0||this.valueOffsets?i:this._sliceChildren(i,a*e,a*n))}_changeLengthAndBackfillNullBitmap(e){if(this.typeId===w.Null)return this.clone(this.type,0,e,0);const{length:n,nullCount:r}=this,s=new Uint8Array((e+63&-64)>>3).fill(255,0,n>>3);s[n>>3]=(1<<n-(n&-8))-1,r>0&&s.set(Oc(this.offset,n,this.nullBitmap),0);const i=this.buffers;return i[Yn.VALIDITY]=s,this.clone(this.type,0,e,r+(e-n),i)}_sliceBuffers(e,n,r,s){let i;const{buffers:o}=this;return(i=o[Yn.TYPE])&&(o[Yn.TYPE]=i.subarray(e,e+n)),(i=o[Yn.OFFSET])&&(o[Yn.OFFSET]=i.subarray(e,e+n+1))||(i=o[Yn.DATA])&&(o[Yn.DATA]=s===6?i:i.subarray(r*e,r*(e+n))),o}_sliceChildren(e,n,r){return e.map(s=>s.slice(n,r))}}Ne.prototype.children=Object.freeze([]);class To extends he{visit(e){return this.getVisitFn(e.type).call(this,e)}visitNull(e){const{["type"]:n,["offset"]:r=0,["length"]:s=0}=e;return new Ne(n,r,s,s)}visitBool(e){const{["type"]:n,["offset"]:r=0}=e,s=ge(e.nullBitmap),i=Ae(n.ArrayType,e.data),{["length"]:o=i.length>>3,["nullCount"]:a=e.nullBitmap?-1:0}=e;return new Ne(n,r,o,a,[void 0,i,s])}visitInt(e){const{["type"]:n,["offset"]:r=0}=e,s=ge(e.nullBitmap),i=Ae(n.ArrayType,e.data),{["length"]:o=i.length,["nullCount"]:a=e.nullBitmap?-1:0}=e;return new Ne(n,r,o,a,[void 0,i,s])}visitFloat(e){const{["type"]:n,["offset"]:r=0}=e,s=ge(e.nullBitmap),i=Ae(n.ArrayType,e.data),{["length"]:o=i.length,["nullCount"]:a=e.nullBitmap?-1:0}=e;return new Ne(n,r,o,a,[void 0,i,s])}visitUtf8(e){const{["type"]:n,["offset"]:r=0}=e,s=ge(e.data),i=ge(e.nullBitmap),o=Qi(e.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:l=e.nullBitmap?-1:0}=e;return new Ne(n,r,a,l,[o,s,i])}visitLargeUtf8(e){const{["type"]:n,["offset"]:r=0}=e,s=ge(e.data),i=ge(e.nullBitmap),o=Py(e.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:l=e.nullBitmap?-1:0}=e;return new Ne(n,r,a,l,[o,s,i])}visitBinary(e){const{["type"]:n,["offset"]:r=0}=e,s=ge(e.data),i=ge(e.nullBitmap),o=Qi(e.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:l=e.nullBitmap?-1:0}=e;return new Ne(n,r,a,l,[o,s,i])}visitLargeBinary(e){const{["type"]:n,["offset"]:r=0}=e,s=ge(e.data),i=ge(e.nullBitmap),o=Py(e.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:l=e.nullBitmap?-1:0}=e;return new Ne(n,r,a,l,[o,s,i])}visitFixedSizeBinary(e){const{["type"]:n,["offset"]:r=0}=e,s=ge(e.nullBitmap),i=Ae(n.ArrayType,e.data),{["length"]:o=i.length/Gn(n),["nullCount"]:a=e.nullBitmap?-1:0}=e;return new Ne(n,r,o,a,[void 0,i,s])}visitDate(e){const{["type"]:n,["offset"]:r=0}=e,s=ge(e.nullBitmap),i=Ae(n.ArrayType,e.data),{["length"]:o=i.length/Gn(n),["nullCount"]:a=e.nullBitmap?-1:0}=e;return new Ne(n,r,o,a,[void 0,i,s])}visitTimestamp(e){const{["type"]:n,["offset"]:r=0}=e,s=ge(e.nullBitmap),i=Ae(n.ArrayType,e.data),{["length"]:o=i.length/Gn(n),["nullCount"]:a=e.nullBitmap?-1:0}=e;return new Ne(n,r,o,a,[void 0,i,s])}visitTime(e){const{["type"]:n,["offset"]:r=0}=e,s=ge(e.nullBitmap),i=Ae(n.ArrayType,e.data),{["length"]:o=i.length/Gn(n),["nullCount"]:a=e.nullBitmap?-1:0}=e;return new Ne(n,r,o,a,[void 0,i,s])}visitDecimal(e){const{["type"]:n,["offset"]:r=0}=e,s=ge(e.nullBitmap),i=Ae(n.ArrayType,e.data),{["length"]:o=i.length/Gn(n),["nullCount"]:a=e.nullBitmap?-1:0}=e;return new Ne(n,r,o,a,[void 0,i,s])}visitList(e){const{["type"]:n,["offset"]:r=0,["child"]:s}=e,i=ge(e.nullBitmap),o=Qi(e.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:l=e.nullBitmap?-1:0}=e;return new Ne(n,r,a,l,[o,void 0,i],[s])}visitStruct(e){const{["type"]:n,["offset"]:r=0,["children"]:s=[]}=e,i=ge(e.nullBitmap),{length:o=s.reduce((l,{length:u})=>Math.max(l,u),0),nullCount:a=e.nullBitmap?-1:0}=e;return new Ne(n,r,o,a,[void 0,void 0,i],s)}visitUnion(e){const{["type"]:n,["offset"]:r=0,["children"]:s=[]}=e,i=Ae(n.ArrayType,e.typeIds),{["length"]:o=i.length,["nullCount"]:a=-1}=e;if(z.isSparseUnion(n))return new Ne(n,r,o,a,[void 0,void 0,void 0,i],s);const l=Qi(e.valueOffsets);return new Ne(n,r,o,a,[l,void 0,void 0,i],s)}visitDictionary(e){const{["type"]:n,["offset"]:r=0}=e,s=ge(e.nullBitmap),i=Ae(n.indices.ArrayType,e.data),{["dictionary"]:o=new Se([new To().visit({type:n.dictionary})])}=e,{["length"]:a=i.length,["nullCount"]:l=e.nullBitmap?-1:0}=e;return new Ne(n,r,a,l,[void 0,i,s],[],o)}visitInterval(e){const{["type"]:n,["offset"]:r=0}=e,s=ge(e.nullBitmap),i=Ae(n.ArrayType,e.data),{["length"]:o=i.length/Gn(n),["nullCount"]:a=e.nullBitmap?-1:0}=e;return new Ne(n,r,o,a,[void 0,i,s])}visitDuration(e){const{["type"]:n,["offset"]:r=0}=e,s=ge(e.nullBitmap),i=Ae(n.ArrayType,e.data),{["length"]:o=i.length,["nullCount"]:a=e.nullBitmap?-1:0}=e;return new Ne(n,r,o,a,[void 0,i,s])}visitFixedSizeList(e){const{["type"]:n,["offset"]:r=0,["child"]:s=new To().visit({type:n.valueType})}=e,i=ge(e.nullBitmap),{["length"]:o=s.length/Gn(n),["nullCount"]:a=e.nullBitmap?-1:0}=e;return new Ne(n,r,o,a,[void 0,void 0,i],[s])}visitMap(e){const{["type"]:n,["offset"]:r=0,["child"]:s=new To().visit({type:n.childType})}=e,i=ge(e.nullBitmap),o=Qi(e.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:l=e.nullBitmap?-1:0}=e;return new Ne(n,r,a,l,[o,void 0,i],[s])}}const lA=new To;function pe(t){return lA.visit(t)}class Jy{constructor(e=0,n){this.numChunks=e,this.getChunkIterator=n,this.chunkIndex=0,this.chunkIterator=this.getChunkIterator(0)}next(){for(;this.chunkIndex<this.numChunks;){const e=this.chunkIterator.next();if(!e.done)return e;++this.chunkIndex<this.numChunks&&(this.chunkIterator=this.getChunkIterator(this.chunkIndex))}return{done:!0,value:null}}[Symbol.iterator](){return this}}function cA(t){return t.some(e=>e.nullable)}function Z_(t){return t.reduce((e,n)=>e+n.nullCount,0)}function ex(t){return t.reduce((e,n,r)=>(e[r+1]=e[r]+n.length,e),new Uint32Array(t.length+1))}function tx(t,e,n,r){const s=[];for(let i=-1,o=t.length;++i<o;){const a=t[i],l=e[i],{length:u}=a;if(l>=r)break;if(n>=l+u)continue;if(l>=n&&l+u<=r){s.push(a);continue}const d=Math.max(0,n-l),f=Math.min(r-l,u);s.push(a.slice(d,f-d))}return s.length===0&&s.push(t[0].slice(0,0)),s}function yp(t,e,n,r){let s=0,i=0,o=e.length-1;do{if(s>=o-1)return n<e[o]?r(t,s,n-e[s]):null;i=s+Math.trunc((o-s)*.5),n<e[i]?o=i:s=i}while(s<o)}function gp(t,e){return t.getValid(e)}function Rc(t){function e(n,r,s){return t(n[r],s)}return function(n){const r=this.data;return yp(r,this._offsets,n,e)}}function nx(t){let e;function n(r,s,i){return t(r[s],i,e)}return function(r,s){const i=this.data;e=s;const o=yp(i,this._offsets,r,n);return e=void 0,o}}function rx(t){let e;function n(r,s,i){let o=i,a=0,l=0;for(let u=s-1,d=r.length;++u<d;){const f=r[u];if(~(a=t(f,e,o)))return l+a;o=0,l+=f.length}return-1}return function(r,s){e=r;const i=this.data,o=typeof s!="number"?n(i,0,0):yp(i,this._offsets,s,n);return e=void 0,o}}class Y extends he{}function uA(t,e){return e===null&&t.length>0?0:-1}function dA(t,e){const{nullBitmap:n}=t;if(!n||t.nullCount<=0)return-1;let r=0;for(const s of new mp(n,t.offset+(e||0),t.length,n,X_)){if(!s)return r;++r}return-1}function ie(t,e,n){if(e===void 0)return-1;if(e===null)switch(t.typeId){case w.Union:break;case w.Dictionary:break;default:return dA(t,n)}const r=Lt.getVisitFn(t),s=Pi(e);for(let i=(n||0)-1,o=t.length;++i<o;)if(s(r(t,i)))return i;return-1}function sx(t,e,n){const r=Lt.getVisitFn(t),s=Pi(e);for(let i=(n||0)-1,o=t.length;++i<o;)if(s(r(t,i)))return i;return-1}Y.prototype.visitNull=uA;Y.prototype.visitBool=ie;Y.prototype.visitInt=ie;Y.prototype.visitInt8=ie;Y.prototype.visitInt16=ie;Y.prototype.visitInt32=ie;Y.prototype.visitInt64=ie;Y.prototype.visitUint8=ie;Y.prototype.visitUint16=ie;Y.prototype.visitUint32=ie;Y.prototype.visitUint64=ie;Y.prototype.visitFloat=ie;Y.prototype.visitFloat16=ie;Y.prototype.visitFloat32=ie;Y.prototype.visitFloat64=ie;Y.prototype.visitUtf8=ie;Y.prototype.visitLargeUtf8=ie;Y.prototype.visitBinary=ie;Y.prototype.visitLargeBinary=ie;Y.prototype.visitFixedSizeBinary=ie;Y.prototype.visitDate=ie;Y.prototype.visitDateDay=ie;Y.prototype.visitDateMillisecond=ie;Y.prototype.visitTimestamp=ie;Y.prototype.visitTimestampSecond=ie;Y.prototype.visitTimestampMillisecond=ie;Y.prototype.visitTimestampMicrosecond=ie;Y.prototype.visitTimestampNanosecond=ie;Y.prototype.visitTime=ie;Y.prototype.visitTimeSecond=ie;Y.prototype.visitTimeMillisecond=ie;Y.prototype.visitTimeMicrosecond=ie;Y.prototype.visitTimeNanosecond=ie;Y.prototype.visitDecimal=ie;Y.prototype.visitList=ie;Y.prototype.visitStruct=ie;Y.prototype.visitUnion=ie;Y.prototype.visitDenseUnion=sx;Y.prototype.visitSparseUnion=sx;Y.prototype.visitDictionary=ie;Y.prototype.visitInterval=ie;Y.prototype.visitIntervalDayTime=ie;Y.prototype.visitIntervalYearMonth=ie;Y.prototype.visitDuration=ie;Y.prototype.visitDurationSecond=ie;Y.prototype.visitDurationMillisecond=ie;Y.prototype.visitDurationMicrosecond=ie;Y.prototype.visitDurationNanosecond=ie;Y.prototype.visitFixedSizeList=ie;Y.prototype.visitMap=ie;const jc=new Y;class G extends he{}function ne(t){const{type:e}=t;if(t.nullCount===0&&t.stride===1&&(z.isInt(e)&&e.bitWidth!==64||z.isTime(e)&&e.bitWidth!==64||z.isFloat(e)&&e.precision!==ht.HALF))return new Jy(t.data.length,r=>{const s=t.data[r];return s.values.subarray(0,s.length)[Symbol.iterator]()});let n=0;return new Jy(t.data.length,r=>{const i=t.data[r].length,o=t.slice(n,n+i);return n+=i,new fA(o)})}class fA{constructor(e){this.vector=e,this.index=0}next(){return this.index<this.vector.length?{value:this.vector.get(this.index++)}:{done:!0,value:null}}[Symbol.iterator](){return this}}G.prototype.visitNull=ne;G.prototype.visitBool=ne;G.prototype.visitInt=ne;G.prototype.visitInt8=ne;G.prototype.visitInt16=ne;G.prototype.visitInt32=ne;G.prototype.visitInt64=ne;G.prototype.visitUint8=ne;G.prototype.visitUint16=ne;G.prototype.visitUint32=ne;G.prototype.visitUint64=ne;G.prototype.visitFloat=ne;G.prototype.visitFloat16=ne;G.prototype.visitFloat32=ne;G.prototype.visitFloat64=ne;G.prototype.visitUtf8=ne;G.prototype.visitLargeUtf8=ne;G.prototype.visitBinary=ne;G.prototype.visitLargeBinary=ne;G.prototype.visitFixedSizeBinary=ne;G.prototype.visitDate=ne;G.prototype.visitDateDay=ne;G.prototype.visitDateMillisecond=ne;G.prototype.visitTimestamp=ne;G.prototype.visitTimestampSecond=ne;G.prototype.visitTimestampMillisecond=ne;G.prototype.visitTimestampMicrosecond=ne;G.prototype.visitTimestampNanosecond=ne;G.prototype.visitTime=ne;G.prototype.visitTimeSecond=ne;G.prototype.visitTimeMillisecond=ne;G.prototype.visitTimeMicrosecond=ne;G.prototype.visitTimeNanosecond=ne;G.prototype.visitDecimal=ne;G.prototype.visitList=ne;G.prototype.visitStruct=ne;G.prototype.visitUnion=ne;G.prototype.visitDenseUnion=ne;G.prototype.visitSparseUnion=ne;G.prototype.visitDictionary=ne;G.prototype.visitInterval=ne;G.prototype.visitIntervalDayTime=ne;G.prototype.visitIntervalYearMonth=ne;G.prototype.visitDuration=ne;G.prototype.visitDurationSecond=ne;G.prototype.visitDurationMillisecond=ne;G.prototype.visitDurationMicrosecond=ne;G.prototype.visitDurationNanosecond=ne;G.prototype.visitFixedSizeList=ne;G.prototype.visitMap=ne;const vp=new G;var ix;const ox={},ax={};class Se{constructor(e){var n,r,s;const i=e[0]instanceof Se?e.flatMap(a=>a.data):e;if(i.length===0||i.some(a=>!(a instanceof Ne)))throw new TypeError("Vector constructor expects an Array of Data instances.");const o=(n=i[0])===null||n===void 0?void 0:n.type;switch(i.length){case 0:this._offsets=[0];break;case 1:{const{get:a,set:l,indexOf:u}=ox[o.typeId],d=i[0];this.isValid=f=>gp(d,f),this.get=f=>a(d,f),this.set=(f,m)=>l(d,f,m),this.indexOf=f=>u(d,f),this._offsets=[0,d.length];break}default:Object.setPrototypeOf(this,ax[o.typeId]),this._offsets=ex(i);break}this.data=i,this.type=o,this.stride=Gn(o),this.numChildren=(s=(r=o.children)===null||r===void 0?void 0:r.length)!==null&&s!==void 0?s:0,this.length=this._offsets.at(-1)}get byteLength(){return this.data.reduce((e,n)=>e+n.byteLength,0)}get nullable(){return cA(this.data)}get nullCount(){return Z_(this.data)}get ArrayType(){return this.type.ArrayType}get[Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}get VectorName(){return`${w[this.type.typeId]}Vector`}isValid(e){return!1}get(e){return null}at(e){return this.get(pp(e,this.length))}set(e,n){}indexOf(e,n){return-1}includes(e,n){return this.indexOf(e,n)>-1}[Symbol.iterator](){return vp.visit(this)}concat(...e){return new Se(this.data.concat(e.flatMap(n=>n.data).flat(Number.POSITIVE_INFINITY)))}slice(e,n){return new Se(G_(this,e,n,({data:r,_offsets:s},i,o)=>tx(r,s,i,o)))}toJSON(){return[...this]}toArray(){const{type:e,data:n,length:r,stride:s,ArrayType:i}=this;switch(e.typeId){case w.Int:case w.Float:case w.Decimal:case w.Time:case w.Timestamp:switch(n.length){case 0:return new i;case 1:return n[0].values.subarray(0,r*s);default:return n.reduce((o,{values:a,length:l})=>(o.array.set(a.subarray(0,l*s),o.offset),o.offset+=l*s,o),{array:new i(r*s),offset:0}).array}}return[...this]}toString(){return`[${[...this].join(",")}]`}getChild(e){var n;return this.getChildAt((n=this.type.children)===null||n===void 0?void 0:n.findIndex(r=>r.name===e))}getChildAt(e){return e>-1&&e<this.numChildren?new Se(this.data.map(({children:n})=>n[e])):null}get isMemoized(){return z.isDictionary(this.type)?this.data[0].dictionary.isMemoized:!1}memoize(){if(z.isDictionary(this.type)){const e=new Fc(this.data[0].dictionary),n=this.data.map(r=>{const s=r.clone();return s.dictionary=e,s});return new Se(n)}return new Fc(this)}unmemoize(){if(z.isDictionary(this.type)&&this.isMemoized){const e=this.data[0].dictionary.unmemoize(),n=this.data.map(r=>{const s=r.clone();return s.dictionary=e,s});return new Se(n)}return this}}ix=Symbol.toStringTag;Se[ix]=(t=>{t.type=z.prototype,t.data=[],t.length=0,t.stride=1,t.numChildren=0,t._offsets=new Uint32Array([0]),t[Symbol.isConcatSpreadable]=!0;const e=Object.keys(w).map(n=>w[n]).filter(n=>typeof n=="number"&&n!==w.NONE);for(const n of e){const r=Lt.getVisitFnByTypeId(n),s=dn.getVisitFnByTypeId(n),i=jc.getVisitFnByTypeId(n);ox[n]={get:r,set:s,indexOf:i},ax[n]=Object.create(t,{isValid:{value:Rc(gp)},get:{value:Rc(Lt.getVisitFnByTypeId(n))},set:{value:nx(dn.getVisitFnByTypeId(n))},indexOf:{value:rx(jc.getVisitFnByTypeId(n))}})}return"Vector"})(Se.prototype);class Fc extends Se{constructor(e){super(e.data);const n=this.get,r=this.set,s=this.slice,i=new Array(this.length);Object.defineProperty(this,"get",{value(o){const a=i[o];if(a!==void 0)return a;const l=n.call(this,o);return i[o]=l,l}}),Object.defineProperty(this,"set",{value(o,a){r.call(this,o,a),i[o]=a}}),Object.defineProperty(this,"slice",{value:(o,a)=>new Fc(s.call(this,o,a))}),Object.defineProperty(this,"isMemoized",{value:!0}),Object.defineProperty(this,"unmemoize",{value:()=>new Se(this.data)}),Object.defineProperty(this,"memoize",{value:()=>this})}}class Bf{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static sizeOf(){return 24}static createBlock(e,n,r,s){return e.prep(8,24),e.writeInt64(BigInt(s!=null?s:0)),e.pad(4),e.writeInt32(r),e.writeInt64(BigInt(n!=null?n:0)),e.offset()}}class Ut{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsFooter(e,n){return(n||new Ut).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsFooter(e,n){return e.setPosition(e.position()+Ee),(n||new Ut).__init(e.readInt32(e.position())+e.position(),e)}version(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):qe.V1}schema(e){const n=this.bb.__offset(this.bb_pos,6);return n?(e||new An).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}dictionaries(e,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new Bf).__init(this.bb.__vector(this.bb_pos+r)+e*24,this.bb):null}dictionariesLength(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}recordBatches(e,n){const r=this.bb.__offset(this.bb_pos,10);return r?(n||new Bf).__init(this.bb.__vector(this.bb_pos+r)+e*24,this.bb):null}recordBatchesLength(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__vector_len(this.bb_pos+e):0}customMetadata(e,n){const r=this.bb.__offset(this.bb_pos,12);return r?(n||new Xe).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+e*4),this.bb):null}customMetadataLength(){const e=this.bb.__offset(this.bb_pos,12);return e?this.bb.__vector_len(this.bb_pos+e):0}static startFooter(e){e.startObject(5)}static addVersion(e,n){e.addFieldInt16(0,n,qe.V1)}static addSchema(e,n){e.addFieldOffset(1,n,0)}static addDictionaries(e,n){e.addFieldOffset(2,n,0)}static startDictionariesVector(e,n){e.startVector(24,n,8)}static addRecordBatches(e,n){e.addFieldOffset(3,n,0)}static startRecordBatchesVector(e,n){e.startVector(24,n,8)}static addCustomMetadata(e,n){e.addFieldOffset(4,n,0)}static createCustomMetadataVector(e,n){e.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)e.addOffset(n[r]);return e.endVector()}static startCustomMetadataVector(e,n){e.startVector(4,n,4)}static endFooter(e){return e.endObject()}static finishFooterBuffer(e,n){e.finish(n)}static finishSizePrefixedFooterBuffer(e,n){e.finish(n,void 0,!0)}}class Ie{constructor(e=[],n,r,s=qe.V5){this.fields=e||[],this.metadata=n||new Map,r||(r=Uf(this.fields)),this.dictionaries=r,this.metadataVersion=s}get[Symbol.toStringTag](){return"Schema"}get names(){return this.fields.map(e=>e.name)}toString(){return`Schema<{ ${this.fields.map((e,n)=>`${n}: ${e}`).join(", ")} }>`}select(e){const n=new Set(e),r=this.fields.filter(s=>n.has(s.name));return new Ie(r,this.metadata)}selectAt(e){const n=e.map(r=>this.fields[r]).filter(Boolean);return new Ie(n,this.metadata)}assign(...e){const n=e[0]instanceof Ie?e[0]:Array.isArray(e[0])?new Ie(e[0]):new Ie(e),r=[...this.fields],s=qa(qa(new Map,this.metadata),n.metadata),i=n.fields.filter(a=>{const l=r.findIndex(u=>u.name===a.name);return~l?(r[l]=a.clone({metadata:qa(qa(new Map,r[l].metadata),a.metadata)}))&&!1:!0}),o=Uf(i,new Map);return new Ie([...r,...i],s,new Map([...this.dictionaries,...o]))}}Ie.prototype.fields=null;Ie.prototype.metadata=null;Ie.prototype.dictionaries=null;class Le{static new(...e){let[n,r,s,i]=e;return e[0]&&typeof e[0]=="object"&&({name:n}=e[0],r===void 0&&(r=e[0].type),s===void 0&&(s=e[0].nullable),i===void 0&&(i=e[0].metadata)),new Le(`${n}`,r,s,i)}constructor(e,n,r=!1,s){this.name=e,this.type=n,this.nullable=r,this.metadata=s||new Map}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}clone(...e){let[n,r,s,i]=e;return!e[0]||typeof e[0]!="object"?[n=this.name,r=this.type,s=this.nullable,i=this.metadata]=e:{name:n=this.name,type:r=this.type,nullable:s=this.nullable,metadata:i=this.metadata}=e[0],Le.new(n,r,s,i)}}Le.prototype.type=null;Le.prototype.name=null;Le.prototype.nullable=null;Le.prototype.metadata=null;function qa(t,e){return new Map([...t||new Map,...e||new Map])}function Uf(t,e=new Map){for(let n=-1,r=t.length;++n<r;){const i=t[n].type;if(z.isDictionary(i)){if(!e.has(i.id))e.set(i.id,i.dictionary);else if(e.get(i.id)!==i.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}i.children&&i.children.length>0&&Uf(i.children,e)}return e}var hA=Cw,pA=Ni;class ra{static decode(e){e=new pA(ge(e));const n=Ut.getRootAsFooter(e),r=Ie.decode(n.schema(),new Map,n.version());return new mA(r,n)}static encode(e){const n=new hA,r=Ie.encode(n,e.schema);Ut.startRecordBatchesVector(n,e.numRecordBatches);for(const o of[...e.recordBatches()].slice().reverse())zr.encode(n,o);const s=n.endVector();Ut.startDictionariesVector(n,e.numDictionaries);for(const o of[...e.dictionaryBatches()].slice().reverse())zr.encode(n,o);const i=n.endVector();return Ut.startFooter(n),Ut.addSchema(n,r),Ut.addVersion(n,qe.V5),Ut.addRecordBatches(n,s),Ut.addDictionaries(n,i),Ut.finishFooterBuffer(n,Ut.endFooter(n)),n.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}constructor(e,n=qe.V5,r,s){this.schema=e,this.version=n,r&&(this._recordBatches=r),s&&(this._dictionaryBatches=s)}*recordBatches(){for(let e,n=-1,r=this.numRecordBatches;++n<r;)(e=this.getRecordBatch(n))&&(yield e)}*dictionaryBatches(){for(let e,n=-1,r=this.numDictionaries;++n<r;)(e=this.getDictionaryBatch(n))&&(yield e)}getRecordBatch(e){return e>=0&&e<this.numRecordBatches&&this._recordBatches[e]||null}getDictionaryBatch(e){return e>=0&&e<this.numDictionaries&&this._dictionaryBatches[e]||null}}class mA extends ra{get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}constructor(e,n){super(e,n.version()),this._footer=n}getRecordBatch(e){if(e>=0&&e<this.numRecordBatches){const n=this._footer.recordBatches(e);if(n)return zr.decode(n)}return null}getDictionaryBatch(e){if(e>=0&&e<this.numDictionaries){const n=this._footer.dictionaries(e);if(n)return zr.decode(n)}return null}}class zr{static decode(e){return new zr(e.metaDataLength(),e.bodyLength(),e.offset())}static encode(e,n){const{metaDataLength:r}=n,s=BigInt(n.offset),i=BigInt(n.bodyLength);return Bf.createBlock(e,s,r,i)}constructor(e,n,r){this.metaDataLength=e,this.offset=Ce(r),this.bodyLength=Ce(n)}}const Be=Object.freeze({done:!0,value:void 0});class Yy{constructor(e){this._json=e}get schema(){return this._json.schema}get batches(){return this._json.batches||[]}get dictionaries(){return this._json.dictionaries||[]}}class wp{tee(){return this._getDOMStream().tee()}pipe(e,n){return this._getNodeStream().pipe(e,n)}pipeTo(e,n){return this._getDOMStream().pipeTo(e,n)}pipeThrough(e,n){return this._getDOMStream().pipeThrough(e,n)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}}class yA extends wp{constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise(e=>this._closedPromiseResolve=e)}get closed(){return this._closedPromise}cancel(e){return ae(this,void 0,void 0,function*(){yield this.return(e)})}write(e){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(e):this.resolvers.shift().resolve({done:!1,value:e}))}abort(e){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:e}:this.resolvers.shift().reject({done:!0,value:e}))}close(){if(this._closedPromiseResolve){const{resolvers:e}=this;for(;e.length>0;)e.shift().resolve(Be);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(e){return Xt.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,e)}toNodeStream(e){return Xt.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,e)}throw(e){return ae(this,void 0,void 0,function*(){return yield this.abort(e),Be})}return(e){return ae(this,void 0,void 0,function*(){return yield this.close(),Be})}read(e){return ae(this,void 0,void 0,function*(){return(yield this.next(e,"read")).value})}peek(e){return ae(this,void 0,void 0,function*(){return(yield this.next(e,"peek")).value})}next(...e){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise((n,r)=>{this.resolvers.push({resolve:n,reject:r})}):Promise.resolve(Be)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw new Error("AsyncQueue is closed")}}class Nl extends yA{write(e){if((e=ge(e)).byteLength>0)return super.write(e)}toString(e=!1){return e?Cf(this.toUint8Array(!0)):this.toUint8Array(!1).then(Cf)}toUint8Array(e=!1){return e?$n(this._values)[0]:ae(this,void 0,void 0,function*(){var n,r,s,i;const o=[];let a=0;try{for(var l=!0,u=ds(this),d;d=yield u.next(),n=d.done,!n;l=!0){i=d.value,l=!1;const f=i;o.push(f),a+=f.byteLength}}catch(f){r={error:f}}finally{try{!l&&!n&&(s=u.return)&&(yield s.call(u))}finally{if(r)throw r.error}}return $n(o,a)[0]})}}class Pc{constructor(e){e&&(this.source=new gA(Xt.fromIterable(e)))}[Symbol.iterator](){return this}next(e){return this.source.next(e)}throw(e){return this.source.throw(e)}return(e){return this.source.return(e)}peek(e){return this.source.peek(e)}read(e){return this.source.read(e)}}class Ti{constructor(e){e instanceof Ti?this.source=e.source:e instanceof Nl?this.source=new Gr(Xt.fromAsyncIterable(e)):kw(e)?this.source=new Gr(Xt.fromNodeStream(e)):lp(e)?this.source=new Gr(Xt.fromDOMStream(e)):Nw(e)?this.source=new Gr(Xt.fromDOMStream(e.body)):pa(e)?this.source=new Gr(Xt.fromIterable(e)):gs(e)?this.source=new Gr(Xt.fromAsyncIterable(e)):Fi(e)&&(this.source=new Gr(Xt.fromAsyncIterable(e)))}[Symbol.asyncIterator](){return this}next(e){return this.source.next(e)}throw(e){return this.source.throw(e)}return(e){return this.source.return(e)}get closed(){return this.source.closed}cancel(e){return this.source.cancel(e)}peek(e){return this.source.peek(e)}read(e){return this.source.read(e)}}class gA{constructor(e){this.source=e}cancel(e){this.return(e)}peek(e){return this.next(e,"peek").value}read(e){return this.next(e,"read").value}next(e,n="read"){return this.source.next({cmd:n,size:e})}throw(e){return Object.create(this.source.throw&&this.source.throw(e)||Be)}return(e){return Object.create(this.source.return&&this.source.return(e)||Be)}}class Gr{constructor(e){this.source=e,this._closedPromise=new Promise(n=>this._closedPromiseResolve=n)}cancel(e){return ae(this,void 0,void 0,function*(){yield this.return(e)})}get closed(){return this._closedPromise}read(e){return ae(this,void 0,void 0,function*(){return(yield this.next(e,"read")).value})}peek(e){return ae(this,void 0,void 0,function*(){return(yield this.next(e,"peek")).value})}next(e){return ae(this,arguments,void 0,function*(n,r="read"){return yield this.source.next({cmd:r,size:n})})}throw(e){return ae(this,void 0,void 0,function*(){const n=this.source.throw&&(yield this.source.throw(e))||Be;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(n)})}return(e){return ae(this,void 0,void 0,function*(){const n=this.source.return&&(yield this.source.return(e))||Be;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(n)})}}class Gy extends Pc{constructor(e,n){super(),this.position=0,this.buffer=ge(e),this.size=n===void 0?this.buffer.byteLength:n}readInt32(e){const{buffer:n,byteOffset:r}=this.readAt(e,4);return new DataView(n,r).getInt32(0,!0)}seek(e){return this.position=Math.min(e,this.size),e<this.size}read(e){const{buffer:n,size:r,position:s}=this;return n&&s<r?(typeof e!="number"&&(e=Number.POSITIVE_INFINITY),this.position=Math.min(r,s+Math.min(r-s,e)),n.subarray(s,this.position)):null}readAt(e,n){const r=this.buffer,s=Math.min(this.size,e+n);return r?r.subarray(e,s):new Uint8Array(n)}close(){this.buffer&&(this.buffer=null)}throw(e){return this.close(),{done:!0,value:e}}return(e){return this.close(),{done:!0,value:e}}}class Lc extends Ti{constructor(e,n){super(),this.position=0,this._handle=e,typeof n=="number"?this.size=n:this._pending=ae(this,void 0,void 0,function*(){this.size=(yield e.stat()).size,delete this._pending})}readInt32(e){return ae(this,void 0,void 0,function*(){const{buffer:n,byteOffset:r}=yield this.readAt(e,4);return new DataView(n,r).getInt32(0,!0)})}seek(e){return ae(this,void 0,void 0,function*(){return this._pending&&(yield this._pending),this.position=Math.min(e,this.size),e<this.size})}read(e){return ae(this,void 0,void 0,function*(){this._pending&&(yield this._pending);const{_handle:n,size:r,position:s}=this;if(n&&s<r){typeof e!="number"&&(e=Number.POSITIVE_INFINITY);let i=s,o=0,a=0;const l=Math.min(r,i+Math.min(r-i,e)),u=new Uint8Array(Math.max(0,(this.position=l)-i));for(;(i+=a)<l&&(o+=a)<u.byteLength;)({bytesRead:a}=yield n.read(u,o,u.byteLength-o,i));return u}return null})}readAt(e,n){return ae(this,void 0,void 0,function*(){this._pending&&(yield this._pending);const{_handle:r,size:s}=this;if(r&&e+n<s){const i=Math.min(s,e+n),o=new Uint8Array(i-e);return(yield r.read(o,0,n,e)).buffer}return new Uint8Array(n)})}close(){return ae(this,void 0,void 0,function*(){const e=this._handle;this._handle=null,e&&(yield e.close())})}throw(e){return ae(this,void 0,void 0,function*(){return yield this.close(),{done:!0,value:e}})}return(e){return ae(this,void 0,void 0,function*(){return yield this.close(),{done:!0,value:e}})}}const vA=65536;function si(t){return t<0&&(t=4294967295+t+1),`0x${t.toString(16)}`}const Oi=8,_p=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8];class lx{constructor(e){this.buffer=e}high(){return this.buffer[1]}low(){return this.buffer[0]}_times(e){const n=new Uint32Array([this.buffer[1]>>>16,this.buffer[1]&65535,this.buffer[0]>>>16,this.buffer[0]&65535]),r=new Uint32Array([e.buffer[1]>>>16,e.buffer[1]&65535,e.buffer[0]>>>16,e.buffer[0]&65535]);let s=n[3]*r[3];this.buffer[0]=s&65535;let i=s>>>16;return s=n[2]*r[3],i+=s,s=n[3]*r[2]>>>0,i+=s,this.buffer[0]+=i<<16,this.buffer[1]=i>>>0<s?vA:0,this.buffer[1]+=i>>>16,this.buffer[1]+=n[1]*r[3]+n[2]*r[2]+n[3]*r[1],this.buffer[1]+=n[0]*r[3]+n[1]*r[2]+n[2]*r[1]+n[3]*r[0]<<16,this}_plus(e){const n=this.buffer[0]+e.buffer[0]>>>0;this.buffer[1]+=e.buffer[1],n<this.buffer[0]>>>0&&++this.buffer[1],this.buffer[0]=n}lessThan(e){return this.buffer[1]<e.buffer[1]||this.buffer[1]===e.buffer[1]&&this.buffer[0]<e.buffer[0]}equals(e){return this.buffer[1]===e.buffer[1]&&this.buffer[0]==e.buffer[0]}greaterThan(e){return e.lessThan(this)}hex(){return`${si(this.buffer[1])} ${si(this.buffer[0])}`}}class ke extends lx{times(e){return this._times(e),this}plus(e){return this._plus(e),this}static from(e,n=new Uint32Array(2)){return ke.fromString(typeof e=="string"?e:e.toString(),n)}static fromNumber(e,n=new Uint32Array(2)){return ke.fromString(e.toString(),n)}static fromString(e,n=new Uint32Array(2)){const r=e.length,s=new ke(n);for(let i=0;i<r;){const o=Oi<r-i?Oi:r-i,a=new ke(new Uint32Array([Number.parseInt(e.slice(i,i+o),10),0])),l=new ke(new Uint32Array([_p[o],0]));s.times(l),s.plus(a),i+=o}return s}static convertArray(e){const n=new Uint32Array(e.length*2);for(let r=-1,s=e.length;++r<s;)ke.from(e[r],new Uint32Array(n.buffer,n.byteOffset+2*r*4,2));return n}static multiply(e,n){return new ke(new Uint32Array(e.buffer)).times(n)}static add(e,n){return new ke(new Uint32Array(e.buffer)).plus(n)}}class Nt extends lx{negate(){return this.buffer[0]=~this.buffer[0]+1,this.buffer[1]=~this.buffer[1],this.buffer[0]==0&&++this.buffer[1],this}times(e){return this._times(e),this}plus(e){return this._plus(e),this}lessThan(e){const n=this.buffer[1]<<0,r=e.buffer[1]<<0;return n<r||n===r&&this.buffer[0]<e.buffer[0]}static from(e,n=new Uint32Array(2)){return Nt.fromString(typeof e=="string"?e:e.toString(),n)}static fromNumber(e,n=new Uint32Array(2)){return Nt.fromString(e.toString(),n)}static fromString(e,n=new Uint32Array(2)){const r=e.startsWith("-"),s=e.length,i=new Nt(n);for(let o=r?1:0;o<s;){const a=Oi<s-o?Oi:s-o,l=new Nt(new Uint32Array([Number.parseInt(e.slice(o,o+a),10),0])),u=new Nt(new Uint32Array([_p[a],0]));i.times(u),i.plus(l),o+=a}return r?i.negate():i}static convertArray(e){const n=new Uint32Array(e.length*2);for(let r=-1,s=e.length;++r<s;)Nt.from(e[r],new Uint32Array(n.buffer,n.byteOffset+2*r*4,2));return n}static multiply(e,n){return new Nt(new Uint32Array(e.buffer)).times(n)}static add(e,n){return new Nt(new Uint32Array(e.buffer)).plus(n)}}class Tn{constructor(e){this.buffer=e}high(){return new Nt(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2))}low(){return new Nt(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset,2))}negate(){return this.buffer[0]=~this.buffer[0]+1,this.buffer[1]=~this.buffer[1],this.buffer[2]=~this.buffer[2],this.buffer[3]=~this.buffer[3],this.buffer[0]==0&&++this.buffer[1],this.buffer[1]==0&&++this.buffer[2],this.buffer[2]==0&&++this.buffer[3],this}times(e){const n=new ke(new Uint32Array([this.buffer[3],0])),r=new ke(new Uint32Array([this.buffer[2],0])),s=new ke(new Uint32Array([this.buffer[1],0])),i=new ke(new Uint32Array([this.buffer[0],0])),o=new ke(new Uint32Array([e.buffer[3],0])),a=new ke(new Uint32Array([e.buffer[2],0])),l=new ke(new Uint32Array([e.buffer[1],0])),u=new ke(new Uint32Array([e.buffer[0],0]));let d=ke.multiply(i,u);this.buffer[0]=d.low();const f=new ke(new Uint32Array([d.high(),0]));return d=ke.multiply(s,u),f.plus(d),d=ke.multiply(i,l),f.plus(d),this.buffer[1]=f.low(),this.buffer[3]=f.lessThan(d)?1:0,this.buffer[2]=f.high(),new ke(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2)).plus(ke.multiply(r,u)).plus(ke.multiply(s,l)).plus(ke.multiply(i,a)),this.buffer[3]+=ke.multiply(n,u).plus(ke.multiply(r,l)).plus(ke.multiply(s,a)).plus(ke.multiply(i,o)).low(),this}plus(e){const n=new Uint32Array(4);return n[3]=this.buffer[3]+e.buffer[3]>>>0,n[2]=this.buffer[2]+e.buffer[2]>>>0,n[1]=this.buffer[1]+e.buffer[1]>>>0,n[0]=this.buffer[0]+e.buffer[0]>>>0,n[0]<this.buffer[0]>>>0&&++n[1],n[1]<this.buffer[1]>>>0&&++n[2],n[2]<this.buffer[2]>>>0&&++n[3],this.buffer[3]=n[3],this.buffer[2]=n[2],this.buffer[1]=n[1],this.buffer[0]=n[0],this}hex(){return`${si(this.buffer[3])} ${si(this.buffer[2])} ${si(this.buffer[1])} ${si(this.buffer[0])}`}static multiply(e,n){return new Tn(new Uint32Array(e.buffer)).times(n)}static add(e,n){return new Tn(new Uint32Array(e.buffer)).plus(n)}static from(e,n=new Uint32Array(4)){return Tn.fromString(typeof e=="string"?e:e.toString(),n)}static fromNumber(e,n=new Uint32Array(4)){return Tn.fromString(e.toString(),n)}static fromString(e,n=new Uint32Array(4)){const r=e.startsWith("-"),s=e.length,i=new Tn(n);for(let o=r?1:0;o<s;){const a=Oi<s-o?Oi:s-o,l=new Tn(new Uint32Array([Number.parseInt(e.slice(o,o+a),10),0,0,0])),u=new Tn(new Uint32Array([_p[a],0,0,0]));i.times(u),i.plus(l),o+=a}return r?i.negate():i}static convertArray(e){const n=new Uint32Array(e.length*4);for(let r=-1,s=e.length;++r<s;)Tn.from(e[r],new Uint32Array(n.buffer,n.byteOffset+4*4*r,4));return n}}class cx extends he{constructor(e,n,r,s,i=qe.V5){super(),this.nodesIndex=-1,this.buffersIndex=-1,this.bytes=e,this.nodes=n,this.buffers=r,this.dictionaries=s,this.metadataVersion=i}visit(e){return super.visit(e instanceof Le?e.type:e)}visitNull(e,{length:n}=this.nextFieldNode()){return pe({type:e,length:n})}visitBool(e,{length:n,nullCount:r}=this.nextFieldNode()){return pe({type:e,length:n,nullCount:r,nullBitmap:this.readNullBitmap(e,r),data:this.readData(e)})}visitInt(e,{length:n,nullCount:r}=this.nextFieldNode()){return pe({type:e,length:n,nullCount:r,nullBitmap:this.readNullBitmap(e,r),data:this.readData(e)})}visitFloat(e,{length:n,nullCount:r}=this.nextFieldNode()){return pe({type:e,length:n,nullCount:r,nullBitmap:this.readNullBitmap(e,r),data:this.readData(e)})}visitUtf8(e,{length:n,nullCount:r}=this.nextFieldNode()){return pe({type:e,length:n,nullCount:r,nullBitmap:this.readNullBitmap(e,r),valueOffsets:this.readOffsets(e),data:this.readData(e)})}visitLargeUtf8(e,{length:n,nullCount:r}=this.nextFieldNode()){return pe({type:e,length:n,nullCount:r,nullBitmap:this.readNullBitmap(e,r),valueOffsets:this.readOffsets(e),data:this.readData(e)})}visitBinary(e,{length:n,nullCount:r}=this.nextFieldNode()){return pe({type:e,length:n,nullCount:r,nullBitmap:this.readNullBitmap(e,r),valueOffsets:this.readOffsets(e),data:this.readData(e)})}visitLargeBinary(e,{length:n,nullCount:r}=this.nextFieldNode()){return pe({type:e,length:n,nullCount:r,nullBitmap:this.readNullBitmap(e,r),valueOffsets:this.readOffsets(e),data:this.readData(e)})}visitFixedSizeBinary(e,{length:n,nullCount:r}=this.nextFieldNode()){return pe({type:e,length:n,nullCount:r,nullBitmap:this.readNullBitmap(e,r),data:this.readData(e)})}visitDate(e,{length:n,nullCount:r}=this.nextFieldNode()){return pe({type:e,length:n,nullCount:r,nullBitmap:this.readNullBitmap(e,r),data:this.readData(e)})}visitTimestamp(e,{length:n,nullCount:r}=this.nextFieldNode()){return pe({type:e,length:n,nullCount:r,nullBitmap:this.readNullBitmap(e,r),data:this.readData(e)})}visitTime(e,{length:n,nullCount:r}=this.nextFieldNode()){return pe({type:e,length:n,nullCount:r,nullBitmap:this.readNullBitmap(e,r),data:this.readData(e)})}visitDecimal(e,{length:n,nullCount:r}=this.nextFieldNode()){return pe({type:e,length:n,nullCount:r,nullBitmap:this.readNullBitmap(e,r),data:this.readData(e)})}visitList(e,{length:n,nullCount:r}=this.nextFieldNode()){return pe({type:e,length:n,nullCount:r,nullBitmap:this.readNullBitmap(e,r),valueOffsets:this.readOffsets(e),child:this.visit(e.children[0])})}visitStruct(e,{length:n,nullCount:r}=this.nextFieldNode()){return pe({type:e,length:n,nullCount:r,nullBitmap:this.readNullBitmap(e,r),children:this.visitMany(e.children)})}visitUnion(e,{length:n,nullCount:r}=this.nextFieldNode()){return this.metadataVersion<qe.V5&&this.readNullBitmap(e,r),e.mode===mt.Sparse?this.visitSparseUnion(e,{length:n,nullCount:r}):this.visitDenseUnion(e,{length:n,nullCount:r})}visitDenseUnion(e,{length:n,nullCount:r}=this.nextFieldNode()){return pe({type:e,length:n,nullCount:r,typeIds:this.readTypeIds(e),valueOffsets:this.readOffsets(e),children:this.visitMany(e.children)})}visitSparseUnion(e,{length:n,nullCount:r}=this.nextFieldNode()){return pe({type:e,length:n,nullCount:r,typeIds:this.readTypeIds(e),children:this.visitMany(e.children)})}visitDictionary(e,{length:n,nullCount:r}=this.nextFieldNode()){return pe({type:e,length:n,nullCount:r,nullBitmap:this.readNullBitmap(e,r),data:this.readData(e.indices),dictionary:this.readDictionary(e)})}visitInterval(e,{length:n,nullCount:r}=this.nextFieldNode()){return pe({type:e,length:n,nullCount:r,nullBitmap:this.readNullBitmap(e,r),data:this.readData(e)})}visitDuration(e,{length:n,nullCount:r}=this.nextFieldNode()){return pe({type:e,length:n,nullCount:r,nullBitmap:this.readNullBitmap(e,r),data:this.readData(e)})}visitFixedSizeList(e,{length:n,nullCount:r}=this.nextFieldNode()){return pe({type:e,length:n,nullCount:r,nullBitmap:this.readNullBitmap(e,r),child:this.visit(e.children[0])})}visitMap(e,{length:n,nullCount:r}=this.nextFieldNode()){return pe({type:e,length:n,nullCount:r,nullBitmap:this.readNullBitmap(e,r),valueOffsets:this.readOffsets(e),child:this.visit(e.children[0])})}nextFieldNode(){return this.nodes[++this.nodesIndex]}nextBufferRange(){return this.buffers[++this.buffersIndex]}readNullBitmap(e,n,r=this.nextBufferRange()){return n>0&&this.readData(e,r)||new Uint8Array(0)}readOffsets(e,n){return this.readData(e,n)}readTypeIds(e,n){return this.readData(e,n)}readData(e,{length:n,offset:r}=this.nextBufferRange()){return this.bytes.subarray(r,r+n)}readDictionary(e){return this.dictionaries.get(e.id)}}class wA extends cx{constructor(e,n,r,s,i){super(new Uint8Array(0),n,r,s,i),this.sources=e}readNullBitmap(e,n,{offset:r}=this.nextBufferRange()){return n<=0?new Uint8Array(0):Cc(this.sources[r])}readOffsets(e,{offset:n}=this.nextBufferRange()){return Ae(Uint8Array,Ae(e.OffsetArrayType,this.sources[n]))}readTypeIds(e,{offset:n}=this.nextBufferRange()){return Ae(Uint8Array,Ae(e.ArrayType,this.sources[n]))}readData(e,{offset:n}=this.nextBufferRange()){const{sources:r}=this;return z.isTimestamp(e)||(z.isInt(e)||z.isTime(e))&&e.bitWidth===64||z.isDuration(e)||z.isDate(e)&&e.unit===un.MILLISECOND?Ae(Uint8Array,Nt.convertArray(r[n])):z.isDecimal(e)?Ae(Uint8Array,Tn.convertArray(r[n])):z.isBinary(e)||z.isLargeBinary(e)||z.isFixedSizeBinary(e)?_A(r[n]):z.isBool(e)?Cc(r[n]):z.isUtf8(e)||z.isLargeUtf8(e)?ap(r[n].join("")):Ae(Uint8Array,Ae(e.ArrayType,r[n].map(s=>+s)))}}function _A(t){const e=t.join(""),n=new Uint8Array(e.length/2);for(let r=0;r<e.length;r+=2)n[r>>1]=Number.parseInt(e.slice(r,r+2),16);return n}class X extends he{compareSchemas(e,n){return e===n||n instanceof e.constructor&&this.compareManyFields(e.fields,n.fields)}compareManyFields(e,n){return e===n||Array.isArray(e)&&Array.isArray(n)&&e.length===n.length&&e.every((r,s)=>this.compareFields(r,n[s]))}compareFields(e,n){return e===n||n instanceof e.constructor&&e.name===n.name&&e.nullable===n.nullable&&this.visit(e.type,n.type)}}function Et(t,e){return e instanceof t.constructor}function bs(t,e){return t===e||Et(t,e)}function fr(t,e){return t===e||Et(t,e)&&t.bitWidth===e.bitWidth&&t.isSigned===e.isSigned}function gu(t,e){return t===e||Et(t,e)&&t.precision===e.precision}function xA(t,e){return t===e||Et(t,e)&&t.byteWidth===e.byteWidth}function xp(t,e){return t===e||Et(t,e)&&t.unit===e.unit}function ma(t,e){return t===e||Et(t,e)&&t.unit===e.unit&&t.timezone===e.timezone}function ya(t,e){return t===e||Et(t,e)&&t.unit===e.unit&&t.bitWidth===e.bitWidth}function bA(t,e){return t===e||Et(t,e)&&t.children.length===e.children.length&&Vr.compareManyFields(t.children,e.children)}function SA(t,e){return t===e||Et(t,e)&&t.children.length===e.children.length&&Vr.compareManyFields(t.children,e.children)}function bp(t,e){return t===e||Et(t,e)&&t.mode===e.mode&&t.typeIds.every((n,r)=>n===e.typeIds[r])&&Vr.compareManyFields(t.children,e.children)}function IA(t,e){return t===e||Et(t,e)&&t.id===e.id&&t.isOrdered===e.isOrdered&&Vr.visit(t.indices,e.indices)&&Vr.visit(t.dictionary,e.dictionary)}function Sp(t,e){return t===e||Et(t,e)&&t.unit===e.unit}function ga(t,e){return t===e||Et(t,e)&&t.unit===e.unit}function EA(t,e){return t===e||Et(t,e)&&t.listSize===e.listSize&&t.children.length===e.children.length&&Vr.compareManyFields(t.children,e.children)}function NA(t,e){return t===e||Et(t,e)&&t.keysSorted===e.keysSorted&&t.children.length===e.children.length&&Vr.compareManyFields(t.children,e.children)}X.prototype.visitNull=bs;X.prototype.visitBool=bs;X.prototype.visitInt=fr;X.prototype.visitInt8=fr;X.prototype.visitInt16=fr;X.prototype.visitInt32=fr;X.prototype.visitInt64=fr;X.prototype.visitUint8=fr;X.prototype.visitUint16=fr;X.prototype.visitUint32=fr;X.prototype.visitUint64=fr;X.prototype.visitFloat=gu;X.prototype.visitFloat16=gu;X.prototype.visitFloat32=gu;X.prototype.visitFloat64=gu;X.prototype.visitUtf8=bs;X.prototype.visitLargeUtf8=bs;X.prototype.visitBinary=bs;X.prototype.visitLargeBinary=bs;X.prototype.visitFixedSizeBinary=xA;X.prototype.visitDate=xp;X.prototype.visitDateDay=xp;X.prototype.visitDateMillisecond=xp;X.prototype.visitTimestamp=ma;X.prototype.visitTimestampSecond=ma;X.prototype.visitTimestampMillisecond=ma;X.prototype.visitTimestampMicrosecond=ma;X.prototype.visitTimestampNanosecond=ma;X.prototype.visitTime=ya;X.prototype.visitTimeSecond=ya;X.prototype.visitTimeMillisecond=ya;X.prototype.visitTimeMicrosecond=ya;X.prototype.visitTimeNanosecond=ya;X.prototype.visitDecimal=bs;X.prototype.visitList=bA;X.prototype.visitStruct=SA;X.prototype.visitUnion=bp;X.prototype.visitDenseUnion=bp;X.prototype.visitSparseUnion=bp;X.prototype.visitDictionary=IA;X.prototype.visitInterval=Sp;X.prototype.visitIntervalDayTime=Sp;X.prototype.visitIntervalYearMonth=Sp;X.prototype.visitDuration=ga;X.prototype.visitDurationSecond=ga;X.prototype.visitDurationMillisecond=ga;X.prototype.visitDurationMicrosecond=ga;X.prototype.visitDurationNanosecond=ga;X.prototype.visitFixedSizeList=EA;X.prototype.visitMap=NA;const Vr=new X;function $f(t,e){return Vr.compareSchemas(t,e)}function fd(t,e){return kA(t,e.map(n=>n.data.concat()))}function kA(t,e){const n=[...t.fields],r=[],s={numBatches:e.reduce((f,m)=>Math.max(f,m.length),0)};let i=0,o=0,a=-1;const l=e.length;let u,d=[];for(;s.numBatches-- >0;){for(o=Number.POSITIVE_INFINITY,a=-1;++a<l;)d[a]=u=e[a].shift(),o=Math.min(o,u?u.length:o);Number.isFinite(o)&&(d=AA(n,o,d,e,s),o>0&&(r[i++]=pe({type:new _t(n),length:o,nullCount:0,children:d.slice()})))}return[t=t.assign(n),r.map(f=>new Ot(t,f))]}function AA(t,e,n,r,s){var i;const o=(e+63&-64)>>3;for(let a=-1,l=r.length;++a<l;){const u=n[a],d=u==null?void 0:u.length;if(d>=e)d===e?n[a]=u:(n[a]=u.slice(0,e),s.numBatches=Math.max(s.numBatches,r[a].unshift(u.slice(e,d-e))));else{const f=t[a];t[a]=f.clone({nullable:!0}),n[a]=(i=u==null?void 0:u._changeLengthAndBackfillNullBitmap(e))!==null&&i!==void 0?i:pe({type:f.type,length:e,nullCount:e,nullBitmap:new Uint8Array(o)})}}return n}var ux;class wt{constructor(...e){var n,r;if(e.length===0)return this.batches=[],this.schema=new Ie([]),this._offsets=[0],this;let s,i;e[0]instanceof Ie&&(s=e.shift()),e.at(-1)instanceof Uint32Array&&(i=e.pop());const o=l=>{if(l){if(l instanceof Ot)return[l];if(l instanceof wt)return l.batches;if(l instanceof Ne){if(l.type instanceof _t)return[new Ot(new Ie(l.type.children),l)]}else{if(Array.isArray(l))return l.flatMap(u=>o(u));if(typeof l[Symbol.iterator]=="function")return[...l].flatMap(u=>o(u));if(typeof l=="object"){const u=Object.keys(l),d=u.map(y=>new Se([l[y]])),f=s!=null?s:new Ie(u.map((y,v)=>new Le(String(y),d[v].type,d[v].nullable))),[,m]=fd(f,d);return m.length===0?[new Ot(l)]:m}}}return[]},a=e.flatMap(l=>o(l));if(s=(r=s!=null?s:(n=a[0])===null||n===void 0?void 0:n.schema)!==null&&r!==void 0?r:new Ie([]),!(s instanceof Ie))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");for(const l of a){if(!(l instanceof Ot))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");if(!$f(s,l.schema))throw new TypeError("Table and inner RecordBatch schemas must be equivalent.")}this.schema=s,this.batches=a,this._offsets=i!=null?i:ex(this.data)}get data(){return this.batches.map(({data:e})=>e)}get numCols(){return this.schema.fields.length}get numRows(){return this.data.reduce((e,n)=>e+n.length,0)}get nullCount(){return this._nullCount===-1&&(this._nullCount=Z_(this.data)),this._nullCount}isValid(e){return!1}get(e){return null}at(e){return this.get(pp(e,this.numRows))}set(e,n){}indexOf(e,n){return-1}[Symbol.iterator](){return this.batches.length>0?vp.visit(new Se(this.data)):new Array(0)[Symbol.iterator]()}toArray(){return[...this]}toString(){return`[
  ${this.toArray().join(`,
  `)}
]`}concat(...e){const n=this.schema,r=this.data.concat(e.flatMap(({data:s})=>s));return new wt(n,r.map(s=>new Ot(n,s)))}slice(e,n){const r=this.schema;[e,n]=G_({length:this.numRows},e,n);const s=tx(this.data,this._offsets,e,n);return new wt(r,s.map(i=>new Ot(r,i)))}getChild(e){return this.getChildAt(this.schema.fields.findIndex(n=>n.name===e))}getChildAt(e){if(e>-1&&e<this.schema.fields.length){const n=this.data.map(r=>r.children[e]);if(n.length===0){const{type:r}=this.schema.fields[e],s=pe({type:r,length:0,nullCount:0});n.push(s._changeLengthAndBackfillNullBitmap(this.numRows))}return new Se(n)}return null}setChild(e,n){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(s=>s.name===e),n)}setChildAt(e,n){let r=this.schema,s=[...this.batches];if(e>-1&&e<this.numCols){n||(n=new Se([pe({type:new $r,length:this.numRows})]));const i=r.fields.slice(),o=i[e].clone({type:n.type}),a=this.schema.fields.map((l,u)=>this.getChildAt(u));[i[e],a[e]]=[o,n],[r,s]=fd(r,a)}return new wt(r,s)}select(e){const n=this.schema.fields.reduce((r,s,i)=>r.set(s.name,i),new Map);return this.selectAt(e.map(r=>n.get(r)).filter(r=>r>-1))}selectAt(e){const n=this.schema.selectAt(e),r=this.batches.map(s=>s.selectAt(e));return new wt(n,r)}assign(e){const n=this.schema.fields,[r,s]=e.schema.fields.reduce((a,l,u)=>{const[d,f]=a,m=n.findIndex(y=>y.name===l.name);return~m?f[m]=u:d.push(u),a},[[],[]]),i=this.schema.assign(e.schema),o=[...n.map((a,l)=>[l,s[l]]).map(([a,l])=>l===void 0?this.getChildAt(a):e.getChildAt(l)),...r.map(a=>e.getChildAt(a))].filter(Boolean);return new wt(...fd(i,o))}}ux=Symbol.toStringTag;wt[ux]=(t=>(t.schema=null,t.batches=[],t._offsets=new Uint32Array([0]),t._nullCount=-1,t[Symbol.isConcatSpreadable]=!0,t.isValid=Rc(gp),t.get=Rc(Lt.getVisitFn(w.Struct)),t.set=nx(dn.getVisitFn(w.Struct)),t.indexOf=rx(jc.getVisitFn(w.Struct)),"Table"))(wt.prototype);var dx;let Ot=class ao{constructor(...e){switch(e.length){case 2:{if([this.schema]=e,!(this.schema instanceof Ie))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");if([,this.data=pe({nullCount:0,type:new _t(this.schema.fields),children:this.schema.fields.map(n=>pe({type:n.type,nullCount:0}))})]=e,!(this.data instanceof Ne))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");[this.schema,this.data]=Xy(this.schema,this.data.children);break}case 1:{const[n]=e,{fields:r,children:s,length:i}=Object.keys(n).reduce((l,u,d)=>(l.children[d]=n[u],l.length=Math.max(l.length,n[u].length),l.fields[d]=Le.new({name:u,type:n[u].type,nullable:!0}),l),{length:0,fields:new Array,children:new Array}),o=new Ie(r),a=pe({type:new _t(r),length:i,children:s,nullCount:0});[this.schema,this.data]=Xy(o,a.children,i);break}default:throw new TypeError("RecordBatch constructor expects an Object mapping names to child Data, or a [Schema, Data] pair.")}}get dictionaries(){return this._dictionaries||(this._dictionaries=fx(this.schema.fields,this.data.children))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.length}get nullCount(){return this.data.nullCount}isValid(e){return this.data.getValid(e)}get(e){return Lt.visit(this.data,e)}at(e){return this.get(pp(e,this.numRows))}set(e,n){return dn.visit(this.data,e,n)}indexOf(e,n){return jc.visit(this.data,e,n)}[Symbol.iterator](){return vp.visit(new Se([this.data]))}toArray(){return[...this]}concat(...e){return new wt(this.schema,[this,...e])}slice(e,n){const[r]=new Se([this.data]).slice(e,n).data;return new ao(this.schema,r)}getChild(e){var n;return this.getChildAt((n=this.schema.fields)===null||n===void 0?void 0:n.findIndex(r=>r.name===e))}getChildAt(e){return e>-1&&e<this.schema.fields.length?new Se([this.data.children[e]]):null}setChild(e,n){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(s=>s.name===e),n)}setChildAt(e,n){let r=this.schema,s=this.data;if(e>-1&&e<this.numCols){n||(n=new Se([pe({type:new $r,length:this.numRows})]));const i=r.fields.slice(),o=s.children.slice(),a=i[e].clone({type:n.type});[i[e],o[e]]=[a,n.data[0]],r=new Ie(i,new Map(this.schema.metadata)),s=pe({type:new _t(i),children:o})}return new ao(r,s)}select(e){const n=this.schema.select(e),r=new _t(n.fields),s=[];for(const i of e){const o=this.schema.fields.findIndex(a=>a.name===i);~o&&(s[o]=this.data.children[o])}return new ao(n,pe({type:r,length:this.numRows,children:s}))}selectAt(e){const n=this.schema.selectAt(e),r=e.map(i=>this.data.children[i]).filter(Boolean),s=pe({type:new _t(n.fields),length:this.numRows,children:r});return new ao(n,s)}};dx=Symbol.toStringTag;Ot[dx]=(t=>(t._nullCount=-1,t[Symbol.isConcatSpreadable]=!0,"RecordBatch"))(Ot.prototype);function Xy(t,e,n=e.reduce((r,s)=>Math.max(r,s.length),0)){var r;const s=[...t.fields],i=[...e],o=(n+63&-64)>>3;for(const[a,l]of t.fields.entries()){const u=e[a];(!u||u.length!==n)&&(s[a]=l.clone({nullable:!0}),i[a]=(r=u==null?void 0:u._changeLengthAndBackfillNullBitmap(n))!==null&&r!==void 0?r:pe({type:l.type,length:n,nullCount:n,nullBitmap:new Uint8Array(o)}))}return[t.assign(s),pe({type:new _t(s),length:n,children:i})]}function fx(t,e,n=new Map){var r,s;if(((r=t==null?void 0:t.length)!==null&&r!==void 0?r:0)>0&&(t==null?void 0:t.length)===(e==null?void 0:e.length))for(let i=-1,o=t.length;++i<o;){const{type:a}=t[i],l=e[i];for(const u of[l,...((s=l==null?void 0:l.dictionary)===null||s===void 0?void 0:s.data)||[]])fx(a.children,u==null?void 0:u.children,n);if(z.isDictionary(a)){const{id:u}=a;if(!n.has(u))l!=null&&l.dictionary&&n.set(u,l.dictionary);else if(n.get(u)!==l.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}}return n}class Ip extends Ot{constructor(e){const n=e.fields.map(s=>pe({type:s.type})),r=pe({type:new _t(e.fields),nullCount:0,children:n});super(e,r)}}let gr=class Nn{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsMessage(e,n){return(n||new Nn).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsMessage(e,n){return e.setPosition(e.position()+Ee),(n||new Nn).__init(e.readInt32(e.position())+e.position(),e)}version(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):qe.V1}headerType(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readUint8(this.bb_pos+e):_e.NONE}header(e){const n=this.bb.__offset(this.bb_pos,8);return n?this.bb.__union(e,this.bb_pos+n):null}bodyLength(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readInt64(this.bb_pos+e):BigInt("0")}customMetadata(e,n){const r=this.bb.__offset(this.bb_pos,12);return r?(n||new Xe).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+e*4),this.bb):null}customMetadataLength(){const e=this.bb.__offset(this.bb_pos,12);return e?this.bb.__vector_len(this.bb_pos+e):0}static startMessage(e){e.startObject(5)}static addVersion(e,n){e.addFieldInt16(0,n,qe.V1)}static addHeaderType(e,n){e.addFieldInt8(1,n,_e.NONE)}static addHeader(e,n){e.addFieldOffset(2,n,0)}static addBodyLength(e,n){e.addFieldInt64(3,n,BigInt("0"))}static addCustomMetadata(e,n){e.addFieldOffset(4,n,0)}static createCustomMetadataVector(e,n){e.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)e.addOffset(n[r]);return e.endVector()}static startCustomMetadataVector(e,n){e.startVector(4,n,4)}static endMessage(e){return e.endObject()}static finishMessageBuffer(e,n){e.finish(n)}static finishSizePrefixedMessageBuffer(e,n){e.finish(n,void 0,!0)}static createMessage(e,n,r,s,i,o){return Nn.startMessage(e),Nn.addVersion(e,n),Nn.addHeaderType(e,r),Nn.addHeader(e,s),Nn.addBodyLength(e,i),Nn.addCustomMetadata(e,o),Nn.endMessage(e)}};class TA extends he{visit(e,n){return e==null||n==null?void 0:super.visit(e,n)}visitNull(e,n){return Vy.startNull(n),Vy.endNull(n)}visitInt(e,n){return Vt.startInt(n),Vt.addBitWidth(n,e.bitWidth),Vt.addIsSigned(n,e.isSigned),Vt.endInt(n)}visitFloat(e,n){return jn.startFloatingPoint(n),jn.addPrecision(n,e.precision),jn.endFloatingPoint(n)}visitBinary(e,n){return Dy.startBinary(n),Dy.endBinary(n)}visitLargeBinary(e,n){return Uy.startLargeBinary(n),Uy.endLargeBinary(n)}visitBool(e,n){return By.startBool(n),By.endBool(n)}visitUtf8(e,n){return Wy.startUtf8(n),Wy.endUtf8(n)}visitLargeUtf8(e,n){return $y.startLargeUtf8(n),$y.endLargeUtf8(n)}visitDecimal(e,n){return Fs.startDecimal(n),Fs.addScale(n,e.scale),Fs.addPrecision(n,e.precision),Fs.addBitWidth(n,e.bitWidth),Fs.endDecimal(n)}visitDate(e,n){return _l.startDate(n),_l.addUnit(n,e.unit),_l.endDate(n)}visitTime(e,n){return tn.startTime(n),tn.addUnit(n,e.unit),tn.addBitWidth(n,e.bitWidth),tn.endTime(n)}visitTimestamp(e,n){const r=e.timezone&&n.createString(e.timezone)||void 0;return nn.startTimestamp(n),nn.addUnit(n,e.unit),r!==void 0&&nn.addTimezone(n,r),nn.endTimestamp(n)}visitInterval(e,n){return Fn.startInterval(n),Fn.addUnit(n,e.unit),Fn.endInterval(n)}visitDuration(e,n){return xl.startDuration(n),xl.addUnit(n,e.unit),xl.endDuration(n)}visitList(e,n){return zy.startList(n),zy.endList(n)}visitStruct(e,n){return os.startStruct_(n),os.endStruct_(n)}visitUnion(e,n){Tt.startTypeIdsVector(n,e.typeIds.length);const r=Tt.createTypeIdsVector(n,e.typeIds);return Tt.startUnion(n),Tt.addMode(n,e.mode),Tt.addTypeIds(n,r),Tt.endUnion(n)}visitDictionary(e,n){const r=this.visit(e.indices,n);return er.startDictionaryEncoding(n),er.addId(n,BigInt(e.id)),er.addIsOrdered(n,e.isOrdered),r!==void 0&&er.addIndexType(n,r),er.endDictionaryEncoding(n)}visitFixedSizeBinary(e,n){return bl.startFixedSizeBinary(n),bl.addByteWidth(n,e.byteWidth),bl.endFixedSizeBinary(n)}visitFixedSizeList(e,n){return Sl.startFixedSizeList(n),Sl.addListSize(n,e.listSize),Sl.endFixedSizeList(n)}visitMap(e,n){return Il.startMap(n),Il.addKeysSorted(n,e.keysSorted),Il.endMap(n)}}const hd=new TA;function OA(t,e=new Map){return new Ie(RA(t,e),kl(t.metadata),e)}function hx(t){return new Qt(t.count,px(t.columns),mx(t.columns))}function CA(t){return new Vn(hx(t.data),t.id,t.isDelta)}function RA(t,e){return(t.fields||[]).filter(Boolean).map(n=>Le.fromJSON(n,e))}function Zy(t,e){return(t.children||[]).filter(Boolean).map(n=>Le.fromJSON(n,e))}function px(t){return(t||[]).reduce((e,n)=>[...e,new Wr(n.count,jA(n.VALIDITY)),...px(n.children)],[])}function mx(t,e=[]){for(let n=-1,r=(t||[]).length;++n<r;){const s=t[n];s.VALIDITY&&e.push(new Ln(e.length,s.VALIDITY.length)),s.TYPE_ID&&e.push(new Ln(e.length,s.TYPE_ID.length)),s.OFFSET&&e.push(new Ln(e.length,s.OFFSET.length)),s.DATA&&e.push(new Ln(e.length,s.DATA.length)),e=mx(s.children,e)}return e}function jA(t){return(t||[]).reduce((e,n)=>e+ +(n===0),0)}function FA(t,e){let n,r,s,i,o,a;return!e||!(i=t.dictionary)?(o=tg(t,Zy(t,e)),s=new Le(t.name,o,t.nullable,kl(t.metadata))):e.has(n=i.id)?(r=(r=i.indexType)?eg(r):new na,a=new Ai(e.get(n),r,n,i.isOrdered),s=new Le(t.name,a,t.nullable,kl(t.metadata))):(r=(r=i.indexType)?eg(r):new na,e.set(n,o=tg(t,Zy(t,e))),a=new Ai(o,r,n,i.isOrdered),s=new Le(t.name,a,t.nullable,kl(t.metadata))),s||null}function kl(t=[]){return new Map(t.map(({key:e,value:n})=>[e,n]))}function eg(t){return new vs(t.isSigned,t.bitWidth)}function tg(t,e){const n=t.type.name;switch(n){case"NONE":return new $r;case"null":return new $r;case"binary":return new pc;case"largebinary":return new mc;case"utf8":return new yc;case"largeutf8":return new gc;case"bool":return new vc;case"list":return new Ec((e||[])[0]);case"struct":return new _t(e||[]);case"struct_":return new _t(e||[])}switch(n){case"int":{const r=t.type;return new vs(r.isSigned,r.bitWidth)}case"floatingpoint":{const r=t.type;return new hc(ht[r.precision])}case"decimal":{const r=t.type;return new wc(r.scale,r.precision,r.bitWidth)}case"date":{const r=t.type;return new _c(un[r.unit])}case"time":{const r=t.type;return new xc(Z[r.unit],r.bitWidth)}case"timestamp":{const r=t.type;return new bc(Z[r.unit],r.timezone)}case"interval":{const r=t.type;return new Sc(zn[r.unit])}case"duration":{const r=t.type;return new Ic(Z[r.unit])}case"union":{const r=t.type,[s,...i]=(r.mode+"").toLowerCase(),o=s.toUpperCase()+i.join("");return new Nc(mt[o],r.typeIds||[],e||[])}case"fixedsizebinary":{const r=t.type;return new kc(r.byteWidth)}case"fixedsizelist":{const r=t.type;return new Ac(r.listSize,(e||[])[0])}case"map":{const r=t.type;return new Tc((e||[])[0],r.keysSorted)}}throw new Error(`Unrecognized type: "${n}"`)}var PA=Cw,LA=Ni;class xt{static fromJSON(e,n){const r=new xt(0,qe.V5,n);return r._createHeader=MA(e,n),r}static decode(e){e=new LA(ge(e));const n=gr.getRootAsMessage(e),r=n.bodyLength(),s=n.version(),i=n.headerType(),o=new xt(r,s,i);return o._createHeader=DA(n,i),o}static encode(e){const n=new PA;let r=-1;return e.isSchema()?r=Ie.encode(n,e.header()):e.isRecordBatch()?r=Qt.encode(n,e.header()):e.isDictionaryBatch()&&(r=Vn.encode(n,e.header())),gr.startMessage(n),gr.addVersion(n,qe.V5),gr.addHeader(n,r),gr.addHeaderType(n,e.headerType),gr.addBodyLength(n,BigInt(e.bodyLength)),gr.finishMessageBuffer(n,gr.endMessage(n)),n.asUint8Array()}static from(e,n=0){if(e instanceof Ie)return new xt(0,qe.V5,_e.Schema,e);if(e instanceof Qt)return new xt(n,qe.V5,_e.RecordBatch,e);if(e instanceof Vn)return new xt(n,qe.V5,_e.DictionaryBatch,e);throw new Error(`Unrecognized Message header: ${e}`)}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===_e.Schema}isRecordBatch(){return this.headerType===_e.RecordBatch}isDictionaryBatch(){return this.headerType===_e.DictionaryBatch}constructor(e,n,r,s){this._version=n,this._headerType=r,this.body=new Uint8Array(0),s&&(this._createHeader=()=>s),this._bodyLength=Ce(e)}}class Qt{get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}constructor(e,n,r){this._nodes=n,this._buffers=r,this._length=Ce(e)}}class Vn{get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}constructor(e,n,r=!1){this._data=e,this._isDelta=r,this._id=Ce(n)}}class Ln{constructor(e,n){this.offset=Ce(e),this.length=Ce(n)}}class Wr{constructor(e,n){this.length=Ce(e),this.nullCount=Ce(n)}}function MA(t,e){return()=>{switch(e){case _e.Schema:return Ie.fromJSON(t);case _e.RecordBatch:return Qt.fromJSON(t);case _e.DictionaryBatch:return Vn.fromJSON(t)}throw new Error(`Unrecognized Message type: { name: ${_e[e]}, type: ${e} }`)}}function DA(t,e){return()=>{switch(e){case _e.Schema:return Ie.decode(t.header(new An),new Map,t.version());case _e.RecordBatch:return Qt.decode(t.header(new Jn),t.version());case _e.DictionaryBatch:return Vn.decode(t.header(new Rs),t.version())}throw new Error(`Unrecognized Message type: { name: ${_e[e]}, type: ${e} }`)}}Le.encode=JA;Le.decode=QA;Le.fromJSON=FA;Ie.encode=KA;Ie.decode=BA;Ie.fromJSON=OA;Qt.encode=YA;Qt.decode=UA;Qt.fromJSON=hx;Vn.encode=GA;Vn.decode=$A;Vn.fromJSON=CA;Wr.encode=XA;Wr.decode=VA;Ln.encode=ZA;Ln.decode=zA;function BA(t,e=new Map,n=qe.V5){const r=HA(t,e);return new Ie(r,Al(t),e,n)}function UA(t,e=qe.V5){if(t.compression()!==null)throw new Error("Record batch compression not implemented");return new Qt(t.length(),WA(t),qA(t,e))}function $A(t,e=qe.V5){return new Vn(Qt.decode(t.data(),e),t.id(),t.isDelta())}function zA(t){return new Ln(t.offset(),t.length())}function VA(t){return new Wr(t.length(),t.nullCount())}function WA(t){const e=[];for(let n,r=-1,s=-1,i=t.nodesLength();++r<i;)(n=t.nodes(r))&&(e[++s]=Wr.decode(n));return e}function qA(t,e){const n=[];for(let r,s=-1,i=-1,o=t.buffersLength();++s<o;)(r=t.buffers(s))&&(e<qe.V4&&(r.bb_pos+=8*(s+1)),n[++i]=Ln.decode(r));return n}function HA(t,e){const n=[];for(let r,s=-1,i=-1,o=t.fieldsLength();++s<o;)(r=t.fields(s))&&(n[++i]=Le.decode(r,e));return n}function ng(t,e){const n=[];for(let r,s=-1,i=-1,o=t.childrenLength();++s<o;)(r=t.children(s))&&(n[++i]=Le.decode(r,e));return n}function QA(t,e){let n,r,s,i,o,a;return!e||!(a=t.dictionary())?(s=sg(t,ng(t,e)),r=new Le(t.name(),s,t.nullable(),Al(t))):e.has(n=Ce(a.id()))?(i=(i=a.indexType())?rg(i):new na,o=new Ai(e.get(n),i,n,a.isOrdered()),r=new Le(t.name(),o,t.nullable(),Al(t))):(i=(i=a.indexType())?rg(i):new na,e.set(n,s=sg(t,ng(t,e))),o=new Ai(s,i,n,a.isOrdered()),r=new Le(t.name(),o,t.nullable(),Al(t))),r||null}function Al(t){const e=new Map;if(t)for(let n,r,s=-1,i=Math.trunc(t.customMetadataLength());++s<i;)(n=t.customMetadata(s))&&(r=n.key())!=null&&e.set(r,n.value());return e}function rg(t){return new vs(t.isSigned(),t.bitWidth())}function sg(t,e){const n=t.typeType();switch(n){case Re.NONE:return new $r;case Re.Null:return new $r;case Re.Binary:return new pc;case Re.LargeBinary:return new mc;case Re.Utf8:return new yc;case Re.LargeUtf8:return new gc;case Re.Bool:return new vc;case Re.List:return new Ec((e||[])[0]);case Re.Struct_:return new _t(e||[])}switch(n){case Re.Int:{const r=t.type(new Vt);return new vs(r.isSigned(),r.bitWidth())}case Re.FloatingPoint:{const r=t.type(new jn);return new hc(r.precision())}case Re.Decimal:{const r=t.type(new Fs);return new wc(r.scale(),r.precision(),r.bitWidth())}case Re.Date:{const r=t.type(new _l);return new _c(r.unit())}case Re.Time:{const r=t.type(new tn);return new xc(r.unit(),r.bitWidth())}case Re.Timestamp:{const r=t.type(new nn);return new bc(r.unit(),r.timezone())}case Re.Interval:{const r=t.type(new Fn);return new Sc(r.unit())}case Re.Duration:{const r=t.type(new xl);return new Ic(r.unit())}case Re.Union:{const r=t.type(new Tt);return new Nc(r.mode(),r.typeIdsArray()||[],e||[])}case Re.FixedSizeBinary:{const r=t.type(new bl);return new kc(r.byteWidth())}case Re.FixedSizeList:{const r=t.type(new Sl);return new Ac(r.listSize(),(e||[])[0])}case Re.Map:{const r=t.type(new Il);return new Tc((e||[])[0],r.keysSorted())}}throw new Error(`Unrecognized type: "${Re[n]}" (${n})`)}function KA(t,e){const n=e.fields.map(i=>Le.encode(t,i));An.startFieldsVector(t,n.length);const r=An.createFieldsVector(t,n),s=e.metadata&&e.metadata.size>0?An.createCustomMetadataVector(t,[...e.metadata].map(([i,o])=>{const a=t.createString(`${i}`),l=t.createString(`${o}`);return Xe.startKeyValue(t),Xe.addKey(t,a),Xe.addValue(t,l),Xe.endKeyValue(t)})):-1;return An.startSchema(t),An.addFields(t,r),An.addEndianness(t,eT?ki.Little:ki.Big),s!==-1&&An.addCustomMetadata(t,s),An.endSchema(t)}function JA(t,e){let n=-1,r=-1,s=-1;const i=e.type;let o=e.typeId;z.isDictionary(i)?(o=i.dictionary.typeId,s=hd.visit(i,t),r=hd.visit(i.dictionary,t)):r=hd.visit(i,t);const a=(i.children||[]).map(d=>Le.encode(t,d)),l=Gt.createChildrenVector(t,a),u=e.metadata&&e.metadata.size>0?Gt.createCustomMetadataVector(t,[...e.metadata].map(([d,f])=>{const m=t.createString(`${d}`),y=t.createString(`${f}`);return Xe.startKeyValue(t),Xe.addKey(t,m),Xe.addValue(t,y),Xe.endKeyValue(t)})):-1;return e.name&&(n=t.createString(e.name)),Gt.startField(t),Gt.addType(t,r),Gt.addTypeType(t,o),Gt.addChildren(t,l),Gt.addNullable(t,!!e.nullable),n!==-1&&Gt.addName(t,n),s!==-1&&Gt.addDictionary(t,s),u!==-1&&Gt.addCustomMetadata(t,u),Gt.endField(t)}function YA(t,e){const n=e.nodes||[],r=e.buffers||[];Jn.startNodesVector(t,n.length);for(const o of n.slice().reverse())Wr.encode(t,o);const s=t.endVector();Jn.startBuffersVector(t,r.length);for(const o of r.slice().reverse())Ln.encode(t,o);const i=t.endVector();return Jn.startRecordBatch(t),Jn.addLength(t,BigInt(e.length)),Jn.addNodes(t,s),Jn.addBuffers(t,i),Jn.endRecordBatch(t)}function GA(t,e){const n=Qt.encode(t,e.data);return Rs.startDictionaryBatch(t),Rs.addId(t,BigInt(e.id)),Rs.addIsDelta(t,e.isDelta),Rs.addData(t,n),Rs.endDictionaryBatch(t)}function XA(t,e){return Fw.createFieldNode(t,BigInt(e.length),BigInt(e.nullCount))}function ZA(t,e){return jw.createBuffer(t,BigInt(e.offset),BigInt(e.length))}const eT=(()=>{const t=new ArrayBuffer(2);return new DataView(t).setInt16(0,256,!0),new Int16Array(t)[0]===256})(),Ep=t=>`Expected ${_e[t]} Message in stream, but was null or length 0.`,Np=t=>`Header pointer of flatbuffer-encoded ${_e[t]} Message is null or length 0.`,yx=(t,e)=>`Expected to read ${t} metadata bytes, but only read ${e}.`,gx=(t,e)=>`Expected to read ${t} bytes for message body, but only read ${e}.`;class vx{constructor(e){this.source=e instanceof Pc?e:new Pc(e)}[Symbol.iterator](){return this}next(){let e;return(e=this.readMetadataLength()).done||e.value===-1&&(e=this.readMetadataLength()).done||(e=this.readMetadata(e.value)).done?Be:e}throw(e){return this.source.throw(e)}return(e){return this.source.return(e)}readMessage(e){let n;if((n=this.next()).done)return null;if(e!=null&&n.value.headerType!==e)throw new Error(Ep(e));return n.value}readMessageBody(e){if(e<=0)return new Uint8Array(0);const n=ge(this.source.read(e));if(n.byteLength<e)throw new Error(gx(e,n.byteLength));return n.byteOffset%8===0&&n.byteOffset+n.byteLength<=n.buffer.byteLength?n:n.slice()}readSchema(e=!1){const n=_e.Schema,r=this.readMessage(n),s=r==null?void 0:r.header();if(e&&!s)throw new Error(Np(n));return s}readMetadataLength(){const e=this.source.read(vu),n=e&&new Ni(e),r=(n==null?void 0:n.readInt32(0))||0;return{done:r===0,value:r}}readMetadata(e){const n=this.source.read(e);if(!n)return Be;if(n.byteLength<e)throw new Error(yx(e,n.byteLength));return{done:!1,value:xt.decode(n)}}}class tT{constructor(e,n){this.source=e instanceof Ti?e:Ew(e)?new Lc(e,n):new Ti(e)}[Symbol.asyncIterator](){return this}next(){return ae(this,void 0,void 0,function*(){let e;return(e=yield this.readMetadataLength()).done||e.value===-1&&(e=yield this.readMetadataLength()).done||(e=yield this.readMetadata(e.value)).done?Be:e})}throw(e){return ae(this,void 0,void 0,function*(){return yield this.source.throw(e)})}return(e){return ae(this,void 0,void 0,function*(){return yield this.source.return(e)})}readMessage(e){return ae(this,void 0,void 0,function*(){let n;if((n=yield this.next()).done)return null;if(e!=null&&n.value.headerType!==e)throw new Error(Ep(e));return n.value})}readMessageBody(e){return ae(this,void 0,void 0,function*(){if(e<=0)return new Uint8Array(0);const n=ge(yield this.source.read(e));if(n.byteLength<e)throw new Error(gx(e,n.byteLength));return n.byteOffset%8===0&&n.byteOffset+n.byteLength<=n.buffer.byteLength?n:n.slice()})}readSchema(){return ae(this,arguments,void 0,function*(e=!1){const n=_e.Schema,r=yield this.readMessage(n),s=r==null?void 0:r.header();if(e&&!s)throw new Error(Np(n));return s})}readMetadataLength(){return ae(this,void 0,void 0,function*(){const e=yield this.source.read(vu),n=e&&new Ni(e),r=(n==null?void 0:n.readInt32(0))||0;return{done:r===0,value:r}})}readMetadata(e){return ae(this,void 0,void 0,function*(){const n=yield this.source.read(e);if(!n)return Be;if(n.byteLength<e)throw new Error(yx(e,n.byteLength));return{done:!1,value:xt.decode(n)}})}}class nT extends vx{constructor(e){super(new Uint8Array(0)),this._schema=!1,this._body=[],this._batchIndex=0,this._dictionaryIndex=0,this._json=e instanceof Yy?e:new Yy(e)}next(){const{_json:e}=this;if(!this._schema)return this._schema=!0,{done:!1,value:xt.fromJSON(e.schema,_e.Schema)};if(this._dictionaryIndex<e.dictionaries.length){const n=e.dictionaries[this._dictionaryIndex++];return this._body=n.data.columns,{done:!1,value:xt.fromJSON(n,_e.DictionaryBatch)}}if(this._batchIndex<e.batches.length){const n=e.batches[this._batchIndex++];return this._body=n.columns,{done:!1,value:xt.fromJSON(n,_e.RecordBatch)}}return this._body=[],Be}readMessageBody(e){return n(this._body);function n(r){return(r||[]).reduce((s,i)=>[...s,...i.VALIDITY&&[i.VALIDITY]||[],...i.TYPE_ID&&[i.TYPE_ID]||[],...i.OFFSET&&[i.OFFSET]||[],...i.DATA&&[i.DATA]||[],...n(i.children)],[])}}readMessage(e){let n;if((n=this.next()).done)return null;if(e!=null&&n.value.headerType!==e)throw new Error(Ep(e));return n.value}readSchema(){const e=_e.Schema,n=this.readMessage(e),r=n==null?void 0:n.header();if(!n||!r)throw new Error(Np(e));return r}}const vu=4,zf="ARROW1",sa=new Uint8Array(zf.length);for(let t=0;t<zf.length;t+=1)sa[t]=zf.codePointAt(t);function kp(t,e=0){for(let n=-1,r=sa.length;++n<r;)if(sa[n]!==t[e+n])return!1;return!0}const va=sa.length,wx=va+vu,rT=va*2+vu;class an extends wp{constructor(e){super(),this._impl=e}get closed(){return this._impl.closed}get schema(){return this._impl.schema}get autoDestroy(){return this._impl.autoDestroy}get dictionaries(){return this._impl.dictionaries}get numDictionaries(){return this._impl.numDictionaries}get numRecordBatches(){return this._impl.numRecordBatches}get footer(){return this._impl.isFile()?this._impl.footer:null}isSync(){return this._impl.isSync()}isAsync(){return this._impl.isAsync()}isFile(){return this._impl.isFile()}isStream(){return this._impl.isStream()}next(){return this._impl.next()}throw(e){return this._impl.throw(e)}return(e){return this._impl.return(e)}cancel(){return this._impl.cancel()}reset(e){return this._impl.reset(e),this._DOMStream=void 0,this._nodeStream=void 0,this}open(e){const n=this._impl.open(e);return gs(n)?n.then(()=>this):this}readRecordBatch(e){return this._impl.isFile()?this._impl.readRecordBatch(e):null}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}toDOMStream(){return Xt.toDOMStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this})}toNodeStream(){return Xt.toNodeStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this},{objectMode:!0})}static throughNode(e){throw new Error('"throughNode" not available in this environment')}static throughDOM(e,n){throw new Error('"throughDOM" not available in this environment')}static from(e){return e instanceof an?e:Rf(e)?aT(e):Ew(e)?uT(e):gs(e)?ae(this,void 0,void 0,function*(){return yield an.from(yield e)}):Nw(e)||lp(e)||kw(e)||Fi(e)?cT(new Ti(e)):lT(new Pc(e))}static readAll(e){return e instanceof an?e.isSync()?ig(e):og(e):Rf(e)||ArrayBuffer.isView(e)||pa(e)||Iw(e)?ig(e):og(e)}}class Mc extends an{constructor(e){super(e),this._impl=e}readAll(){return[...this]}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return Pn(this,arguments,function*(){yield ue(yield*wl(ds(this[Symbol.iterator]())))})}}class Dc extends an{constructor(e){super(e),this._impl=e}readAll(){return ae(this,void 0,void 0,function*(){var e,n,r,s;const i=new Array;try{for(var o=!0,a=ds(this),l;l=yield a.next(),e=l.done,!e;o=!0){s=l.value,o=!1;const u=s;i.push(u)}}catch(u){n={error:u}}finally{try{!o&&!e&&(r=a.return)&&(yield r.call(a))}finally{if(n)throw n.error}}return i})}[Symbol.iterator](){throw new Error("AsyncRecordBatchStreamReader is not Iterable")}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}}class _x extends Mc{constructor(e){super(e),this._impl=e}}class sT extends Dc{constructor(e){super(e),this._impl=e}}class xx{get numDictionaries(){return this._dictionaryIndex}get numRecordBatches(){return this._recordBatchIndex}constructor(e=new Map){this.closed=!1,this.autoDestroy=!0,this._dictionaryIndex=0,this._recordBatchIndex=0,this.dictionaries=e}isSync(){return!1}isAsync(){return!1}isFile(){return!1}isStream(){return!1}reset(e){return this._dictionaryIndex=0,this._recordBatchIndex=0,this.schema=e,this.dictionaries=new Map,this}_loadRecordBatch(e,n){const r=this._loadVectors(e,n,this.schema.fields),s=pe({type:new _t(this.schema.fields),length:e.length,children:r});return new Ot(this.schema,s)}_loadDictionaryBatch(e,n){const{id:r,isDelta:s}=e,{dictionaries:i,schema:o}=this,a=i.get(r),l=o.dictionaries.get(r),u=this._loadVectors(e.data,n,[l]);return(a&&s?a.concat(new Se(u)):new Se(u)).memoize()}_loadVectors(e,n,r){return new cx(n,e.nodes,e.buffers,this.dictionaries,this.schema.metadataVersion).visitMany(r)}}class Bc extends xx{constructor(e,n){super(n),this._reader=Rf(e)?new nT(this._handle=e):new vx(this._handle=e)}isSync(){return!0}isStream(){return!0}[Symbol.iterator](){return this}cancel(){!this.closed&&(this.closed=!0)&&(this.reset()._reader.return(),this._reader=null,this.dictionaries=null)}open(e){return this.closed||(this.autoDestroy=Sx(this,e),this.schema||(this.schema=this._reader.readSchema())||this.cancel()),this}throw(e){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.throw(e):Be}return(e){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.return(e):Be}next(){if(this.closed)return Be;let e;const{_reader:n}=this;for(;e=this._readNextMessageAndValidate();)if(e.isSchema())this.reset(e.header());else if(e.isRecordBatch()){this._recordBatchIndex++;const r=e.header(),s=n.readMessageBody(e.bodyLength);return{done:!1,value:this._loadRecordBatch(r,s)}}else if(e.isDictionaryBatch()){this._dictionaryIndex++;const r=e.header(),s=n.readMessageBody(e.bodyLength),i=this._loadDictionaryBatch(r,s);this.dictionaries.set(r.id,i)}return this.schema&&this._recordBatchIndex===0?(this._recordBatchIndex++,{done:!1,value:new Ip(this.schema)}):this.return()}_readNextMessageAndValidate(e){return this._reader.readMessage(e)}}class Uc extends xx{constructor(e,n){super(n),this._reader=new tT(this._handle=e)}isAsync(){return!0}isStream(){return!0}[Symbol.asyncIterator](){return this}cancel(){return ae(this,void 0,void 0,function*(){!this.closed&&(this.closed=!0)&&(yield this.reset()._reader.return(),this._reader=null,this.dictionaries=null)})}open(e){return ae(this,void 0,void 0,function*(){return this.closed||(this.autoDestroy=Sx(this,e),this.schema||(this.schema=yield this._reader.readSchema())||(yield this.cancel())),this})}throw(e){return ae(this,void 0,void 0,function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.throw(e):Be})}return(e){return ae(this,void 0,void 0,function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.return(e):Be})}next(){return ae(this,void 0,void 0,function*(){if(this.closed)return Be;let e;const{_reader:n}=this;for(;e=yield this._readNextMessageAndValidate();)if(e.isSchema())yield this.reset(e.header());else if(e.isRecordBatch()){this._recordBatchIndex++;const r=e.header(),s=yield n.readMessageBody(e.bodyLength);return{done:!1,value:this._loadRecordBatch(r,s)}}else if(e.isDictionaryBatch()){this._dictionaryIndex++;const r=e.header(),s=yield n.readMessageBody(e.bodyLength),i=this._loadDictionaryBatch(r,s);this.dictionaries.set(r.id,i)}return this.schema&&this._recordBatchIndex===0?(this._recordBatchIndex++,{done:!1,value:new Ip(this.schema)}):yield this.return()})}_readNextMessageAndValidate(e){return ae(this,void 0,void 0,function*(){return yield this._reader.readMessage(e)})}}class bx extends Bc{get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}constructor(e,n){super(e instanceof Gy?e:new Gy(e),n)}isSync(){return!0}isFile(){return!0}open(e){if(!this.closed&&!this._footer){this.schema=(this._footer=this._readFooter()).schema;for(const n of this._footer.dictionaryBatches())n&&this._readDictionaryBatch(this._dictionaryIndex++)}return super.open(e)}readRecordBatch(e){var n;if(this.closed)return null;this._footer||this.open();const r=(n=this._footer)===null||n===void 0?void 0:n.getRecordBatch(e);if(r&&this._handle.seek(r.offset)){const s=this._reader.readMessage(_e.RecordBatch);if(s!=null&&s.isRecordBatch()){const i=s.header(),o=this._reader.readMessageBody(s.bodyLength);return this._loadRecordBatch(i,o)}}return null}_readDictionaryBatch(e){var n;const r=(n=this._footer)===null||n===void 0?void 0:n.getDictionaryBatch(e);if(r&&this._handle.seek(r.offset)){const s=this._reader.readMessage(_e.DictionaryBatch);if(s!=null&&s.isDictionaryBatch()){const i=s.header(),o=this._reader.readMessageBody(s.bodyLength),a=this._loadDictionaryBatch(i,o);this.dictionaries.set(i.id,a)}}}_readFooter(){const{_handle:e}=this,n=e.size-wx,r=e.readInt32(n),s=e.readAt(n-r,r);return ra.decode(s)}_readNextMessageAndValidate(e){var n;if(this._footer||this.open(),this._footer&&this._recordBatchIndex<this.numRecordBatches){const r=(n=this._footer)===null||n===void 0?void 0:n.getRecordBatch(this._recordBatchIndex);if(r&&this._handle.seek(r.offset))return this._reader.readMessage(e)}return null}}class iT extends Uc{get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}constructor(e,...n){const r=typeof n[0]!="number"?n.shift():void 0,s=n[0]instanceof Map?n.shift():void 0;super(e instanceof Lc?e:new Lc(e,r),s)}isFile(){return!0}isAsync(){return!0}open(e){const n=Object.create(null,{open:{get:()=>super.open}});return ae(this,void 0,void 0,function*(){if(!this.closed&&!this._footer){this.schema=(this._footer=yield this._readFooter()).schema;for(const r of this._footer.dictionaryBatches())r&&(yield this._readDictionaryBatch(this._dictionaryIndex++))}return yield n.open.call(this,e)})}readRecordBatch(e){return ae(this,void 0,void 0,function*(){var n;if(this.closed)return null;this._footer||(yield this.open());const r=(n=this._footer)===null||n===void 0?void 0:n.getRecordBatch(e);if(r&&(yield this._handle.seek(r.offset))){const s=yield this._reader.readMessage(_e.RecordBatch);if(s!=null&&s.isRecordBatch()){const i=s.header(),o=yield this._reader.readMessageBody(s.bodyLength);return this._loadRecordBatch(i,o)}}return null})}_readDictionaryBatch(e){return ae(this,void 0,void 0,function*(){var n;const r=(n=this._footer)===null||n===void 0?void 0:n.getDictionaryBatch(e);if(r&&(yield this._handle.seek(r.offset))){const s=yield this._reader.readMessage(_e.DictionaryBatch);if(s!=null&&s.isDictionaryBatch()){const i=s.header(),o=yield this._reader.readMessageBody(s.bodyLength),a=this._loadDictionaryBatch(i,o);this.dictionaries.set(i.id,a)}}})}_readFooter(){return ae(this,void 0,void 0,function*(){const{_handle:e}=this;e._pending&&(yield e._pending);const n=e.size-wx,r=yield e.readInt32(n),s=yield e.readAt(n-r,r);return ra.decode(s)})}_readNextMessageAndValidate(e){return ae(this,void 0,void 0,function*(){if(this._footer||(yield this.open()),this._footer&&this._recordBatchIndex<this.numRecordBatches){const n=this._footer.getRecordBatch(this._recordBatchIndex);if(n&&(yield this._handle.seek(n.offset)))return yield this._reader.readMessage(e)}return null})}}class oT extends Bc{constructor(e,n){super(e,n)}_loadVectors(e,n,r){return new wA(n,e.nodes,e.buffers,this.dictionaries,this.schema.metadataVersion).visitMany(r)}}function Sx(t,e){return e&&typeof e.autoDestroy=="boolean"?e.autoDestroy:t.autoDestroy}function*ig(t){const e=an.from(t);try{if(!e.open({autoDestroy:!1}).closed)do yield e;while(!e.reset().open().closed)}finally{e.cancel()}}function og(t){return Pn(this,arguments,function*(){const n=yield ue(an.from(t));try{if(!(yield ue(n.open({autoDestroy:!1}))).closed)do yield yield ue(n);while(!(yield ue(n.reset().open())).closed)}finally{yield ue(n.cancel())}})}function aT(t){return new Mc(new oT(t))}function lT(t){const e=t.peek(va+7&-8);return e&&e.byteLength>=4?kp(e)?new _x(new bx(t.read())):new Mc(new Bc(t)):new Mc(new Bc(function*(){}()))}function cT(t){return ae(this,void 0,void 0,function*(){const e=yield t.peek(va+7&-8);return e&&e.byteLength>=4?kp(e)?new _x(new bx(yield t.read())):new Dc(new Uc(t)):new Dc(new Uc(function(){return Pn(this,arguments,function*(){})}()))})}function uT(t){return ae(this,void 0,void 0,function*(){const{size:e}=yield t.stat(),n=new Lc(t,e);return e>=rT&&kp(yield n.readAt(0,va+7&-8))?new sT(new iT(n)):new Dc(new Uc(n))})}class ze extends he{static assemble(...e){const n=s=>s.flatMap(i=>Array.isArray(i)?n(i):i instanceof Ot?i.data.children:i.data),r=new ze;return r.visitMany(n(e)),r}constructor(){super(),this._byteLength=0,this._nodes=[],this._buffers=[],this._bufferRegions=[]}visit(e){if(e instanceof Se)return this.visitMany(e.data),this;const{type:n}=e;if(!z.isDictionary(n)){const{length:r}=e;if(r>2147483647)throw new RangeError("Cannot write arrays larger than 2^31 - 1 in length");if(z.isUnion(n))this.nodes.push(new Wr(r,0));else{const{nullCount:s}=e;z.isNull(n)||xn.call(this,s<=0?new Uint8Array(0):Oc(e.offset,r,e.nullBitmap)),this.nodes.push(new Wr(r,s))}}return super.visit(e)}visitNull(e){return this}visitDictionary(e){return this.visit(e.clone(e.type.indices))}get nodes(){return this._nodes}get buffers(){return this._buffers}get byteLength(){return this._byteLength}get bufferRegions(){return this._bufferRegions}}function xn(t){const e=t.byteLength+7&-8;return this.buffers.push(t),this.bufferRegions.push(new Ln(this._byteLength,e)),this._byteLength+=e,this}function dT(t){var e;const{type:n,length:r,typeIds:s,valueOffsets:i}=t;if(xn.call(this,s),n.mode===mt.Sparse)return Vf.call(this,t);if(n.mode===mt.Dense){if(t.offset<=0)return xn.call(this,i),Vf.call(this,t);{const o=new Int32Array(r),a=Object.create(null),l=Object.create(null);for(let u,d,f=-1;++f<r;)(u=s[f])!==void 0&&((d=a[u])===void 0&&(d=a[u]=i[f]),o[f]=i[f]-d,l[u]=((e=l[u])!==null&&e!==void 0?e:0)+1);xn.call(this,o),this.visitMany(t.children.map((u,d)=>{const f=n.typeIds[d],m=a[f],y=l[f];return u.slice(m,Math.min(r,y))}))}}return this}function fT(t){let e;return t.nullCount>=t.length?xn.call(this,new Uint8Array(0)):(e=t.values)instanceof Uint8Array?xn.call(this,Oc(t.offset,t.length,e)):xn.call(this,Cc(t.values))}function hr(t){return xn.call(this,t.values.subarray(0,t.length*t.stride))}function wu(t){const{length:e,values:n,valueOffsets:r}=t,s=Ce(r[0]),i=Ce(r[e]),o=Math.min(i-s,n.byteLength-s);return xn.call(this,Tw(-s,e+1,r)),xn.call(this,n.subarray(s,s+o)),this}function Ap(t){const{length:e,valueOffsets:n}=t;if(n){const{[0]:r,[e]:s}=n;return xn.call(this,Tw(-r,e+1,n)),this.visit(t.children[0].slice(r,s-r))}return this.visit(t.children[0])}function Vf(t){return this.visitMany(t.type.children.map((e,n)=>t.children[n]).filter(Boolean))[0]}ze.prototype.visitBool=fT;ze.prototype.visitInt=hr;ze.prototype.visitFloat=hr;ze.prototype.visitUtf8=wu;ze.prototype.visitLargeUtf8=wu;ze.prototype.visitBinary=wu;ze.prototype.visitLargeBinary=wu;ze.prototype.visitFixedSizeBinary=hr;ze.prototype.visitDate=hr;ze.prototype.visitTimestamp=hr;ze.prototype.visitTime=hr;ze.prototype.visitDecimal=hr;ze.prototype.visitList=Ap;ze.prototype.visitStruct=Vf;ze.prototype.visitUnion=dT;ze.prototype.visitInterval=hr;ze.prototype.visitDuration=hr;ze.prototype.visitFixedSizeList=Ap;ze.prototype.visitMap=Ap;class Ix extends wp{static throughNode(e){throw new Error('"throughNode" not available in this environment')}static throughDOM(e,n){throw new Error('"throughDOM" not available in this environment')}constructor(e){super(),this._position=0,this._started=!1,this._sink=new Nl,this._schema=null,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._seenDictionaries=new Map,this._dictionaryDeltaOffsets=new Map,Pt(e)||(e={autoDestroy:!0,writeLegacyIpcFormat:!1}),this._autoDestroy=typeof e.autoDestroy=="boolean"?e.autoDestroy:!0,this._writeLegacyIpcFormat=typeof e.writeLegacyIpcFormat=="boolean"?e.writeLegacyIpcFormat:!1}toString(e=!1){return this._sink.toString(e)}toUint8Array(e=!1){return this._sink.toUint8Array(e)}writeAll(e){return gs(e)?e.then(n=>this.writeAll(n)):Fi(e)?Rp(this,e):Cp(this,e)}get closed(){return this._sink.closed}[Symbol.asyncIterator](){return this._sink[Symbol.asyncIterator]()}toDOMStream(e){return this._sink.toDOMStream(e)}toNodeStream(e){return this._sink.toNodeStream(e)}close(){return this.reset()._sink.close()}abort(e){return this.reset()._sink.abort(e)}finish(){return this._autoDestroy?this.close():this.reset(this._sink,this._schema),this}reset(e=this._sink,n=null){return e===this._sink||e instanceof Nl?this._sink=e:(this._sink=new Nl,e&&VN(e)?this.toDOMStream({type:"bytes"}).pipeTo(e):e&&WN(e)&&this.toNodeStream({objectMode:!1}).pipe(e)),this._started&&this._schema&&this._writeFooter(this._schema),this._started=!1,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._seenDictionaries=new Map,this._dictionaryDeltaOffsets=new Map,(!n||!$f(n,this._schema))&&(n==null?(this._position=0,this._schema=null):(this._started=!0,this._schema=n,this._writeSchema(n))),this}write(e){let n=null;if(this._sink){if(e==null)return this.finish()&&void 0;if(e instanceof wt&&!(n=e.schema))return this.finish()&&void 0;if(e instanceof Ot&&!(n=e.schema))return this.finish()&&void 0}else throw new Error("RecordBatchWriter is closed");if(n&&!$f(n,this._schema)){if(this._started&&this._autoDestroy)return this.close();this.reset(this._sink,n)}e instanceof Ot?e instanceof Ip||this._writeRecordBatch(e):e instanceof wt?this.writeAll(e.batches):pa(e)&&this.writeAll(e)}_writeMessage(e,n=8){const r=n-1,s=xt.encode(e),i=s.byteLength,o=this._writeLegacyIpcFormat?4:8,a=i+o+r&~r,l=a-i-o;return e.headerType===_e.RecordBatch?this._recordBatchBlocks.push(new zr(a,e.bodyLength,this._position)):e.headerType===_e.DictionaryBatch&&this._dictionaryBlocks.push(new zr(a,e.bodyLength,this._position)),this._writeLegacyIpcFormat||this._write(Int32Array.of(-1)),this._write(Int32Array.of(a-o)),i>0&&this._write(s),this._writePadding(l)}_write(e){if(this._started){const n=ge(e);n&&n.byteLength>0&&(this._sink.write(n),this._position+=n.byteLength)}return this}_writeSchema(e){return this._writeMessage(xt.from(e))}_writeFooter(e){return this._writeLegacyIpcFormat?this._write(Int32Array.of(0)):this._write(Int32Array.of(-1,0))}_writeMagic(){return this._write(sa)}_writePadding(e){return e>0?this._write(new Uint8Array(e)):this}_writeRecordBatch(e){const{byteLength:n,nodes:r,bufferRegions:s,buffers:i}=ze.assemble(e),o=new Qt(e.numRows,r,s),a=xt.from(o,n);return this._writeDictionaries(e)._writeMessage(a)._writeBodyBuffers(i)}_writeDictionaryBatch(e,n,r=!1){const{byteLength:s,nodes:i,bufferRegions:o,buffers:a}=ze.assemble(new Se([e])),l=new Qt(e.length,i,o),u=new Vn(l,n,r),d=xt.from(u,s);return this._writeMessage(d)._writeBodyBuffers(a)}_writeBodyBuffers(e){let n,r,s;for(let i=-1,o=e.length;++i<o;)(n=e[i])&&(r=n.byteLength)>0&&(this._write(n),(s=(r+7&-8)-r)>0&&this._writePadding(s));return this}_writeDictionaries(e){var n,r;for(const[s,i]of e.dictionaries){const o=(n=i==null?void 0:i.data)!==null&&n!==void 0?n:[],a=this._seenDictionaries.get(s),l=(r=this._dictionaryDeltaOffsets.get(s))!==null&&r!==void 0?r:0;if(!a||a.data[0]!==o[0])for(const[u,d]of o.entries())this._writeDictionaryBatch(d,s,u>0);else if(l<o.length)for(const u of o.slice(l))this._writeDictionaryBatch(u,s,!0);this._seenDictionaries.set(s,i),this._dictionaryDeltaOffsets.set(s,o.length)}return this}}class Tp extends Ix{static writeAll(e,n){const r=new Tp(n);return gs(e)?e.then(s=>r.writeAll(s)):Fi(e)?Rp(r,e):Cp(r,e)}}class Op extends Ix{static writeAll(e){const n=new Op;return gs(e)?e.then(r=>n.writeAll(r)):Fi(e)?Rp(n,e):Cp(n,e)}constructor(){super(),this._autoDestroy=!0}_writeSchema(e){return this._writeMagic()._writePadding(2)}_writeDictionaryBatch(e,n,r=!1){if(!r&&this._seenDictionaries.has(n))throw new Error("The Arrow File format does not support replacement dictionaries. ");return super._writeDictionaryBatch(e,n,r)}_writeFooter(e){const n=ra.encode(new ra(e,qe.V5,this._recordBatchBlocks,this._dictionaryBlocks));return super._writeFooter(e)._write(n)._write(Int32Array.of(n.byteLength))._writeMagic()}}function Cp(t,e){let n=e;e instanceof wt&&(n=e.batches,t.reset(void 0,e.schema));for(const r of n)t.write(r);return t.finish()}function Rp(t,e){return ae(this,void 0,void 0,function*(){var n,r,s,i,o,a,l;try{for(n=!0,r=ds(e);s=yield r.next(),i=s.done,!i;n=!0){l=s.value,n=!1;const u=l;t.write(u)}}catch(u){o={error:u}}finally{try{!n&&!i&&(a=r.return)&&(yield a.call(r))}finally{if(o)throw o.error}}return t.finish()})}function hT(t,e="stream"){return(e==="stream"?Tp:Op).writeAll(t).toUint8Array(!0)}var pT=Object.create,Ex=Object.defineProperty,mT=Object.getOwnPropertyDescriptor,yT=Object.getOwnPropertyNames,gT=Object.getPrototypeOf,vT=Object.prototype.hasOwnProperty,wT=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),_T=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of yT(e))!vT.call(t,s)&&s!==n&&Ex(t,s,{get:()=>e[s],enumerable:!(r=mT(e,s))||r.enumerable});return t},xT=(t,e,n)=>(n=t!=null?pT(gT(t)):{},_T(!t||!t.__esModule?Ex(n,"default",{value:t,enumerable:!0}):n,t)),bT=wT((t,e)=>{e.exports=Worker}),ST=(t=>(t[t.UNDEFINED=0]="UNDEFINED",t[t.AUTOMATIC=1]="AUTOMATIC",t[t.READ_ONLY=2]="READ_ONLY",t[t.READ_WRITE=3]="READ_WRITE",t))(ST||{}),IT=(t=>(t[t.IDENTIFIER=0]="IDENTIFIER",t[t.NUMERIC_CONSTANT=1]="NUMERIC_CONSTANT",t[t.STRING_CONSTANT=2]="STRING_CONSTANT",t[t.OPERATOR=3]="OPERATOR",t[t.KEYWORD=4]="KEYWORD",t[t.COMMENT=5]="COMMENT",t))(IT||{}),ET=(t=>(t[t.NONE=0]="NONE",t[t.DEBUG=1]="DEBUG",t[t.INFO=2]="INFO",t[t.WARNING=3]="WARNING",t[t.ERROR=4]="ERROR",t))(ET||{}),NT=(t=>(t[t.NONE=0]="NONE",t[t.CONNECT=1]="CONNECT",t[t.DISCONNECT=2]="DISCONNECT",t[t.OPEN=3]="OPEN",t[t.QUERY=4]="QUERY",t[t.INSTANTIATE=5]="INSTANTIATE",t))(NT||{}),kT=(t=>(t[t.NONE=0]="NONE",t[t.OK=1]="OK",t[t.ERROR=2]="ERROR",t[t.START=3]="START",t[t.RUN=4]="RUN",t[t.CAPTURE=5]="CAPTURE",t))(kT||{}),AT=(t=>(t[t.NONE=0]="NONE",t[t.WEB_WORKER=1]="WEB_WORKER",t[t.NODE_WORKER=2]="NODE_WORKER",t[t.BINDINGS=3]="BINDINGS",t[t.ASYNC_DUCKDB=4]="ASYNC_DUCKDB",t))(AT||{}),TT=class{constructor(t=2){this.level=t}log(t){t.level>=this.level&&console.log(t)}},OT=(t=>(t[t.SUCCESS=0]="SUCCESS",t[t.MAX_ARROW_ERROR=255]="MAX_ARROW_ERROR",t[t.DUCKDB_WASM_RETRY=256]="DUCKDB_WASM_RETRY",t))(OT||{}),CT=class{constructor(t,e){this._bindings=t,this._conn=e}get bindings(){return this._bindings}async close(){return this._bindings.disconnect(this._conn)}useUnsafe(t){return t(this._bindings,this._conn)}async query(t){this._bindings.logger.log({timestamp:new Date,level:2,origin:4,topic:4,event:4,value:t});let e=await this._bindings.runQuery(this._conn,t),n=an.from(e);return console.assert(n.isSync(),"Reader is not sync"),console.assert(n.isFile(),"Reader is not file"),new wt(n)}async send(t,e=!1){this._bindings.logger.log({timestamp:new Date,level:2,origin:4,topic:4,event:4,value:t});let n=await this._bindings.startPendingQuery(this._conn,t,e);for(;n==null;){if(this._bindings.isDetached()){console.error("cannot send a message since the worker is not set!");return}n=await this._bindings.pollPendingQuery(this._conn)}let r=new Nx(this._bindings,this._conn,n),s=await an.from(r);return console.assert(s.isAsync()),console.assert(s.isStream()),s}async cancelSent(){return await this._bindings.cancelPendingQuery(this._conn)}async getTableNames(t){return await this._bindings.getTableNames(this._conn,t)}async prepare(t){let e=await this._bindings.createPrepared(this._conn,t);return new RT(this._bindings,this._conn,e)}async insertArrowTable(t,e){let n=hT(t,"stream");await this.insertArrowFromIPCStream(n,e)}async insertArrowFromIPCStream(t,e){await this._bindings.insertArrowFromIPCStream(this._conn,t,e)}async insertCSVFromPath(t,e){await this._bindings.insertCSVFromPath(this._conn,t,e)}async insertJSONFromPath(t,e){await this._bindings.insertJSONFromPath(this._conn,t,e)}},Nx=class{constructor(t,e,n){this.db=t,this.conn=e,this.header=n,this._first=!0,this._depleted=!1,this._inFlight=null}async next(){if(this._first)return this._first=!1,{done:!1,value:this.header};if(this._depleted)return{done:!0,value:null};let t=null;for(this._inFlight!=null&&(t=await this._inFlight,this._inFlight=null);t==null;)t=await this.db.fetchQueryResults(this.conn);return this._depleted=t.length==0,this._depleted||(this._inFlight=this.db.fetchQueryResults(this.conn)),{done:this._depleted,value:t}}[Symbol.asyncIterator](){return this}},RT=class{constructor(t,e,n){this.bindings=t,this.connectionId=e,this.statementId=n}async close(){await this.bindings.closePrepared(this.connectionId,this.statementId)}async query(...t){let e=await this.bindings.runPrepared(this.connectionId,this.statementId,t),n=an.from(e);return console.assert(n.isSync()),console.assert(n.isFile()),new wt(n)}async send(...t){let e=await this.bindings.sendPrepared(this.connectionId,this.statementId,t),n=new Nx(this.bindings,this.connectionId,e),r=await an.from(n);return console.assert(r.isAsync()),console.assert(r.isStream()),r}},jT=(t=>(t.CANCEL_PENDING_QUERY="CANCEL_PENDING_QUERY",t.CLOSE_PREPARED="CLOSE_PREPARED",t.COLLECT_FILE_STATISTICS="COLLECT_FILE_STATISTICS",t.REGISTER_OPFS_FILE_NAME="REGISTER_OPFS_FILE_NAME",t.CONNECT="CONNECT",t.COPY_FILE_TO_BUFFER="COPY_FILE_TO_BUFFER",t.COPY_FILE_TO_PATH="COPY_FILE_TO_PATH",t.CREATE_PREPARED="CREATE_PREPARED",t.DISCONNECT="DISCONNECT",t.DROP_FILE="DROP_FILE",t.DROP_FILES="DROP_FILES",t.EXPORT_FILE_STATISTICS="EXPORT_FILE_STATISTICS",t.FETCH_QUERY_RESULTS="FETCH_QUERY_RESULTS",t.FLUSH_FILES="FLUSH_FILES",t.GET_FEATURE_FLAGS="GET_FEATURE_FLAGS",t.GET_TABLE_NAMES="GET_TABLE_NAMES",t.GET_VERSION="GET_VERSION",t.GLOB_FILE_INFOS="GLOB_FILE_INFOS",t.INSERT_ARROW_FROM_IPC_STREAM="INSERT_ARROW_FROM_IPC_STREAM",t.INSERT_CSV_FROM_PATH="IMPORT_CSV_FROM_PATH",t.INSERT_JSON_FROM_PATH="IMPORT_JSON_FROM_PATH",t.INSTANTIATE="INSTANTIATE",t.OPEN="OPEN",t.PING="PING",t.POLL_PENDING_QUERY="POLL_PENDING_QUERY",t.REGISTER_FILE_BUFFER="REGISTER_FILE_BUFFER",t.REGISTER_FILE_HANDLE="REGISTER_FILE_HANDLE",t.REGISTER_FILE_URL="REGISTER_FILE_URL",t.RESET="RESET",t.RUN_PREPARED="RUN_PREPARED",t.RUN_QUERY="RUN_QUERY",t.SEND_PREPARED="SEND_PREPARED",t.START_PENDING_QUERY="START_PENDING_QUERY",t.TOKENIZE="TOKENIZE",t))(jT||{}),FT=(t=>(t.CONNECTION_INFO="CONNECTION_INFO",t.ERROR="ERROR",t.FEATURE_FLAGS="FEATURE_FLAGS",t.FILE_BUFFER="FILE_BUFFER",t.FILE_INFOS="FILE_INFOS",t.FILE_SIZE="FILE_SIZE",t.FILE_STATISTICS="FILE_STATISTICS",t.INSTANTIATE_PROGRESS="INSTANTIATE_PROGRESS",t.LOG="LOG",t.PROGRESS_UPDATE="PROGRESS_UPDATE",t.OK="OK",t.PREPARED_STATEMENT_ID="PREPARED_STATEMENT_ID",t.QUERY_PLAN="QUERY_PLAN",t.QUERY_RESULT="QUERY_RESULT",t.QUERY_RESULT_CHUNK="QUERY_RESULT_CHUNK",t.QUERY_RESULT_HEADER="QUERY_RESULT_HEADER",t.QUERY_RESULT_HEADER_OR_NULL="QUERY_RESULT_HEADER_OR_NULL",t.REGISTERED_FILE="REGISTERED_FILE",t.SCRIPT_TOKENS="SCRIPT_TOKENS",t.SUCCESS="SUCCESS",t.TABLE_NAMES="TABLE_NAMES",t.VERSION_STRING="VERSION_STRING",t))(FT||{}),ve=class{constructor(t,e){this.promiseResolver=()=>{},this.promiseRejecter=()=>{},this.type=t,this.data=e,this.promise=new Promise((n,r)=>{this.promiseResolver=n,this.promiseRejecter=r})}};function Tl(t){switch(t.typeId){case w.Binary:return{sqlType:"binary"};case w.Bool:return{sqlType:"bool"};case w.Date:return{sqlType:"date"};case w.DateDay:return{sqlType:"date32[d]"};case w.DateMillisecond:return{sqlType:"date64[ms]"};case w.Decimal:{let e=t;return{sqlType:"decimal",precision:e.precision,scale:e.scale}}case w.Float:return{sqlType:"float"};case w.Float16:return{sqlType:"float16"};case w.Float32:return{sqlType:"float32"};case w.Float64:return{sqlType:"float64"};case w.Int:return{sqlType:"int32"};case w.Int16:return{sqlType:"int16"};case w.Int32:return{sqlType:"int32"};case w.Int64:return{sqlType:"int64"};case w.Uint16:return{sqlType:"uint16"};case w.Uint32:return{sqlType:"uint32"};case w.Uint64:return{sqlType:"uint64"};case w.Uint8:return{sqlType:"uint8"};case w.IntervalDayTime:return{sqlType:"interval[dt]"};case w.IntervalYearMonth:return{sqlType:"interval[m]"};case w.List:return{sqlType:"list",valueType:Tl(t.valueType)};case w.FixedSizeBinary:return{sqlType:"fixedsizebinary",byteWidth:t.byteWidth};case w.Null:return{sqlType:"null"};case w.Utf8:return{sqlType:"utf8"};case w.Struct:return{sqlType:"struct",fields:t.children.map(e=>Wf(e.name,e.type))};case w.Map:{let e=t;return{sqlType:"map",keyType:Tl(e.keyType),valueType:Tl(e.valueType)}}case w.Time:return{sqlType:"time[s]"};case w.TimeMicrosecond:return{sqlType:"time[us]"};case w.TimeMillisecond:return{sqlType:"time[ms]"};case w.TimeNanosecond:return{sqlType:"time[ns]"};case w.TimeSecond:return{sqlType:"time[s]"};case w.Timestamp:return{sqlType:"timestamp",timezone:t.timezone||void 0};case w.TimestampSecond:return{sqlType:"timestamp[s]",timezone:t.timezone||void 0};case w.TimestampMicrosecond:return{sqlType:"timestamp[us]",timezone:t.timezone||void 0};case w.TimestampNanosecond:return{sqlType:"timestamp[ns]",timezone:t.timezone||void 0};case w.TimestampMillisecond:return{sqlType:"timestamp[ms]",timezone:t.timezone||void 0}}throw new Error("unsupported arrow type: ".concat(t.toString()))}function Wf(t,e){let n=Tl(e);return n.name=t,n}var PT=/'(opfs:\/\/\S*?)'/g,LT=/(opfs:\/\/\S*?)/g;function MT(t){return t.search(LT)>-1}function DT(t){return[...t.matchAll(PT)].map(e=>e[1])}var BT=new TextEncoder,UT=class{constructor(t,e=null){this._onInstantiationProgress=[],this._onExecutionProgress=[],this._worker=null,this._workerShutdownPromise=null,this._workerShutdownResolver=()=>{},this._nextMessageId=0,this._pendingRequests=new Map,this._config={},this._logger=t,this._onMessageHandler=this.onMessage.bind(this),this._onErrorHandler=this.onError.bind(this),this._onCloseHandler=this.onClose.bind(this),e!=null&&this.attach(e)}get logger(){return this._logger}get config(){return this._config}attach(t){this._worker=t,this._worker.addEventListener("message",this._onMessageHandler),this._worker.addEventListener("error",this._onErrorHandler),this._worker.addEventListener("close",this._onCloseHandler),this._workerShutdownPromise=new Promise((e,n)=>{this._workerShutdownResolver=e})}detach(){this._worker&&(this._worker.removeEventListener("message",this._onMessageHandler),this._worker.removeEventListener("error",this._onErrorHandler),this._worker.removeEventListener("close",this._onCloseHandler),this._worker=null,this._workerShutdownResolver(null),this._workerShutdownPromise=null,this._workerShutdownResolver=()=>{})}async terminate(){this._worker&&(this._worker.terminate(),this._worker=null,this._workerShutdownPromise=null,this._workerShutdownResolver=()=>{})}async postTask(t,e=[]){if(!this._worker){console.error("cannot send a message since the worker is not set!:"+t.type+","+t.data);return}let n=this._nextMessageId++;return this._pendingRequests.set(n,t),this._worker.postMessage({messageId:n,type:t.type,data:t.data},e),await t.promise}onMessage(t){var e;let n=t.data;switch(n.type){case"PROGRESS_UPDATE":{for(let s of this._onExecutionProgress)s(n.data);return}case"LOG":{this._logger.log(n.data);return}case"INSTANTIATE_PROGRESS":{for(let s of this._onInstantiationProgress)s(n.data);return}}let r=this._pendingRequests.get(n.requestId);if(!r){console.warn("unassociated response: [".concat(n.requestId,", ").concat(n.type.toString(),"]"));return}if(this._pendingRequests.delete(n.requestId),n.type=="ERROR"){let s=new Error(n.data.message);s.name=n.data.name,(e=Object.getOwnPropertyDescriptor(s,"stack"))!=null&&e.writable&&(s.stack=n.data.stack),r.promiseRejecter(s);return}switch(r.type){case"CLOSE_PREPARED":case"COLLECT_FILE_STATISTICS":case"REGISTER_OPFS_FILE_NAME":case"COPY_FILE_TO_PATH":case"DISCONNECT":case"DROP_FILE":case"DROP_FILES":case"FLUSH_FILES":case"INSERT_ARROW_FROM_IPC_STREAM":case"IMPORT_CSV_FROM_PATH":case"IMPORT_JSON_FROM_PATH":case"OPEN":case"PING":case"REGISTER_FILE_BUFFER":case"REGISTER_FILE_HANDLE":case"REGISTER_FILE_URL":case"RESET":if(n.type=="OK"){r.promiseResolver(n.data);return}break;case"INSTANTIATE":if(this._onInstantiationProgress=[],n.type=="OK"){r.promiseResolver(n.data);return}break;case"GLOB_FILE_INFOS":if(n.type=="FILE_INFOS"){r.promiseResolver(n.data);return}break;case"GET_VERSION":if(n.type=="VERSION_STRING"){r.promiseResolver(n.data);return}break;case"GET_FEATURE_FLAGS":if(n.type=="FEATURE_FLAGS"){r.promiseResolver(n.data);return}break;case"GET_TABLE_NAMES":if(n.type=="TABLE_NAMES"){r.promiseResolver(n.data);return}break;case"TOKENIZE":if(n.type=="SCRIPT_TOKENS"){r.promiseResolver(n.data);return}break;case"COPY_FILE_TO_BUFFER":if(n.type=="FILE_BUFFER"){r.promiseResolver(n.data);return}break;case"EXPORT_FILE_STATISTICS":if(n.type=="FILE_STATISTICS"){r.promiseResolver(n.data);return}break;case"CONNECT":if(n.type=="CONNECTION_INFO"){r.promiseResolver(n.data);return}break;case"RUN_PREPARED":case"RUN_QUERY":if(n.type=="QUERY_RESULT"){r.promiseResolver(n.data);return}break;case"SEND_PREPARED":if(n.type=="QUERY_RESULT_HEADER"){r.promiseResolver(n.data);return}break;case"START_PENDING_QUERY":if(n.type=="QUERY_RESULT_HEADER_OR_NULL"){r.promiseResolver(n.data);return}break;case"POLL_PENDING_QUERY":if(n.type=="QUERY_RESULT_HEADER_OR_NULL"){r.promiseResolver(n.data);return}break;case"CANCEL_PENDING_QUERY":if(this._onInstantiationProgress=[],n.type=="SUCCESS"){r.promiseResolver(n.data);return}break;case"FETCH_QUERY_RESULTS":if(n.type=="QUERY_RESULT_CHUNK"){r.promiseResolver(n.data);return}break;case"CREATE_PREPARED":if(n.type=="PREPARED_STATEMENT_ID"){r.promiseResolver(n.data);return}break}r.promiseRejecter(new Error("unexpected response type: ".concat(n.type.toString())))}onError(t){console.error(t),console.error("error in duckdb worker: ".concat(t.message)),this._pendingRequests.clear()}onClose(){if(this._workerShutdownResolver(null),this._pendingRequests.size!=0){console.warn("worker terminated with ".concat(this._pendingRequests.size," pending requests"));return}this._pendingRequests.clear()}isDetached(){return!this._worker}async reset(){let t=new ve("RESET",null);return await this.postTask(t)}async ping(){let t=new ve("PING",null);await this.postTask(t)}async dropFile(t){let e=new ve("DROP_FILE",t);return await this.postTask(e)}async dropFiles(t){let e=new ve("DROP_FILES",t);return await this.postTask(e)}async flushFiles(){let t=new ve("FLUSH_FILES",null);return await this.postTask(t)}async instantiate(t,e=null,n=r=>{}){this._onInstantiationProgress.push(n);let r=new ve("INSTANTIATE",[t,e]);return await this.postTask(r)}async getVersion(){let t=new ve("GET_VERSION",null);return await this.postTask(t)}async getFeatureFlags(){let t=new ve("GET_FEATURE_FLAGS",null);return await this.postTask(t)}async open(t){this._config=t;let e=new ve("OPEN",t);await this.postTask(e)}async tokenize(t){let e=new ve("TOKENIZE",t);return await this.postTask(e)}async connectInternal(){let t=new ve("CONNECT",null);return await this.postTask(t)}async connect(){let t=await this.connectInternal();return new CT(this,t)}async disconnect(t){let e=new ve("DISCONNECT",t);await this.postTask(e)}async runQuery(t,e){if(this.shouldOPFSFileHandling()){let n=await this.registerOPFSFileFromSQL(e);try{return await this._runQueryAsync(t,e)}finally{n.length>0&&await this.dropFiles(n)}}else return await this._runQueryAsync(t,e)}async _runQueryAsync(t,e){let n=new ve("RUN_QUERY",[t,e]);return await this.postTask(n)}async startPendingQuery(t,e,n=!1){if(this.shouldOPFSFileHandling()){let r=await this.registerOPFSFileFromSQL(e);try{return await this._startPendingQueryAsync(t,e,n)}finally{r.length>0&&await this.dropFiles(r)}}else return await this._startPendingQueryAsync(t,e,n)}async _startPendingQueryAsync(t,e,n=!1){let r=new ve("START_PENDING_QUERY",[t,e,n]);return await this.postTask(r)}async pollPendingQuery(t){let e=new ve("POLL_PENDING_QUERY",t);return await this.postTask(e)}async cancelPendingQuery(t){let e=new ve("CANCEL_PENDING_QUERY",t);return await this.postTask(e)}async fetchQueryResults(t){let e=new ve("FETCH_QUERY_RESULTS",t);return await this.postTask(e)}async getTableNames(t,e){let n=new ve("GET_TABLE_NAMES",[t,e]);return await this.postTask(n)}async createPrepared(t,e){let n=new ve("CREATE_PREPARED",[t,e]);return await this.postTask(n)}async closePrepared(t,e){let n=new ve("CLOSE_PREPARED",[t,e]);await this.postTask(n)}async runPrepared(t,e,n){let r=new ve("RUN_PREPARED",[t,e,n]);return await this.postTask(r)}async sendPrepared(t,e,n){let r=new ve("SEND_PREPARED",[t,e,n]);return await this.postTask(r)}async globFiles(t){let e=new ve("GLOB_FILE_INFOS",t);return await this.postTask(e)}async registerFileText(t,e){let n=BT.encode(e);await this.registerFileBuffer(t,n)}async registerFileURL(t,e,n,r){e===void 0&&(e=t);let s=new ve("REGISTER_FILE_URL",[t,e,n,r]);await this.postTask(s)}async registerEmptyFileBuffer(t){}async registerFileBuffer(t,e){let n=new ve("REGISTER_FILE_BUFFER",[t,e]);await this.postTask(n,[e.buffer])}async registerFileHandle(t,e,n,r){let s=new ve("REGISTER_FILE_HANDLE",[t,e,n,r]);await this.postTask(s,[])}async registerOPFSFileName(t){let e=new ve("REGISTER_OPFS_FILE_NAME",[t]);await this.postTask(e,[])}async collectFileStatistics(t,e){let n=new ve("COLLECT_FILE_STATISTICS",[t,e]);await this.postTask(n,[])}async exportFileStatistics(t){let e=new ve("EXPORT_FILE_STATISTICS",t);return await this.postTask(e,[])}async copyFileToBuffer(t){let e=new ve("COPY_FILE_TO_BUFFER",t);return await this.postTask(e)}async copyFileToPath(t,e){let n=new ve("COPY_FILE_TO_PATH",[t,e]);await this.postTask(n)}async insertArrowFromIPCStream(t,e,n){if(e.length==0)return;let r=new ve("INSERT_ARROW_FROM_IPC_STREAM",[t,e,n]);await this.postTask(r,[e.buffer])}async insertCSVFromPath(t,e,n){if(n.columns!==void 0){let s=[];for(let i in n.columns){let o=n.columns[i];s.push(Wf(i,o))}n.columnsFlat=s,delete n.columns}let r=new ve("IMPORT_CSV_FROM_PATH",[t,e,n]);await this.postTask(r)}async insertJSONFromPath(t,e,n){if(n.columns!==void 0){let s=[];for(let i in n.columns){let o=n.columns[i];s.push(Wf(i,o))}n.columnsFlat=s,delete n.columns}let r=new ve("IMPORT_JSON_FROM_PATH",[t,e,n]);await this.postTask(r)}shouldOPFSFileHandling(){var t,e;return MT((t=this.config.path)!=null?t:"")?((e=this.config.opfs)==null?void 0:e.fileHandling)=="auto":!1}async registerOPFSFileFromSQL(t){let e=DT(t),n=[];for(let r of e)try{await this.registerOPFSFileName(r),n.push(r)}catch(s){throw console.error(s),new Error("File Not found:"+r)}return n}};function $T(){let t=new TextDecoder;return e=>(typeof SharedArrayBuffer<"u"&&e.buffer instanceof SharedArrayBuffer&&(e=new Uint8Array(e)),t.decode(e))}$T();var zT=(t=>(t[t.BUFFER=0]="BUFFER",t[t.NODE_FS=1]="NODE_FS",t[t.BROWSER_FILEREADER=2]="BROWSER_FILEREADER",t[t.BROWSER_FSACCESS=3]="BROWSER_FSACCESS",t[t.HTTP=4]="HTTP",t[t.S3=5]="S3",t))(zT||{}),VT=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,3,1,0,1,10,14,1,12,0,65,0,65,0,65,0,252,10,0,0,11])),WT=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,8,1,6,0,6,64,25,11,11])),qT=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11])),HT=()=>(async t=>{try{return typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(t)}catch{return!1}})(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11])),jp={name:"@duckdb/duckdb-wasm",version:"1.33.1-dev18.0"},QT=jp.name,KT=jp.version,Fp=jp.version.split(".");Fp[0];Fp[1];Fp[2];var JT=()=>typeof navigator>"u";function YT(){let t="https://cdn.jsdelivr.net/npm/".concat(QT,"@").concat(KT,"/dist/");return{mvp:{mainModule:"".concat(t,"duckdb-mvp.wasm"),mainWorker:"".concat(t,"duckdb-browser-mvp.worker.js")},eh:{mainModule:"".concat(t,"duckdb-eh.wasm"),mainWorker:"".concat(t,"duckdb-browser-eh.worker.js")}}}var pd=null,md=null,yd=null,gd=null,vd=null;async function GT(){return pd==null&&(pd=typeof BigInt64Array<"u"),md==null&&(md=await WT()),yd==null&&(yd=await HT()),gd==null&&(gd=await qT()),vd==null&&(vd=await VT()),{bigInt64Array:pd,crossOriginIsolated:JT()||globalThis.crossOriginIsolated||!1,wasmExceptions:md,wasmSIMD:gd,wasmThreads:yd,wasmBulkMemory:vd}}async function XT(t){let e=await GT();if(e.wasmExceptions){if(e.wasmSIMD&&e.wasmThreads&&e.crossOriginIsolated&&t.coi)return{mainModule:t.coi.mainModule,mainWorker:t.coi.mainWorker,pthreadWorker:t.coi.pthreadWorker};if(t.eh)return{mainModule:t.eh.mainModule,mainWorker:t.eh.mainWorker,pthreadWorker:null}}return{mainModule:t.mvp.mainModule,mainWorker:t.mvp.mainWorker,pthreadWorker:null}}xT(bT());let wd=null,ks=null;const ZT=async()=>{if(ks)return ks;try{const t=YT(),e=await XT(t),n=URL.createObjectURL(new Blob([`importScripts("${e.mainWorker}");`],{type:"text/javascript"})),r=new Worker(n),s=new TT;return wd=new UT(s,r),await wd.instantiate(e.mainModule,e.pthreadWorker),ks=await wd.connect(),await ks.query("INSTALL json;"),await ks.query("LOAD json;"),ks}catch(t){throw console.error("Failed to initialize DuckDB:",t),t}},kx=t=>{var e;return((e=t.split(".").pop())==null?void 0:e.toLowerCase())||""},eO=async(t,e,n)=>{const r=kx(e),s=`data_${Date.now()}`;try{switch(r){case"csv":case"tsv":await t.query(`
          CREATE TEMP TABLE ${s} AS 
          SELECT * FROM read_csv_auto('data:text/csv;base64,${btoa(n)}')
        `);break;case"json":case"jsonl":try{const o=JSON.parse(n);if(Array.isArray(o)){if(o.length>0){const a=Object.keys(o[0]).map(l=>`"${l}" VARCHAR`).join(", ");await t.query(`CREATE TEMP TABLE ${s} (${a})`);for(const l of o.slice(0,1e4)){const u=Object.keys(l).map(f=>`"${f}"`).join(", "),d=Object.values(l).map(f=>typeof f=="string"?`'${f.replace(/'/g,"''")}'`:f===null?"NULL":String(f)).join(", ");await t.query(`INSERT INTO ${s} (${u}) VALUES (${d})`)}}}else if(typeof o=="object"&&o!==null){const a=Object.keys(o).map(d=>`"${d}" VARCHAR`).join(", ");await t.query(`CREATE TEMP TABLE ${s} (${a})`);const l=Object.keys(o).map(d=>`"${d}"`).join(", "),u=Object.values(o).map(d=>typeof d=="string"?`'${d.replace(/'/g,"''")}'`:d===null?"NULL":String(d)).join(", ");await t.query(`INSERT INTO ${s} (${l}) VALUES (${u})`)}}catch{await t.query(`CREATE TEMP TABLE ${s} (content VARCHAR)`),await t.query(`INSERT INTO ${s} VALUES ('${n.replace(/'/g,"''")}')`)}break;case"parquet":await t.query(`
          CREATE TEMP TABLE ${s} AS 
          SELECT * FROM parquet_scan('data:application/octet-stream;base64,${btoa(n)}')
        `);break;default:await t.query(`CREATE TEMP TABLE ${s} (content VARCHAR)`);const i=n.split(`
`);for(const o of i.slice(0,1e4))await t.query(`INSERT INTO ${s} VALUES ('${o.replace(/'/g,"''")}')`)}return s}catch(i){console.error("Error creating temp table:",i),await t.query(`CREATE TEMP TABLE ${s} (content VARCHAR)`);const o=n.split(`
`).slice(0,1e3);for(const a of o)await t.query(`INSERT INTO ${s} VALUES ('${a.replace(/'/g,"''")}')`);return s}},tO=async(t,e,n)=>{const r=performance.now();try{const s=await ZT(),i=await eO(s,e,n);let o=t.replace(/FROM\s+['"]data\.\w+['"]/gi,`FROM ${i}`).replace(/FROM\s+['"][^'"]+\.\w+['"]/gi,`FROM ${i}`).replace(/FROM\s+data/gi,`FROM ${i}`).replace(/DESCRIBE\s+['"][^'"]+['"]/gi,`DESCRIBE ${i}`);o.toLowerCase().includes("from")||(o=`SELECT * FROM ${i}`);const a=await s.query(o),l=a.toArray(),u=a.schema.fields.map(f=>f.name);await s.query(`DROP TABLE IF EXISTS ${i}`);const d=performance.now()-r;return{success:!0,data:l.map(f=>{const m={};return u.forEach(y=>{m[y]=f[y]}),m}),columns:u,executionTime:d}}catch(s){const i=performance.now()-r;return{success:!1,error:s instanceof Error?s.message:String(s),executionTime:i}}},nO=t=>{switch(kx(t)){case"csv":case"tsv":return`-- Query CSV data
SELECT * FROM 'data.csv' LIMIT 100;

-- Count rows
-- SELECT COUNT(*) FROM 'data.csv';

-- Describe schema
-- DESCRIBE 'data.csv';`;case"json":case"jsonl":return`-- Query JSON data
SELECT * FROM 'data.json';

-- Get specific fields
-- SELECT key, value FROM 'data.json';`;case"parquet":return`-- Query Parquet data
SELECT * FROM 'data.parquet' LIMIT 100;

-- Describe schema
-- DESCRIBE 'data.parquet';`;default:return`-- Write your SQL query here
SELECT * FROM data;`}},rO=(t,e)=>{if(!t.length)return"";const n=e.join(","),r=t.map(s=>e.map(i=>{const o=s[i];if(o==null)return"";const a=String(o);return a.includes(",")||a.includes('"')||a.includes(`
`)?`"${a.replace(/"/g,'""')}"`:a}).join(","));return[n,...r].join(`
`)},sO=t=>JSON.stringify(t,null,2),iO=({results:t})=>{const[e,n]=T.useState("table"),[r,s]=T.useState(null),[i,o]=T.useState("asc"),[a,l]=T.useState(""),[u,d]=T.useState(1),f=100;if(!t)return c.jsx("div",{className:"flex items-center justify-center h-full text-text-secondary text-sm",children:c.jsxs("div",{className:"text-center",children:[c.jsx(Af,{size:32,className:"mx-auto mb-2 opacity-50"}),c.jsx("p",{children:"Run a query to see results"})]})});if(t.error)return c.jsxs("div",{className:"flex flex-col h-full p-4",children:[c.jsxs("div",{className:"bg-red-500 bg-opacity-10 border border-red-500 rounded-lg p-4",children:[c.jsxs("h3",{className:"text-red-500 font-medium mb-2 flex items-center gap-2",children:[c.jsx(fa,{size:16}),"Error"]}),c.jsx("pre",{className:"text-red-400 text-sm whitespace-pre-wrap font-mono",children:t.error})]}),c.jsxs("div",{className:"text-text-secondary text-xs mt-2 text-right",children:["Execution time: ",(t.executionTime/1e3).toFixed(3),"s"]})]});const m=T.useMemo(()=>t.type==="python"?t.plot?"plot":t.output?"text":Array.isArray(t.result)&&t.result.length>0?"json":"text":e,[t,e]),y=I=>{r===I?o(i==="asc"?"desc":"asc"):(s(I),o("asc"))},v=T.useMemo(()=>{let I=t.data||t.result||[];if(Array.isArray(I)||(I=[I]),a){const N=a.toLowerCase();I=I.filter(k=>Object.values(k).some(C=>String(C).toLowerCase().includes(N)))}return r&&t.columns&&(I=[...I].sort((N,k)=>{const C=N[r],A=k[r];return C<A?i==="asc"?-1:1:C>A?i==="asc"?1:-1:0})),I},[t,a,r,i]),_=Math.ceil(v.length/f),b=v.slice((u-1)*f,u*f),p=()=>{if(t.columns&&t.data){const I=rO(t.data,t.columns);g(I,"results.csv","text/csv")}},h=()=>{const I=t.data||t.result;if(I){const N=sO(Array.isArray(I)?I:[I]);g(N,"results.json","application/json")}},g=(I,N,k)=>{const C=new Blob([I],{type:k}),A=URL.createObjectURL(C),L=document.createElement("a");L.href=A,L.download=N,document.body.appendChild(L),L.click(),document.body.removeChild(L),URL.revokeObjectURL(A)},S=t.columns||(v.length>0?Object.keys(v[0]):[]),x=v.length;return c.jsxs("div",{className:"flex flex-col h-full",children:[c.jsxs("div",{className:"flex items-center justify-between p-2 border-b border-border-color bg-secondary",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[t.type==="sql"&&c.jsxs(c.Fragment,{children:[c.jsxs("button",{onClick:()=>n("table"),className:`flex items-center gap-1.5 px-2 py-1 rounded text-xs transition-colors ${e==="table"?"bg-accent text-white":"hover:bg-tertiary"}`,children:[c.jsx(cE,{size:14}),"Table"]}),c.jsxs("button",{onClick:()=>n("json"),className:`flex items-center gap-1.5 px-2 py-1 rounded text-xs transition-colors ${e==="json"?"bg-accent text-white":"hover:bg-tertiary"}`,children:[c.jsx(cw,{size:14}),"JSON"]})]}),(t.type==="python"||t.output)&&c.jsxs("button",{onClick:()=>n("text"),className:`flex items-center gap-1.5 px-2 py-1 rounded text-xs transition-colors ${e==="text"?"bg-accent text-white":"hover:bg-tertiary"}`,children:[c.jsx(Af,{size:14}),"Output"]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[e==="table"&&c.jsxs("div",{className:"relative",children:[c.jsx(hu,{size:14,className:"absolute left-2 top-1/2 -translate-y-1/2 text-text-secondary"}),c.jsx("input",{type:"text",placeholder:"Filter...",value:a,onChange:I=>l(I.target.value),className:"pl-7 pr-3 py-1 text-xs bg-tertiary rounded border-none outline-none focus:ring-1 focus:ring-accent w-32"})]}),c.jsxs("button",{onClick:p,className:"flex items-center gap-1.5 px-2 py-1 rounded text-xs hover:bg-tertiary transition-colors",title:"Export as CSV",children:[c.jsx(Sy,{size:14}),"CSV"]}),c.jsxs("button",{onClick:h,className:"flex items-center gap-1.5 px-2 py-1 rounded text-xs hover:bg-tertiary transition-colors",title:"Export as JSON",children:[c.jsx(Sy,{size:14}),"JSON"]})]})]}),c.jsx("div",{className:"flex-1 overflow-auto",children:m==="table"&&S.length>0?c.jsxs("table",{className:"w-full text-xs",children:[c.jsx("thead",{className:"bg-tertiary sticky top-0",children:c.jsx("tr",{children:S.map(I=>c.jsx("th",{onClick:()=>y(I),className:"text-left px-3 py-2 font-medium text-text-secondary cursor-pointer hover:bg-active select-none whitespace-nowrap",children:c.jsxs("div",{className:"flex items-center gap-1",children:[I,r===I&&(i==="asc"?c.jsx(DI,{size:12}):c.jsx(da,{size:12}))]})},I))})}),c.jsx("tbody",{children:b.map((I,N)=>c.jsx("tr",{className:N%2===0?"bg-primary":"bg-secondary",children:S.map(k=>c.jsx("td",{className:"px-3 py-2 border-t border-border-color whitespace-nowrap overflow-hidden text-ellipsis max-w-[200px]",title:String(I[k]),children:I[k]===null||I[k]===void 0?c.jsx("span",{className:"text-text-secondary italic",children:"null"}):String(I[k])},k))},N))})]}):m==="plot"&&t.plot?c.jsx("div",{className:"flex items-center justify-center h-full p-4",children:c.jsx("img",{src:`data:image/png;base64,${t.plot}`,alt:"Plot",className:"max-w-full max-h-full"})}):m==="json"?c.jsx("pre",{className:"p-4 text-xs font-mono whitespace-pre-wrap",children:JSON.stringify(t.result||t.data,null,2)}):c.jsx("pre",{className:"p-4 text-xs font-mono whitespace-pre-wrap",children:t.output||(t.result!==void 0?String(t.result):"No output")})}),c.jsxs("div",{className:"flex items-center justify-between px-3 py-1.5 border-t border-border-color bg-secondary text-xs text-text-secondary",children:[c.jsx("div",{children:x>0&&c.jsxs("span",{children:[x," ",x===1?"row":"rows",_>1&&`  Page ${u} of ${_}`]})}),c.jsxs("div",{className:"flex items-center gap-3",children:[_>1&&c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("button",{onClick:()=>d(I=>Math.max(1,I-1)),disabled:u===1,className:"px-2 py-0.5 rounded hover:bg-tertiary disabled:opacity-30",children:""}),c.jsx("span",{className:"px-2",children:u}),c.jsx("button",{onClick:()=>d(I=>Math.min(_,I+1)),disabled:u===_,className:"px-2 py-0.5 rounded hover:bg-tertiary disabled:opacity-30",children:""})]}),c.jsxs("span",{children:[(t.executionTime/1e3).toFixed(3),"s"]})]})]})]})};let es=null,_d=!1,Ha=null;const qf=async()=>es||Ha||(_d=!0,Ha=new Promise(async(t,e)=>{try{const{loadPyodide:n}=await Si(async()=>{const{loadPyodide:s}=await import("./pyodide-EvrOVYIo.js");return{loadPyodide:s}},[]);es=await n({indexURL:"https://cdn.jsdelivr.net/pyodide/v0.25.0/full/",stdout:s=>console.log("[Python]",s),stderr:s=>console.error("[Python]",s)}),await es.loadPackage(["pandas","numpy","micropip"]),await es.runPythonAsync(`
        import micropip
        await micropip.install(['pyyaml'])
      `),_d=!1,t(es)}catch(n){_d=!1,console.error("Failed to initialize Pyodide:",n),e(n)}}),Ha),Ax=t=>{var e;return((e=t.split(".").pop())==null?void 0:e.toLowerCase())||""},oO=async(t,e,n,r)=>{const s=Ax(e);t.globals.set("__raw_content__",n),t.globals.set("__file_path__",e),t.globals.set("__file_extension__",s),t.globals.set("load_json",i=>{const o=i||t.globals.get("__raw_content__");try{return JSON.parse(o)}catch(a){throw new Error(`Invalid JSON: ${a}`)}}),t.globals.set("load_csv",i=>{t.runPythonAsync(`
      import pandas as pd
      import io
      
      csv_content = __raw_content__ if not ${i?`'${i}'`:"None"} else '${i}'
      df = pd.read_csv(io.StringIO(csv_content))
      df
    `)}),t.globals.set("save",i=>{if(r){let o;typeof i=="string"?o=i:o=JSON.stringify(i,null,2),r(o)}}),t.globals.set("load_yaml",i=>{const o=i||t.globals.get("__raw_content__");return t.runPythonAsync(`
      import yaml
      yaml.safe_load('''${o.replace(/'/g,"'\\''")}''')
    `)}),t.globals.set("load_xml",i=>{const o=i||t.globals.get("__raw_content__");return t.runPythonAsync(`
      import xml.etree.ElementTree as ET
      root = ET.fromstring('''${o.replace(/'/g,"'\\''")}''')
      root
    `)}),await t.runPythonAsync(`
# Set up the environment
import json
import re
import sys
from io import StringIO

# Capture output
_output_buffer = StringIO()
_original_stdout = sys.stdout
sys.stdout = _output_buffer

# Content variable
content = __raw_content__
file_path = __file_path__
file_ext = __file_extension__

# Auto-load based on file extension
if file_ext == 'json':
    try:
        data = json.loads(content)
    except:
        data = None
elif file_ext in ['csv', 'tsv']:
    try:
        import pandas as pd
        from io import StringIO as _StringIO
        data = pd.read_csv(_StringIO(content))
    except:
        data = None
else:
    data = content
`)},aO=async(t,e,n,r)=>{const s=performance.now();try{const i=await qf();await oO(i,e,n,r),await i.runPythonAsync(`
_output_buffer.truncate(0)
_output_buffer.seek(0)
`);let o=await i.runPythonAsync(t);const a=await i.runPythonAsync("_output_buffer.getvalue()");let l=null,u=null;if(o!=null){const f=await i.runPythonAsync(`
import matplotlib
result_type = type(result).__name__
module_name = type(result).__module__ if hasattr(type(result), '__module__') else ''
is_figure = 'matplotlib' in module_name and 'Figure' in result_type
is_axes = 'matplotlib' in module_name and 'Axes' in result_type
result_type, is_figure, is_axes
`);if(f&&(f[1]||f[2]))u=await i.runPythonAsync(`
import matplotlib.pyplot as plt
import io
import base64

# Get the current figure
if 'Axes' in str(type(result)):
    fig = result.figure
else:
    fig = result

# Save to buffer
buf = io.BytesIO()
fig.savefig(buf, format='png', bbox_inches='tight', dpi=100)
buf.seek(0)
img_base64 = base64.b64encode(buf.read()).decode('utf-8')
plt.close(fig)
img_base64
`);else try{l=await i.runPythonAsync(`
import pandas as pd
import json

if isinstance(result, pd.DataFrame):
    result.to_dict('records')
elif isinstance(result, (list, dict, str, int, float, bool)):
    result
else:
    str(result)
`)}catch{l=String(o)}}const d=performance.now()-s;return{success:!0,result:l,output:a||void 0,executionTime:d,plot:u||void 0}}catch(i){const o=performance.now()-s;return{success:!1,error:i instanceof Error?i.message:String(i),executionTime:o}}},lO=t=>{switch(Ax(t)){case"json":return`# Python script for JSON data
import json

# 'content' contains the raw file content
# 'data' is auto-loaded for JSON files

print(f"Type: {type(data)}")
if isinstance(data, dict):
    print(f"Keys: {list(data.keys())}")
    print(f"Items: {len(data)}")
elif isinstance(data, list):
    print(f"Items: {len(data)}")
    print(f"\\nFirst {min(5, len(data))} items:")
    for item in data[:5]:
        print(item)

# Access the raw content if needed
# parsed = json.loads(content)

# Save changes back to file
# save(data)`;case"csv":case"tsv":return`# Python script for CSV data
import pandas as pd

# 'data' is auto-loaded as a pandas DataFrame
print(f"Shape: {data.shape}")
print(f"\\nColumns: {list(data.columns)}")
print(f"\\nFirst 5 rows:")
print(data.head())

# Filter data
# filtered = data[data['column_name'] > 100]

# Save changes back
# save(data.to_csv(index=False))`;case"yaml":case"yml":return`# Python script for YAML data
import yaml

# Parse YAML content
data = yaml.safe_load(content)

print(f"Type: {type(data)}")
if isinstance(data, dict):
    print(f"Keys: {list(data.keys())}")
    
# Save changes back
# save(yaml.dump(data, default_flow_style=False))`;case"xml":return`# Python script for XML data
import xml.etree.ElementTree as ET

# Parse XML
root = ET.fromstring(content)

print(f"Root tag: {root.tag}")
print(f"Root attributes: {root.attrib}")

# Iterate over elements
for child in root[:5]:
    print(f"  {child.tag}: {child.attrib}")`;case"txt":case"log":return`# Python script for text/log files
import re

# 'content' contains the raw text
lines = content.split('\\n')
print(f"Total lines: {len(lines)}")

# Example: Search for patterns
# matches = re.findall(r'ERROR.*', content)
# print(f"Errors found: {len(matches)}")

# Example: Count words
words = content.split()
print(f"Total words: {len(words)}")

# Example: Filter lines
# filtered = [line for line in lines if 'keyword' in line]`;default:return`# Python script
# 'content' contains the raw file content
# 'file_path' contains the full file path
# 'file_ext' contains the file extension

print(f"File: {file_path}")
print(f"Content length: {len(content)} characters")

# Write your code here
`}},ag=()=>es!==null,cO=()=>{var K;const{activeTabId:t,tabs:e,queryPanelOpen:n,queryLanguage:r,queryPanelHeight:s,toggleQueryPanel:i,setQueryLanguage:o,setQueryPanelHeight:a}=Te(),[l,u]=T.useState(""),[d,f]=T.useState(null),[m,y]=T.useState(!1),[v,_]=T.useState([]),[b,p]=T.useState([]),[h,g]=T.useState(!1),[S,x]=T.useState(!1),[I,N]=T.useState(!1),k=T.useRef(null),C=T.useRef(null),A=T.useRef(null),L=e.find(O=>O.id===t);T.useEffect(()=>{r==="python"&&!ag()&&!I&&(N(!0),qf().then(()=>{N(!1)}).catch(O=>{console.error("Failed to load Pyodide:",O),N(!1)}))},[r,I]),T.useEffect(()=>{if(L&&n){const O=window.__pendingQuery;if(O)u(O),window.__pendingQuery=null;else{const D=r==="sql"?nO(L.path):lO(L.path);u(D)}f(null)}},[t,r,n]),T.useEffect(()=>{var be;const O=xe=>{if(!A.current||!C.current)return;const Yt=window.innerHeight-xe.clientY,pr=Math.max(150,Math.min(600,Yt));a(pr)},D=()=>{document.removeEventListener("mousemove",O),document.removeEventListener("mouseup",D)},fe=()=>{document.addEventListener("mousemove",O),document.addEventListener("mouseup",D)};return(be=A.current)==null||be.addEventListener("mousedown",fe),()=>{var xe;(xe=A.current)==null||xe.removeEventListener("mousedown",fe)}},[a]),T.useEffect(()=>{const O=D=>{(D.ctrlKey||D.metaKey)&&D.shiftKey&&D.key==="Q"&&(D.preventDefault(),i()),(D.ctrlKey||D.metaKey)&&D.key==="Enter"&&n&&(D.preventDefault(),H())};return window.addEventListener("keydown",O),()=>window.removeEventListener("keydown",O)},[n,i,l,L,r]);const H=async()=>{var O;if(!(!L||!l.trim()||m)){y(!0),f(null);try{let D;if(r==="sql"){const fe=await tO(l,L.path,L.content);D={type:"sql",...fe,rowCount:(O=fe.data)==null?void 0:O.length}}else!ag()&&!I&&(N(!0),await qf(),N(!1)),D={type:"python",...await aO(l,L.path,L.content,be=>{const{updateTabContent:xe}=Te.getState();xe(L.id,be)})};f(D),D.success&&ye(l,r,L.path)}catch(D){f({type:r,success:!1,error:D instanceof Error?D.message:"Unknown error",executionTime:0})}finally{y(!1)}}},ye=(O,D,fe)=>{const be={id:Date.now().toString(),query:O,language:D,timestamp:Date.now(),filePath:fe};_(xe=>[be,...xe].slice(0,50))},le=()=>{if(!l.trim())return;const O=prompt("Enter a name for this query:");if(O){const D={id:Date.now().toString(),name:O,query:l,language:r};p(fe=>[...fe,D])}},j=O=>{p(D=>D.filter(fe=>fe.id!==O))},R=O=>{u(O.query),o(O.language),g(!1)},oe=O=>{u(O.query),o(O.language),x(!1)},M=()=>{confirm("Clear all query history?")&&_([])};if(!n)return null;const W=L&&(r==="sql"?["csv","tsv","json","jsonl","parquet"].includes(((K=L.path.split(".").pop())==null?void 0:K.toLowerCase())||""):!0);return c.jsxs("div",{ref:C,className:"border-t border-border-color bg-primary flex flex-col",style:{height:s},children:[c.jsx("div",{ref:A,className:"h-1 cursor-row-resize hover:bg-accent transition-colors flex items-center justify-center",children:c.jsx("div",{className:"w-8 h-0.5 bg-border-color rounded-full"})}),c.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[c.jsxs("div",{className:"w-1/2 min-w-[300px] flex flex-col border-r border-border-color",children:[c.jsxs("div",{className:"flex items-center justify-between p-2 border-b border-border-color bg-secondary",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("div",{className:"relative",children:[c.jsxs("select",{value:r,onChange:O=>o(O.target.value),className:"appearance-none bg-tertiary text-xs px-3 py-1.5 pr-8 rounded cursor-pointer outline-none focus:ring-1 focus:ring-accent",children:[c.jsx("option",{value:"sql",children:"SQL (DuckDB)"}),c.jsx("option",{value:"python",children:"Python"})]}),c.jsx(da,{size:12,className:"absolute right-2 top-1/2 -translate-y-1/2 pointer-events-none text-text-secondary"})]}),c.jsxs("button",{onClick:()=>g(!h),className:`p-1.5 rounded transition-colors relative ${h?"bg-accent text-white":"hover:bg-tertiary"}`,title:"Query History",children:[c.jsx(JI,{size:14}),v.length>0&&c.jsx("span",{className:"absolute -top-1 -right-1 w-4 h-4 bg-red-500 rounded-full text-[10px] flex items-center justify-center",children:v.length})]}),c.jsxs("button",{onClick:()=>x(!S),className:`p-1.5 rounded transition-colors relative ${S?"bg-accent text-white":"hover:bg-tertiary"}`,title:"Saved Queries",children:[c.jsx(LI,{size:14}),b.length>0&&c.jsx("span",{className:"absolute -top-1 -right-1 w-4 h-4 bg-accent rounded-full text-[10px] flex items-center justify-center",children:b.length})]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{onClick:le,disabled:!l.trim(),className:"flex items-center gap-1 px-2 py-1 text-xs rounded hover:bg-tertiary disabled:opacity-30 transition-colors",title:"Save Query",children:c.jsx(pw,{size:12})}),c.jsxs("button",{onClick:H,disabled:!W||m,className:"flex items-center gap-1.5 px-3 py-1.5 bg-accent hover:bg-accent/90 disabled:opacity-50 text-white text-xs rounded transition-colors",children:[m?c.jsx(kf,{size:14,className:"animate-spin"}):c.jsx(hw,{size:14}),"Run",c.jsx("span",{className:"text-white/70",children:""})]})]})]}),c.jsxs("div",{className:"flex-1 relative",children:[I&&c.jsx("div",{className:"absolute inset-0 bg-primary/90 z-10 flex items-center justify-center",children:c.jsxs("div",{className:"text-center",children:[c.jsx(kf,{size:24,className:"animate-spin mx-auto mb-2 text-accent"}),c.jsx("p",{className:"text-sm text-text-secondary",children:"Loading Python environment..."})]})}),c.jsx(op,{height:"100%",language:r==="sql"?"sql":"python",value:l,onChange:O=>u(O||""),theme:Te.getState().theme==="light"?"light":"vs-dark",options:{minimap:{enabled:!1},lineNumbers:"on",fontSize:13,wordWrap:"on",automaticLayout:!0,scrollBeyondLastLine:!1,suggestOnTriggerCharacters:!0,quickSuggestions:!0},onMount:O=>{var D,fe,be,xe;k.current=O,O.addCommand(((fe=(D=window.monaco)==null?void 0:D.KeyMod)==null?void 0:fe.CtrlCmd)|((xe=(be=window.monaco)==null?void 0:be.KeyCode)==null?void 0:xe.Enter),H)}})]}),(h||S)&&c.jsxs("div",{className:"absolute left-0 top-[41px] w-80 max-h-96 bg-secondary border border-border-color rounded-lg shadow-lg z-20 overflow-hidden flex flex-col",children:[c.jsxs("div",{className:"flex items-center justify-between p-2 border-b border-border-color",children:[c.jsx("span",{className:"text-sm font-medium",children:h?"Query History":"Saved Queries"}),c.jsx("button",{onClick:()=>h?g(!1):x(!1),className:"p-1 hover:bg-tertiary rounded",children:c.jsx(fa,{size:14})})]}),c.jsx("div",{className:"flex-1 overflow-y-auto",children:h?v.length===0?c.jsx("div",{className:"p-4 text-center text-text-secondary text-sm",children:"No queries yet"}):c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"flex justify-end p-2",children:c.jsxs("button",{onClick:M,className:"text-xs text-red-400 hover:text-red-300 flex items-center gap-1",children:[c.jsx(Tf,{size:12}),"Clear All"]})}),v.map(O=>c.jsxs("button",{onClick:()=>R(O),className:"w-full text-left p-2 hover:bg-tertiary border-b border-border-color last:border-0",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[c.jsx("span",{className:`text-[10px] px-1.5 rounded ${O.language==="sql"?"bg-blue-500/20 text-blue-400":"bg-yellow-500/20 text-yellow-400"}`,children:O.language.toUpperCase()}),c.jsx("span",{className:"text-xs text-text-secondary",children:new Date(O.timestamp).toLocaleString()})]}),c.jsx("pre",{className:"text-xs truncate font-mono",children:O.query})]},O.id))]}):b.length===0?c.jsx("div",{className:"p-4 text-center text-text-secondary text-sm",children:"No saved queries"}):b.map(O=>c.jsxs("div",{className:"p-2 hover:bg-tertiary border-b border-border-color last:border-0 group",children:[c.jsxs("div",{className:"flex items-center justify-between mb-1",children:[c.jsx("button",{onClick:()=>oe(O),className:"flex-1 text-left font-medium text-sm",children:O.name}),c.jsx("button",{onClick:()=>j(O.id),className:"opacity-0 group-hover:opacity-100 p-1 hover:bg-red-500/20 rounded text-red-400 transition-opacity",children:c.jsx(Tf,{size:12})})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:`text-[10px] px-1.5 rounded ${O.language==="sql"?"bg-blue-500/20 text-blue-400":"bg-yellow-500/20 text-yellow-400"}`,children:O.language.toUpperCase()}),c.jsx("pre",{className:"text-xs truncate font-mono text-text-secondary",children:O.query})]})]},O.id))})]})]}),c.jsx("div",{className:"flex-1 flex flex-col min-w-0",children:c.jsx(iO,{results:d})})]})]})},Tx={maxContentLength:8e3,includeSchema:!0,includeSampleData:!0,sampleRows:10},uO=t=>{const e=["csv","tsv","json","jsonl","parquet","xlsx","yaml","yml","xml"],n=["js","ts","jsx","tsx","py","rs","go","java","cpp","c","h","rb","php","swift","kt"],r=["log","logs"],s=["toml","ini","conf","config","env"],i=t.toLowerCase();return e.includes(i)?"data":n.includes(i)?"code":r.includes(i)?"log":s.includes(i)?"config":"text"},xd=(t={})=>{const{tabs:e,activeTabId:n}=Te.getState(),r=e.find(d=>d.id===n);if(!r)return null;const s={...Tx,...t},i=r.path.split(".").pop()||"",o=uO(i),a=r.content,l=dO(a,o,s);let u;return s.includeSchema&&o==="data"&&(u=fO(a,i,s)),{filePath:r.path,fileName:r.name,fileExtension:i,fileType:o,content:a.slice(0,s.maxContentLength),contentPreview:l,lineCount:a.split(`
`).length,schema:u,cursorPosition:r.cursorPosition}},dO=(t,e,n)=>{const r=t.split(`
`);if(r.length>n.sampleRows*3){const s=r.slice(0,n.sampleRows).join(`
`),i=r.slice(Math.floor(r.length/2),Math.floor(r.length/2)+n.sampleRows).join(`
`),o=r.slice(-n.sampleRows).join(`
`);return`${s}

... [${r.length-n.sampleRows*3} lines omitted] ...

${i}

... [${r.length-n.sampleRows*3} lines omitted] ...

${o}`}return t.length>n.maxContentLength?t.slice(0,n.maxContentLength)+`

... [content truncated] ...`:t},fO=(t,e,n)=>{try{switch(e.toLowerCase()){case"csv":case"tsv":return hO(t,n);case"json":case"jsonl":return pO(t,n);default:return}}catch(r){console.error("Failed to parse schema:",r);return}},hO=(t,e)=>{const n=t.includes("	")?"	":",",r=t.split(`
`).filter(a=>a.trim());if(r.length===0)return{columns:[],sampleRows:[],totalRows:0};const s=lg(r[0],n),i=[],o={};for(let a=1;a<Math.min(r.length,e.sampleRows+1);a++){const l=lg(r[a],n),u={};s.forEach((d,f)=>{u[d]=l[f]||""}),i.push(u)}return s.forEach(a=>{const l=i.map(u=>u[a]).filter(u=>u!=="");o[a]=mO(l)}),{columns:s,sampleRows:i,totalRows:r.length-1,inferredTypes:o}},lg=(t,e)=>{const n=[];let r="",s=!1;for(let i=0;i<t.length;i++){const o=t[i],a=t[i+1];o==='"'?s&&a==='"'?(r+='"',i++):s=!s:o===e&&!s?(n.push(r.trim()),r=""):r+=o}return n.push(r.trim()),n},pO=(t,e)=>{try{const n=JSON.parse(t);if(Array.isArray(n)){const r=n.slice(0,e.sampleRows),s=r.length>0?Object.keys(r[0]):[],i={};return s.forEach(o=>{const a=r.map(l=>l[o]).filter(l=>l!=null);i[o]=bd(a)}),{columns:s,sampleRows:r,totalRows:n.length,inferredTypes:i}}else if(typeof n=="object"&&n!==null)return{columns:Object.keys(n),sampleRows:[n],totalRows:1,inferredTypes:Object.fromEntries(Object.entries(n).map(([r,s])=>[r,bd([s])]))}}catch{const n=t.split(`
`).filter(o=>o.trim()),r=[];for(const o of n.slice(0,e.sampleRows))try{r.push(JSON.parse(o))}catch{}const s=r.length>0?Object.keys(r[0]):[],i={};return s.forEach(o=>{const a=r.map(l=>l[o]).filter(l=>l!=null);i[o]=bd(a)}),{columns:s,sampleRows:r,totalRows:n.length,inferredTypes:i}}return{columns:[],sampleRows:[],totalRows:0}},mO=t=>t.length===0?"unknown":t.every(e=>!isNaN(Number(e))&&e!=="")?t.every(e=>Number.isInteger(Number(e)))?"integer":"number":t.every(e=>!isNaN(Date.parse(e)))?"datetime":t.every(e=>["true","false","1","0","yes","no"].includes(e.toLowerCase()))?"boolean":"string",bd=t=>{if(t.length===0)return"unknown";const e=t[0],n=typeof e;return n==="boolean"?"boolean":n==="number"?Number.isInteger(e)?"integer":"number":n==="string"?isNaN(Date.parse(e))?"string":"datetime":Array.isArray(e)?"array":n==="object"?"object":"unknown"},yO=(t,e,n={})=>{var i;if(!t)return e;const r={...Tx,...n};let s=`${e}

`;return s+=`=== FILE CONTEXT ===
`,s+=`File: ${t.fileName}
`,s+=`Type: ${t.fileType}
`,s+=`Lines: ${t.lineCount}
`,t.schema&&r.includeSchema&&(s+=`
=== SCHEMA ===
`,s+=`Columns: ${(i=t.schema.columns)==null?void 0:i.join(", ")}
`,t.schema.inferredTypes&&(s+=`Types:
`,Object.entries(t.schema.inferredTypes).forEach(([o,a])=>{s+=`  ${o}: ${a}
`})),r.includeSampleData&&t.schema.sampleRows&&(s+=`
=== SAMPLE DATA (${t.schema.sampleRows.length} rows) ===
`,s+=JSON.stringify(t.schema.sampleRows,null,2),s+=`
`),t.schema.totalRows&&(s+=`
Total rows: ${t.schema.totalRows}
`)),s+=`
=== FILE CONTENT ===
`,s+=t.contentPreview,t.cursorPosition&&(s+=`

Cursor position: Line ${t.cursorPosition.line}, Column ${t.cursorPosition.column}
`),s+=`
=== END FILE CONTEXT ===
`,s};function se(t,e,n,r,s){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,n),n}function E(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)}let Ox=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return Ox=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,r=>(+r^n()&15>>+r/4).toString(16))};function Hf(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const Qf=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};class Q extends Error{}class lt extends Q{constructor(e,n,r,s){super(`${lt.makeMessage(e,n,r)}`),this.status=e,this.headers=s,this.requestID=s==null?void 0:s.get("x-request-id"),this.error=n;const i=n;this.code=i==null?void 0:i.code,this.param=i==null?void 0:i.param,this.type=i==null?void 0:i.type}static makeMessage(e,n,r){const s=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):r;return e&&s?`${e} ${s}`:e?`${e} status code (no body)`:s||"(no status code or body)"}static generate(e,n,r,s){if(!e||!s)return new _u({message:r,cause:Qf(n)});const i=n==null?void 0:n.error;return e===400?new Cx(e,i,r,s):e===401?new Rx(e,i,r,s):e===403?new jx(e,i,r,s):e===404?new Fx(e,i,r,s):e===409?new Px(e,i,r,s):e===422?new Lx(e,i,r,s):e===429?new Mx(e,i,r,s):e>=500?new Dx(e,i,r,s):new lt(e,i,r,s)}}class sn extends lt{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class _u extends lt{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class Pp extends _u{constructor({message:e}={}){super({message:e!=null?e:"Request timed out."})}}class Cx extends lt{}class Rx extends lt{}class jx extends lt{}class Fx extends lt{}class Px extends lt{}class Lx extends lt{}class Mx extends lt{}class Dx extends lt{}class Bx extends Q{constructor(){super("Could not parse response content as the length limit was reached")}}class Ux extends Q{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}class lo extends Error{constructor(e){super(e)}}const gO=/^[a-z][a-z0-9+.-]*:/i,vO=t=>gO.test(t);let kt=t=>(kt=Array.isArray,kt(t)),cg=kt;function $x(t){return typeof t!="object"?{}:t!=null?t:{}}function wO(t){if(!t)return!0;for(const e in t)return!1;return!0}function _O(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Sd(t){return t!=null&&typeof t=="object"&&!Array.isArray(t)}const xO=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Q(`${t} must be an integer`);if(e<0)throw new Q(`${t} must be a positive integer`);return e},bO=t=>{try{return JSON.parse(t)}catch{return}},wa=t=>new Promise(e=>setTimeout(e,t)),zs="6.18.0",SO=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u";function IO(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const EO=()=>{var n,r,s,i,o;const t=IO();if(t==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":zs,"X-Stainless-OS":dg(Deno.build.os),"X-Stainless-Arch":ug(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(r=(n=Deno.version)==null?void 0:n.deno)!=null?r:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":zs,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(t==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":zs,"X-Stainless-OS":dg((s=globalThis.process.platform)!=null?s:"unknown"),"X-Stainless-Arch":ug((i=globalThis.process.arch)!=null?i:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(o=globalThis.process.version)!=null?o:"unknown"};const e=NO();return e?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":zs,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${e.browser}`,"X-Stainless-Runtime-Version":e.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":zs,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function NO(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const r=n.exec(navigator.userAgent);if(r){const s=r[1]||0,i=r[2]||0,o=r[3]||0;return{browser:e,version:`${s}.${i}.${o}`}}}return null}const ug=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",dg=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let Qa;const kO=()=>Qa!=null?Qa:Qa=EO();function AO(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new OpenAI({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function zx(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function Vx(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return zx({start(){},async pull(n){const{done:r,value:s}=await e.next();r?n.close():n.enqueue(s)},async cancel(){var n;await((n=e.return)==null?void 0:n.call(e))}})}function Wx(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function TO(t){var r,s;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((s=(r=t[Symbol.asyncIterator]()).return)==null?void 0:s.call(r));return}const e=t.getReader(),n=e.cancel();e.releaseLock(),await n}const OO=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)}),qx="RFC3986",Hx=t=>String(t),fg={RFC1738:t=>String(t).replace(/%20/g,"+"),RFC3986:Hx},CO="RFC1738";let Kf=(t,e)=>{var n;return Kf=(n=Object.hasOwn)!=null?n:Function.prototype.call.bind(Object.prototype.hasOwnProperty),Kf(t,e)};const En=(()=>{const t=[];for(let e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t})(),Id=1024,RO=(t,e,n,r,s)=>{if(t.length===0)return t;let i=t;if(typeof t=="symbol"?i=Symbol.prototype.toString.call(t):typeof t!="string"&&(i=String(t)),n==="iso-8859-1")return escape(i).replace(/%u[0-9a-f]{4}/gi,function(a){return"%26%23"+parseInt(a.slice(2),16)+"%3B"});let o="";for(let a=0;a<i.length;a+=Id){const l=i.length>=Id?i.slice(a,a+Id):i,u=[];for(let d=0;d<l.length;++d){let f=l.charCodeAt(d);if(f===45||f===46||f===95||f===126||f>=48&&f<=57||f>=65&&f<=90||f>=97&&f<=122||s===CO&&(f===40||f===41)){u[u.length]=l.charAt(d);continue}if(f<128){u[u.length]=En[f];continue}if(f<2048){u[u.length]=En[192|f>>6]+En[128|f&63];continue}if(f<55296||f>=57344){u[u.length]=En[224|f>>12]+En[128|f>>6&63]+En[128|f&63];continue}d+=1,f=65536+((f&1023)<<10|l.charCodeAt(d)&1023),u[u.length]=En[240|f>>18]+En[128|f>>12&63]+En[128|f>>6&63]+En[128|f&63]}o+=u.join("")}return o};function jO(t){return!t||typeof t!="object"?!1:!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))}function hg(t,e){if(kt(t)){const n=[];for(let r=0;r<t.length;r+=1)n.push(e(t[r]));return n}return e(t)}const Qx={brackets(t){return String(t)+"[]"},comma:"comma",indices(t,e){return String(t)+"["+e+"]"},repeat(t){return String(t)}},Kx=function(t,e){Array.prototype.push.apply(t,kt(e)?e:[e])};let Ka;const Je={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:RO,encodeValuesOnly:!1,format:qx,formatter:Hx,indices:!1,serializeDate(t){return(Ka!=null?Ka:Ka=Function.prototype.call.bind(Date.prototype.toISOString))(t)},skipNulls:!1,strictNullHandling:!1};function FO(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t=="symbol"||typeof t=="bigint"}const Ed={};function Jx(t,e,n,r,s,i,o,a,l,u,d,f,m,y,v,_,b,p){let h=t,g=p,S=0,x=!1;for(;(g=g.get(Ed))!==void 0&&!x;){const A=g.get(t);if(S+=1,typeof A<"u"){if(A===S)throw new RangeError("Cyclic object value");x=!0}typeof g.get(Ed)>"u"&&(S=0)}if(typeof u=="function"?h=u(e,h):h instanceof Date?h=m==null?void 0:m(h):n==="comma"&&kt(h)&&(h=hg(h,function(A){return A instanceof Date?m==null?void 0:m(A):A})),h===null){if(i)return l&&!_?l(e,Je.encoder,b,"key",y):e;h=""}if(FO(h)||jO(h)){if(l){const A=_?e:l(e,Je.encoder,b,"key",y);return[(v==null?void 0:v(A))+"="+(v==null?void 0:v(l(h,Je.encoder,b,"value",y)))]}return[(v==null?void 0:v(e))+"="+(v==null?void 0:v(String(h)))]}const I=[];if(typeof h>"u")return I;let N;if(n==="comma"&&kt(h))_&&l&&(h=hg(h,l)),N=[{value:h.length>0?h.join(",")||null:void 0}];else if(kt(u))N=u;else{const A=Object.keys(h);N=d?A.sort(d):A}const k=a?String(e).replace(/\./g,"%2E"):String(e),C=r&&kt(h)&&h.length===1?k+"[]":k;if(s&&kt(h)&&h.length===0)return C+"[]";for(let A=0;A<N.length;++A){const L=N[A],H=typeof L=="object"&&typeof L.value<"u"?L.value:h[L];if(o&&H===null)continue;const ye=f&&a?L.replace(/\./g,"%2E"):L,le=kt(h)?typeof n=="function"?n(C,ye):C:C+(f?"."+ye:"["+ye+"]");p.set(t,S);const j=new WeakMap;j.set(Ed,p),Kx(I,Jx(H,le,n,r,s,i,o,a,n==="comma"&&_&&kt(h)?null:l,u,d,f,m,y,v,_,b,j))}return I}function PO(t=Je){if(typeof t.allowEmptyArrays<"u"&&typeof t.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof t.encodeDotInKeys<"u"&&typeof t.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(t.encoder!==null&&typeof t.encoder<"u"&&typeof t.encoder!="function")throw new TypeError("Encoder has to be a function.");const e=t.charset||Je.charset;if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let n=qx;if(typeof t.format<"u"){if(!Kf(fg,t.format))throw new TypeError("Unknown format option provided.");n=t.format}const r=fg[n];let s=Je.filter;(typeof t.filter=="function"||kt(t.filter))&&(s=t.filter);let i;if(t.arrayFormat&&t.arrayFormat in Qx?i=t.arrayFormat:"indices"in t?i=t.indices?"indices":"repeat":i=Je.arrayFormat,"commaRoundTrip"in t&&typeof t.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const o=typeof t.allowDots>"u"?t.encodeDotInKeys?!0:Je.allowDots:!!t.allowDots;return{addQueryPrefix:typeof t.addQueryPrefix=="boolean"?t.addQueryPrefix:Je.addQueryPrefix,allowDots:o,allowEmptyArrays:typeof t.allowEmptyArrays=="boolean"?!!t.allowEmptyArrays:Je.allowEmptyArrays,arrayFormat:i,charset:e,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:Je.charsetSentinel,commaRoundTrip:!!t.commaRoundTrip,delimiter:typeof t.delimiter>"u"?Je.delimiter:t.delimiter,encode:typeof t.encode=="boolean"?t.encode:Je.encode,encodeDotInKeys:typeof t.encodeDotInKeys=="boolean"?t.encodeDotInKeys:Je.encodeDotInKeys,encoder:typeof t.encoder=="function"?t.encoder:Je.encoder,encodeValuesOnly:typeof t.encodeValuesOnly=="boolean"?t.encodeValuesOnly:Je.encodeValuesOnly,filter:s,format:n,formatter:r,serializeDate:typeof t.serializeDate=="function"?t.serializeDate:Je.serializeDate,skipNulls:typeof t.skipNulls=="boolean"?t.skipNulls:Je.skipNulls,sort:typeof t.sort=="function"?t.sort:null,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:Je.strictNullHandling}}function LO(t,e={}){let n=t;const r=PO(e);let s,i;typeof r.filter=="function"?(i=r.filter,n=i("",n)):kt(r.filter)&&(i=r.filter,s=i);const o=[];if(typeof n!="object"||n===null)return"";const a=Qx[r.arrayFormat],l=a==="comma"&&r.commaRoundTrip;s||(s=Object.keys(n)),r.sort&&s.sort(r.sort);const u=new WeakMap;for(let m=0;m<s.length;++m){const y=s[m];r.skipNulls&&n[y]===null||Kx(o,Jx(n[y],y,a,l,r.allowEmptyArrays,r.strictNullHandling,r.skipNulls,r.encodeDotInKeys,r.encode?r.encoder:null,r.filter,r.sort,r.allowDots,r.serializeDate,r.format,r.formatter,r.encodeValuesOnly,r.charset,u))}const d=o.join(r.delimiter);let f=r.addQueryPrefix===!0?"?":"";return r.charsetSentinel&&(r.charset==="iso-8859-1"?f+="utf8=%26%2310003%3B&":f+="utf8=%E2%9C%93&"),d.length>0?f+d:""}function MO(t){let e=0;for(const s of t)e+=s.length;const n=new Uint8Array(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return n}let Ja;function Lp(t){let e;return(Ja!=null?Ja:(e=new globalThis.TextEncoder,Ja=e.encode.bind(e)))(t)}let Ya;function pg(t){let e;return(Ya!=null?Ya:(e=new globalThis.TextDecoder,Ya=e.decode.bind(e)))(t)}var Mt,Dt;class xu{constructor(){Mt.set(this,void 0),Dt.set(this,void 0),se(this,Mt,new Uint8Array),se(this,Dt,null)}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?Lp(e):e;se(this,Mt,MO([E(this,Mt,"f"),n]));const r=[];let s;for(;(s=DO(E(this,Mt,"f"),E(this,Dt,"f")))!=null;){if(s.carriage&&E(this,Dt,"f")==null){se(this,Dt,s.index);continue}if(E(this,Dt,"f")!=null&&(s.index!==E(this,Dt,"f")+1||s.carriage)){r.push(pg(E(this,Mt,"f").subarray(0,E(this,Dt,"f")-1))),se(this,Mt,E(this,Mt,"f").subarray(E(this,Dt,"f"))),se(this,Dt,null);continue}const i=E(this,Dt,"f")!==null?s.preceding-1:s.preceding,o=pg(E(this,Mt,"f").subarray(0,i));r.push(o),se(this,Mt,E(this,Mt,"f").subarray(s.index)),se(this,Dt,null)}return r}flush(){return E(this,Mt,"f").length?this.decode(`
`):[]}}Mt=new WeakMap,Dt=new WeakMap;xu.NEWLINE_CHARS=new Set([`
`,"\r"]);xu.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function DO(t,e){for(let s=e!=null?e:0;s<t.length;s++){if(t[s]===10)return{preceding:s,index:s+1,carriage:!1};if(t[s]===13)return{preceding:s,index:s+1,carriage:!0}}return null}function BO(t){for(let r=0;r<t.length-1;r++){if(t[r]===10&&t[r+1]===10||t[r]===13&&t[r+1]===13)return r+2;if(t[r]===13&&t[r+1]===10&&r+3<t.length&&t[r+2]===13&&t[r+3]===10)return r+4}return-1}const $c={off:0,error:200,warn:300,info:400,debug:500},mg=(t,e,n)=>{if(t){if(_O($c,t))return t;st(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys($c))}`)}};function co(){}function Ga(t,e,n){return!e||$c[t]>$c[n]?co:e[t].bind(e)}const UO={error:co,warn:co,info:co,debug:co};let yg=new WeakMap;function st(t){var i;const e=t.logger,n=(i=t.logLevel)!=null?i:"off";if(!e)return UO;const r=yg.get(e);if(r&&r[0]===n)return r[1];const s={error:Ga("error",e,n),warn:Ga("warn",e,n),info:Ga("info",e,n),debug:Ga("debug",e,n)};return yg.set(e,[n,s]),s}const ts=t=>(t.options&&(t.options={...t.options},delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);var Ki;class Mn{constructor(e,n,r){this.iterator=e,Ki.set(this,void 0),this.controller=n,se(this,Ki,r)}static fromSSEResponse(e,n,r){let s=!1;const i=r?st(r):console;async function*o(){if(s)throw new Q("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let a=!1;try{for await(const l of $O(e,n))if(!a){if(l.data.startsWith("[DONE]")){a=!0;continue}if(l.event===null||!l.event.startsWith("thread.")){let u;try{u=JSON.parse(l.data)}catch(d){throw i.error("Could not parse message into JSON:",l.data),i.error("From chunk:",l.raw),d}if(u&&u.error)throw new lt(void 0,u.error,void 0,e.headers);yield u}else{let u;try{u=JSON.parse(l.data)}catch(d){throw console.error("Could not parse message into JSON:",l.data),console.error("From chunk:",l.raw),d}if(l.event=="error")throw new lt(void 0,u.error,u.message,void 0);yield{event:l.event,data:u}}}a=!0}catch(l){if(Hf(l))return;throw l}finally{a||n.abort()}}return new Mn(o,n,r)}static fromReadableStream(e,n,r){let s=!1;async function*i(){const a=new xu,l=Wx(e);for await(const u of l)for(const d of a.decode(u))yield d;for(const u of a.flush())yield u}async function*o(){if(s)throw new Q("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let a=!1;try{for await(const l of i())a||l&&(yield JSON.parse(l));a=!0}catch(l){if(Hf(l))return;throw l}finally{a||n.abort()}}return new Mn(o,n,r)}[(Ki=new WeakMap,Symbol.asyncIterator)](){return this.iterator()}tee(){const e=[],n=[],r=this.iterator(),s=i=>({next:()=>{if(i.length===0){const o=r.next();e.push(o),n.push(o)}return i.shift()}});return[new Mn(()=>s(e),this.controller,E(this,Ki,"f")),new Mn(()=>s(n),this.controller,E(this,Ki,"f"))]}toReadableStream(){const e=this;let n;return zx({async start(){n=e[Symbol.asyncIterator]()},async pull(r){try{const{value:s,done:i}=await n.next();if(i)return r.close();const o=Lp(JSON.stringify(s)+`
`);r.enqueue(o)}catch(s){r.error(s)}},async cancel(){var r;await((r=n.return)==null?void 0:r.call(n))}})}}async function*$O(t,e){if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Q("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Q("Attempted to iterate over a response with no body");const n=new VO,r=new xu,s=Wx(t.body);for await(const i of zO(s))for(const o of r.decode(i)){const a=n.decode(o);a&&(yield a)}for(const i of r.flush()){const o=n.decode(i);o&&(yield o)}}async function*zO(t){let e=new Uint8Array;for await(const n of t){if(n==null)continue;const r=n instanceof ArrayBuffer?new Uint8Array(n):typeof n=="string"?Lp(n):n;let s=new Uint8Array(e.length+r.length);s.set(e),s.set(r,e.length),e=s;let i;for(;(i=BO(e))!==-1;)yield e.slice(0,i),e=e.slice(i)}e.length>0&&(yield e)}class VO{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const i={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],i}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,r,s]=WO(e,":");return s.startsWith(" ")&&(s=s.substring(1)),n==="event"?this.event=s:n==="data"&&this.data.push(s),null}}function WO(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}async function Yx(t,e){const{response:n,requestLogID:r,retryOfRequestLogID:s,startTime:i}=e,o=await(async()=>{var f;if(e.options.stream)return st(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):Mn.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const a=n.headers.get("content-type"),l=(f=a==null?void 0:a.split(";")[0])==null?void 0:f.trim();if((l==null?void 0:l.includes("application/json"))||(l==null?void 0:l.endsWith("+json"))){if(n.headers.get("content-length")==="0")return;const y=await n.json();return Gx(y,n)}return await n.text()})();return st(t).debug(`[${r}] response parsed`,ts({retryOfRequestLogID:s,url:n.url,status:n.status,body:o,durationMs:Date.now()-i})),o}function Gx(t,e){return!t||typeof t!="object"||Array.isArray(t)?t:Object.defineProperty(t,"_request_id",{value:e.headers.get("x-request-id"),enumerable:!1})}var uo;class bu extends Promise{constructor(e,n,r=Yx){super(s=>{s(null)}),this.responsePromise=n,this.parseResponse=r,uo.set(this,void 0),se(this,uo,e)}_thenUnwrap(e){return new bu(E(this,uo,"f"),this.responsePromise,async(n,r)=>Gx(e(await this.parseResponse(n,r),r),r.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n,request_id:n.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(E(this,uo,"f"),e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}uo=new WeakMap;var Xa;class Mp{constructor(e,n,r,s){Xa.set(this,void 0),se(this,Xa,e),this.options=s,this.response=n,this.body=r}hasNextPage(){return this.getPaginatedItems().length?this.nextPageRequestOptions()!=null:!1}async getNextPage(){const e=this.nextPageRequestOptions();if(!e)throw new Q("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");return await E(this,Xa,"f").requestAPIList(this.constructor,e)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(Xa=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const n of e.getPaginatedItems())yield n}}class qO extends bu{constructor(e,n,r){super(e,n,async(s,i)=>new r(s,i.response,await Yx(s,i),i.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const n of e)yield n}}class Su extends Mp{constructor(e,n,r,s){super(e,n,r,s),this.data=r.data||[],this.object=r.object}getPaginatedItems(){var e;return(e=this.data)!=null?e:[]}nextPageRequestOptions(){return null}}class Qe extends Mp{constructor(e,n,r,s){super(e,n,r,s),this.data=r.data||[],this.has_more=r.has_more||!1}getPaginatedItems(){var e;return(e=this.data)!=null?e:[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){var r;const e=this.getPaginatedItems(),n=(r=e[e.length-1])==null?void 0:r.id;return n?{...this.options,query:{...$x(this.options.query),after:n}}:null}}class zc extends Mp{constructor(e,n,r,s){super(e,n,r,s),this.data=r.data||[],this.has_more=r.has_more||!1,this.last_id=r.last_id||""}getPaginatedItems(){var e;return(e=this.data)!=null?e:[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){const e=this.last_id;return e?{...this.options,query:{...$x(this.options.query),after:e}}:null}}const Xx=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,n=typeof((t=e==null?void 0:e.versions)==null?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Oo(t,e,n){return Xx(),new File(t,e!=null?e:"unknown_file",n)}function Ol(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const Dp=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function",gg=async(t,e)=>Jf(t.body)?{...t,body:await Zx(t.body,e)}:t,ws=async(t,e)=>({...t,body:await Zx(t.body,e)}),vg=new WeakMap;function HO(t){const e=typeof t=="function"?t:t.fetch,n=vg.get(e);if(n)return n;const r=(async()=>{try{const s="Response"in e?e.Response:(await e("data:,")).constructor,i=new FormData;return i.toString()!==await new s(i).text()}catch{return!0}})();return vg.set(e,r),r}const Zx=async(t,e)=>{if(!await HO(e))throw new TypeError("The provided fetch function does not support file uploads with the current global FormData class.");const n=new FormData;return await Promise.all(Object.entries(t||{}).map(([r,s])=>Yf(n,r,s))),n},eb=t=>t instanceof Blob&&"name"in t,QO=t=>typeof t=="object"&&t!==null&&(t instanceof Response||Dp(t)||eb(t)),Jf=t=>{if(QO(t))return!0;if(Array.isArray(t))return t.some(Jf);if(t&&typeof t=="object"){for(const e in t)if(Jf(t[e]))return!0}return!1},Yf=async(t,e,n)=>{if(n!==void 0){if(n==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")t.append(e,String(n));else if(n instanceof Response)t.append(e,Oo([await n.blob()],Ol(n)));else if(Dp(n))t.append(e,Oo([await new Response(Vx(n)).blob()],Ol(n)));else if(eb(n))t.append(e,n,Ol(n));else if(Array.isArray(n))await Promise.all(n.map(r=>Yf(t,e+"[]",r)));else if(typeof n=="object")await Promise.all(Object.entries(n).map(([r,s])=>Yf(t,`${e}[${r}]`,s)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${n} instead`)}},tb=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",KO=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&tb(t),JO=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function YO(t,e,n){if(Xx(),t=await t,KO(t))return t instanceof File?t:Oo([await t.arrayBuffer()],t.name);if(JO(t)){const s=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),Oo(await Gf(s),e,n)}const r=await Gf(t);if(e||(e=Ol(t)),!(n!=null&&n.type)){const s=r.find(i=>typeof i=="object"&&"type"in i&&i.type);typeof s=="string"&&(n={...n,type:s})}return Oo(r,e,n)}async function Gf(t){var n;let e=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)e.push(t);else if(tb(t))e.push(t instanceof Blob?t:await t.arrayBuffer());else if(Dp(t))for await(const r of t)e.push(...await Gf(r));else{const r=(n=t==null?void 0:t.constructor)==null?void 0:n.name;throw new Error(`Unexpected data type: ${typeof t}${r?`; constructor: ${r}`:""}${GO(t)}`)}return e}function GO(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}class V{constructor(e){this._client=e}}function nb(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const wg=Object.freeze(Object.create(null)),XO=(t=nb)=>function(n,...r){if(n.length===1)return n[0];let s=!1;const i=[],o=n.reduce((d,f,m)=>{var _,b,p;/[?#]/.test(f)&&(s=!0);const y=r[m];let v=(s?encodeURIComponent:t)(""+y);return m!==r.length&&(y==null||typeof y=="object"&&y.toString===((p=Object.getPrototypeOf((b=Object.getPrototypeOf((_=y.hasOwnProperty)!=null?_:wg))!=null?b:wg))==null?void 0:p.toString))&&(v=y+"",i.push({start:d.length+f.length,length:v.length,error:`Value of type ${Object.prototype.toString.call(y).slice(8,-1)} is not a valid path parameter`})),d+f+(m===r.length?"":v)},""),a=o.split(/[?#]/,1)[0],l=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let u;for(;(u=l.exec(a))!==null;)i.push({start:u.index,length:u[0].length,error:`Value "${u[0]}" can't be safely passed as a path parameter`});if(i.sort((d,f)=>d.start-f.start),i.length>0){let d=0;const f=i.reduce((m,y)=>{const v=" ".repeat(y.start-d),_="^".repeat(y.length);return d=y.start+y.length,m+v+_},"");throw new Q(`Path parameters result in path with invalid segments:
${i.map(m=>m.error).join(`
`)}
${o}
${f}`)}return o},F=XO(nb);let rb=class extends V{list(e,n={},r){return this._client.getAPIList(F`/chat/completions/${e}/messages`,Qe,{query:n,...r})}};function Vc(t){return t!==void 0&&"function"in t&&t.function!==void 0}function Bp(t){return(t==null?void 0:t.$brand)==="auto-parseable-response-format"}function _a(t){return(t==null?void 0:t.$brand)==="auto-parseable-tool"}function ZO(t,e){return!e||!sb(e)?{...t,choices:t.choices.map(n=>(ib(n.message.tool_calls),{...n,message:{...n.message,parsed:null,...n.message.tool_calls?{tool_calls:n.message.tool_calls}:void 0}}))}:Up(t,e)}function Up(t,e){const n=t.choices.map(r=>{var s,i;if(r.finish_reason==="length")throw new Bx;if(r.finish_reason==="content_filter")throw new Ux;return ib(r.message.tool_calls),{...r,message:{...r.message,...r.message.tool_calls?{tool_calls:(i=(s=r.message.tool_calls)==null?void 0:s.map(o=>tC(e,o)))!=null?i:void 0}:void 0,parsed:r.message.content&&!r.message.refusal?eC(e,r.message.content):null}}});return{...t,choices:n}}function eC(t,e){var n,r;return((n=t.response_format)==null?void 0:n.type)!=="json_schema"?null:((r=t.response_format)==null?void 0:r.type)==="json_schema"?"$parseRaw"in t.response_format?t.response_format.$parseRaw(e):JSON.parse(e):null}function tC(t,e){var r;const n=(r=t.tools)==null?void 0:r.find(s=>{var i;return Vc(s)&&((i=s.function)==null?void 0:i.name)===e.function.name});return{...e,function:{...e.function,parsed_arguments:_a(n)?n.$parseRaw(e.function.arguments):n!=null&&n.function.strict?JSON.parse(e.function.arguments):null}}}function nC(t,e){var r;if(!t||!("tools"in t)||!t.tools)return!1;const n=(r=t.tools)==null?void 0:r.find(s=>{var i;return Vc(s)&&((i=s.function)==null?void 0:i.name)===e.function.name});return Vc(n)&&(_a(n)||(n==null?void 0:n.function.strict)||!1)}function sb(t){var e,n;return Bp(t.response_format)?!0:(n=(e=t.tools)==null?void 0:e.some(r=>_a(r)||r.type==="function"&&r.function.strict===!0))!=null?n:!1}function ib(t){for(const e of t||[])if(e.type!=="function")throw new Q(`Currently only \`function\` tool calls are supported; Received \`${e.type}\``)}function rC(t){for(const e of t!=null?t:[]){if(e.type!=="function")throw new Q(`Currently only \`function\` tool types support auto-parsing; Received \`${e.type}\``);if(e.function.strict!==!0)throw new Q(`The \`${e.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}const Wc=t=>(t==null?void 0:t.role)==="assistant",ob=t=>(t==null?void 0:t.role)==="tool";var Xf,Cl,Rl,fo,ho,jl,po,Hn,mo,qc,Hc,Vs,ab;class $p{constructor(){Xf.add(this),this.controller=new AbortController,Cl.set(this,void 0),Rl.set(this,()=>{}),fo.set(this,()=>{}),ho.set(this,void 0),jl.set(this,()=>{}),po.set(this,()=>{}),Hn.set(this,{}),mo.set(this,!1),qc.set(this,!1),Hc.set(this,!1),Vs.set(this,!1),se(this,Cl,new Promise((e,n)=>{se(this,Rl,e,"f"),se(this,fo,n,"f")})),se(this,ho,new Promise((e,n)=>{se(this,jl,e,"f"),se(this,po,n,"f")})),E(this,Cl,"f").catch(()=>{}),E(this,ho,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},E(this,Xf,"m",ab).bind(this))},0)}_connected(){this.ended||(E(this,Rl,"f").call(this),this._emit("connect"))}get ended(){return E(this,mo,"f")}get errored(){return E(this,qc,"f")}get aborted(){return E(this,Hc,"f")}abort(){this.controller.abort()}on(e,n){return(E(this,Hn,"f")[e]||(E(this,Hn,"f")[e]=[])).push({listener:n}),this}off(e,n){const r=E(this,Hn,"f")[e];if(!r)return this;const s=r.findIndex(i=>i.listener===n);return s>=0&&r.splice(s,1),this}once(e,n){return(E(this,Hn,"f")[e]||(E(this,Hn,"f")[e]=[])).push({listener:n,once:!0}),this}emitted(e){return new Promise((n,r)=>{se(this,Vs,!0),e!=="error"&&this.once("error",r),this.once(e,n)})}async done(){se(this,Vs,!0),await E(this,ho,"f")}_emit(e,...n){if(E(this,mo,"f"))return;e==="end"&&(se(this,mo,!0),E(this,jl,"f").call(this));const r=E(this,Hn,"f")[e];if(r&&(E(this,Hn,"f")[e]=r.filter(s=>!s.once),r.forEach(({listener:s})=>s(...n))),e==="abort"){const s=n[0];!E(this,Vs,"f")&&!(r!=null&&r.length)&&Promise.reject(s),E(this,fo,"f").call(this,s),E(this,po,"f").call(this,s),this._emit("end");return}if(e==="error"){const s=n[0];!E(this,Vs,"f")&&!(r!=null&&r.length)&&Promise.reject(s),E(this,fo,"f").call(this,s),E(this,po,"f").call(this,s),this._emit("end")}}_emitFinal(){}}Cl=new WeakMap,Rl=new WeakMap,fo=new WeakMap,ho=new WeakMap,jl=new WeakMap,po=new WeakMap,Hn=new WeakMap,mo=new WeakMap,qc=new WeakMap,Hc=new WeakMap,Vs=new WeakMap,Xf=new WeakSet,ab=function(e){if(se(this,qc,!0),e instanceof Error&&e.name==="AbortError"&&(e=new sn),e instanceof sn)return se(this,Hc,!0),this._emit("abort",e);if(e instanceof Q)return this._emit("error",e);if(e instanceof Error){const n=new Q(e.message);return n.cause=e,this._emit("error",n)}return this._emit("error",new Q(String(e)))};function sC(t){return typeof t.parse=="function"}var gt,Zf,Qc,eh,th,nh,lb,cb;const iC=10;class ub extends $p{constructor(){super(...arguments),gt.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){var r;this._chatCompletions.push(e),this._emit("chatCompletion",e);const n=(r=e.choices[0])==null?void 0:r.message;return n&&this._addMessage(n),e}_addMessage(e,n=!0){if("content"in e||(e.content=null),this.messages.push(e),n){if(this._emit("message",e),ob(e)&&e.content)this._emit("functionToolCallResult",e.content);else if(Wc(e)&&e.tool_calls)for(const r of e.tool_calls)r.type==="function"&&this._emit("functionToolCall",r.function)}}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new Q("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),E(this,gt,"m",Zf).call(this)}async finalMessage(){return await this.done(),E(this,gt,"m",Qc).call(this)}async finalFunctionToolCall(){return await this.done(),E(this,gt,"m",eh).call(this)}async finalFunctionToolCallResult(){return await this.done(),E(this,gt,"m",th).call(this)}async totalUsage(){return await this.done(),E(this,gt,"m",nh).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const n=E(this,gt,"m",Qc).call(this);n&&this._emit("finalMessage",n);const r=E(this,gt,"m",Zf).call(this);r&&this._emit("finalContent",r);const s=E(this,gt,"m",eh).call(this);s&&this._emit("finalFunctionToolCall",s);const i=E(this,gt,"m",th).call(this);i!=null&&this._emit("finalFunctionToolCallResult",i),this._chatCompletions.some(o=>o.usage)&&this._emit("totalUsage",E(this,gt,"m",nh).call(this))}async _createChatCompletion(e,n,r){const s=r==null?void 0:r.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),E(this,gt,"m",lb).call(this,n);const i=await e.chat.completions.create({...n,stream:!1},{...r,signal:this.controller.signal});return this._connected(),this._addChatCompletion(Up(i,n))}async _runChatCompletion(e,n,r){for(const s of n.messages)this._addMessage(s,!1);return await this._createChatCompletion(e,n,r)}async _runTools(e,n,r){var y,v,_;const s="tool",{tool_choice:i="auto",stream:o,...a}=n,l=typeof i!="string"&&i.type==="function"&&((y=i==null?void 0:i.function)==null?void 0:y.name),{maxChatCompletions:u=iC}=r||{},d=n.tools.map(b=>{if(_a(b)){if(!b.$callback)throw new Q("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:b.$callback,name:b.function.name,description:b.function.description||"",parameters:b.function.parameters,parse:b.$parseRaw,strict:!0}}}return b}),f={};for(const b of d)b.type==="function"&&(f[b.function.name||b.function.function.name]=b.function);const m="tools"in n?d.map(b=>b.type==="function"?{type:"function",function:{name:b.function.name||b.function.function.name,parameters:b.function.parameters,description:b.function.description,strict:b.function.strict}}:b):void 0;for(const b of n.messages)this._addMessage(b,!1);for(let b=0;b<u;++b){const h=(v=(await this._createChatCompletion(e,{...a,tool_choice:i,tools:m,messages:[...this.messages]},r)).choices[0])==null?void 0:v.message;if(!h)throw new Q("missing message in ChatCompletion response");if(!((_=h.tool_calls)!=null&&_.length))return;for(const g of h.tool_calls){if(g.type!=="function")continue;const S=g.id,{name:x,arguments:I}=g.function,N=f[x];if(N){if(l&&l!==x){const L=`Invalid tool_call: ${JSON.stringify(x)}. ${JSON.stringify(l)} requested. Please try again`;this._addMessage({role:s,tool_call_id:S,content:L});continue}}else{const L=`Invalid tool_call: ${JSON.stringify(x)}. Available options are: ${Object.keys(f).map(H=>JSON.stringify(H)).join(", ")}. Please try again`;this._addMessage({role:s,tool_call_id:S,content:L});continue}let k;try{k=sC(N)?await N.parse(I):I}catch(L){const H=L instanceof Error?L.message:String(L);this._addMessage({role:s,tool_call_id:S,content:H});continue}const C=await N.function(k,this),A=E(this,gt,"m",cb).call(this,C);if(this._addMessage({role:s,tool_call_id:S,content:A}),l)return}}}}gt=new WeakSet,Zf=function(){var e;return(e=E(this,gt,"m",Qc).call(this).content)!=null?e:null},Qc=function(){var n,r;let e=this.messages.length;for(;e-- >0;){const s=this.messages[e];if(Wc(s))return{...s,content:(n=s.content)!=null?n:null,refusal:(r=s.refusal)!=null?r:null}}throw new Q("stream ended without producing a ChatCompletionMessage with role=assistant")},eh=function(){var e,n;for(let r=this.messages.length-1;r>=0;r--){const s=this.messages[r];if(Wc(s)&&((e=s==null?void 0:s.tool_calls)!=null&&e.length))return(n=s.tool_calls.filter(i=>i.type==="function").at(-1))==null?void 0:n.function}},th=function(){for(let e=this.messages.length-1;e>=0;e--){const n=this.messages[e];if(ob(n)&&n.content!=null&&typeof n.content=="string"&&this.messages.some(r=>{var s;return r.role==="assistant"&&((s=r.tool_calls)==null?void 0:s.some(i=>i.type==="function"&&i.id===n.tool_call_id))}))return n.content}},nh=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:n}of this._chatCompletions)n&&(e.completion_tokens+=n.completion_tokens,e.prompt_tokens+=n.prompt_tokens,e.total_tokens+=n.total_tokens);return e},lb=function(e){if(e.n!=null&&e.n>1)throw new Q("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},cb=function(e){return typeof e=="string"?e:e===void 0?"undefined":JSON.stringify(e)};class zp extends ub{static runTools(e,n,r){const s=new zp,i={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runTools"}};return s._run(()=>s._runTools(e,n,i)),s}_addMessage(e,n=!0){super._addMessage(e,n),Wc(e)&&e.content&&this._emit("content",e.content)}}const db=1,fb=2,hb=4,pb=8,mb=16,yb=32,gb=64,vb=128,wb=256,_b=vb|wb,xb=mb|yb|_b|gb,bb=db|fb|xb,Sb=hb|pb,oC=bb|Sb,et={STR:db,NUM:fb,ARR:hb,OBJ:pb,NULL:mb,BOOL:yb,NAN:gb,INFINITY:vb,MINUS_INFINITY:wb,INF:_b,SPECIAL:xb,ATOM:bb,COLLECTION:Sb,ALL:oC};class aC extends Error{}class lC extends Error{}function cC(t,e=et.ALL){if(typeof t!="string")throw new TypeError(`expecting str, got ${typeof t}`);if(!t.trim())throw new Error(`${t} is empty`);return uC(t.trim(),e)}const uC=(t,e)=>{const n=t.length;let r=0;const s=m=>{throw new aC(`${m} at position ${r}`)},i=m=>{throw new lC(`${m} at position ${r}`)},o=()=>(f(),r>=n&&s("Unexpected end of input"),t[r]==='"'?a():t[r]==="{"?l():t[r]==="["?u():t.substring(r,r+4)==="null"||et.NULL&e&&n-r<4&&"null".startsWith(t.substring(r))?(r+=4,null):t.substring(r,r+4)==="true"||et.BOOL&e&&n-r<4&&"true".startsWith(t.substring(r))?(r+=4,!0):t.substring(r,r+5)==="false"||et.BOOL&e&&n-r<5&&"false".startsWith(t.substring(r))?(r+=5,!1):t.substring(r,r+8)==="Infinity"||et.INFINITY&e&&n-r<8&&"Infinity".startsWith(t.substring(r))?(r+=8,1/0):t.substring(r,r+9)==="-Infinity"||et.MINUS_INFINITY&e&&1<n-r&&n-r<9&&"-Infinity".startsWith(t.substring(r))?(r+=9,-1/0):t.substring(r,r+3)==="NaN"||et.NAN&e&&n-r<3&&"NaN".startsWith(t.substring(r))?(r+=3,NaN):d()),a=()=>{const m=r;let y=!1;for(r++;r<n&&(t[r]!=='"'||y&&t[r-1]==="\\");)y=t[r]==="\\"?!y:!1,r++;if(t.charAt(r)=='"')try{return JSON.parse(t.substring(m,++r-Number(y)))}catch(v){i(String(v))}else if(et.STR&e)try{return JSON.parse(t.substring(m,r-Number(y))+'"')}catch{return JSON.parse(t.substring(m,t.lastIndexOf("\\"))+'"')}s("Unterminated string literal")},l=()=>{r++,f();const m={};try{for(;t[r]!=="}";){if(f(),r>=n&&et.OBJ&e)return m;const y=a();f(),r++;try{const v=o();Object.defineProperty(m,y,{value:v,writable:!0,enumerable:!0,configurable:!0})}catch(v){if(et.OBJ&e)return m;throw v}f(),t[r]===","&&r++}}catch{if(et.OBJ&e)return m;s("Expected '}' at end of object")}return r++,m},u=()=>{r++;const m=[];try{for(;t[r]!=="]";)m.push(o()),f(),t[r]===","&&r++}catch{if(et.ARR&e)return m;s("Expected ']' at end of array")}return r++,m},d=()=>{if(r===0){t==="-"&&et.NUM&e&&s("Not sure what '-' is");try{return JSON.parse(t)}catch(y){if(et.NUM&e)try{return t[t.length-1]==="."?JSON.parse(t.substring(0,t.lastIndexOf("."))):JSON.parse(t.substring(0,t.lastIndexOf("e")))}catch{}i(String(y))}}const m=r;for(t[r]==="-"&&r++;t[r]&&!",]}".includes(t[r]);)r++;r==n&&!(et.NUM&e)&&s("Unterminated number literal");try{return JSON.parse(t.substring(m,r))}catch{t.substring(m,r)==="-"&&et.NUM&e&&s("Not sure what '-' is");try{return JSON.parse(t.substring(m,t.lastIndexOf("e")))}catch(v){i(String(v))}}},f=()=>{for(;r<n&&` 
\r	`.includes(t[r]);)r++};return o()},_g=t=>cC(t,et.ALL^et.NUM);var Ke,Wn,As,vr,Nd,Za,kd,Ad,Td,el,Od,xg;class ia extends ub{constructor(e){super(),Ke.add(this),Wn.set(this,void 0),As.set(this,void 0),vr.set(this,void 0),se(this,Wn,e),se(this,As,[])}get currentChatCompletionSnapshot(){return E(this,vr,"f")}static fromReadableStream(e){const n=new ia(null);return n._run(()=>n._fromReadableStream(e)),n}static createChatCompletion(e,n,r){const s=new ia(n);return s._run(()=>s._runChatCompletion(e,{...n,stream:!0},{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),s}async _createChatCompletion(e,n,r){var o;super._createChatCompletion;const s=r==null?void 0:r.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),E(this,Ke,"m",Nd).call(this);const i=await e.chat.completions.create({...n,stream:!0},{...r,signal:this.controller.signal});this._connected();for await(const a of i)E(this,Ke,"m",kd).call(this,a);if((o=i.controller.signal)!=null&&o.aborted)throw new sn;return this._addChatCompletion(E(this,Ke,"m",el).call(this))}async _fromReadableStream(e,n){var o;const r=n==null?void 0:n.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),E(this,Ke,"m",Nd).call(this),this._connected();const s=Mn.fromReadableStream(e,this.controller);let i;for await(const a of s)i&&i!==a.id&&this._addChatCompletion(E(this,Ke,"m",el).call(this)),E(this,Ke,"m",kd).call(this,a),i=a.id;if((o=s.controller.signal)!=null&&o.aborted)throw new sn;return this._addChatCompletion(E(this,Ke,"m",el).call(this))}[(Wn=new WeakMap,As=new WeakMap,vr=new WeakMap,Ke=new WeakSet,Nd=function(){this.ended||se(this,vr,void 0)},Za=function(n){let r=E(this,As,"f")[n.index];return r||(r={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},E(this,As,"f")[n.index]=r,r)},kd=function(n){var s,i,o,a,l,u,d,f,m,y,v,_,b,p,h,g,S,x,I,N;if(this.ended)return;const r=E(this,Ke,"m",xg).call(this,n);this._emit("chunk",n,r);for(const k of n.choices){const C=r.choices[k.index];k.delta.content!=null&&((s=C.message)==null?void 0:s.role)==="assistant"&&((i=C.message)!=null&&i.content)&&(this._emit("content",k.delta.content,C.message.content),this._emit("content.delta",{delta:k.delta.content,snapshot:C.message.content,parsed:C.message.parsed})),k.delta.refusal!=null&&((o=C.message)==null?void 0:o.role)==="assistant"&&((a=C.message)!=null&&a.refusal)&&this._emit("refusal.delta",{delta:k.delta.refusal,snapshot:C.message.refusal}),((l=k.logprobs)==null?void 0:l.content)!=null&&((u=C.message)==null?void 0:u.role)==="assistant"&&this._emit("logprobs.content.delta",{content:(d=k.logprobs)==null?void 0:d.content,snapshot:(m=(f=C.logprobs)==null?void 0:f.content)!=null?m:[]}),((y=k.logprobs)==null?void 0:y.refusal)!=null&&((v=C.message)==null?void 0:v.role)==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:(_=k.logprobs)==null?void 0:_.refusal,snapshot:(p=(b=C.logprobs)==null?void 0:b.refusal)!=null?p:[]});const A=E(this,Ke,"m",Za).call(this,C);C.finish_reason&&(E(this,Ke,"m",Td).call(this,C),A.current_tool_call_index!=null&&E(this,Ke,"m",Ad).call(this,C,A.current_tool_call_index));for(const L of(h=k.delta.tool_calls)!=null?h:[])A.current_tool_call_index!==L.index&&(E(this,Ke,"m",Td).call(this,C),A.current_tool_call_index!=null&&E(this,Ke,"m",Ad).call(this,C,A.current_tool_call_index)),A.current_tool_call_index=L.index;for(const L of(g=k.delta.tool_calls)!=null?g:[]){const H=(S=C.message.tool_calls)==null?void 0:S[L.index];H!=null&&H.type&&((H==null?void 0:H.type)==="function"?this._emit("tool_calls.function.arguments.delta",{name:(x=H.function)==null?void 0:x.name,index:L.index,arguments:H.function.arguments,parsed_arguments:H.function.parsed_arguments,arguments_delta:(N=(I=L.function)==null?void 0:I.arguments)!=null?N:""}):(H==null||H.type,void 0))}}},Ad=function(n,r){var o,a,l;if(E(this,Ke,"m",Za).call(this,n).done_tool_calls.has(r))return;const i=(o=n.message.tool_calls)==null?void 0:o[r];if(!i)throw new Error("no tool call snapshot");if(!i.type)throw new Error("tool call snapshot missing `type`");if(i.type==="function"){const u=(l=(a=E(this,Wn,"f"))==null?void 0:a.tools)==null?void 0:l.find(d=>Vc(d)&&d.function.name===i.function.name);this._emit("tool_calls.function.arguments.done",{name:i.function.name,index:r,arguments:i.function.arguments,parsed_arguments:_a(u)?u.$parseRaw(i.function.arguments):u!=null&&u.function.strict?JSON.parse(i.function.arguments):null})}else i.type},Td=function(n){var s,i;const r=E(this,Ke,"m",Za).call(this,n);if(n.message.content&&!r.content_done){r.content_done=!0;const o=E(this,Ke,"m",Od).call(this);this._emit("content.done",{content:n.message.content,parsed:o?o.$parseRaw(n.message.content):null})}n.message.refusal&&!r.refusal_done&&(r.refusal_done=!0,this._emit("refusal.done",{refusal:n.message.refusal})),(s=n.logprobs)!=null&&s.content&&!r.logprobs_content_done&&(r.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:n.logprobs.content})),(i=n.logprobs)!=null&&i.refusal&&!r.logprobs_refusal_done&&(r.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:n.logprobs.refusal}))},el=function(){if(this.ended)throw new Q("stream has ended, this shouldn't happen");const n=E(this,vr,"f");if(!n)throw new Q("request ended without sending any chunks");return se(this,vr,void 0),se(this,As,[]),dC(n,E(this,Wn,"f"))},Od=function(){var r;const n=(r=E(this,Wn,"f"))==null?void 0:r.response_format;return Bp(n)?n:null},xg=function(n){var d,f,m,y,v,_;var r,s,i,o;let a=E(this,vr,"f");const{choices:l,...u}=n;a?Object.assign(a,u):a=se(this,vr,{...u,choices:[]});for(const{delta:b,finish_reason:p,index:h,logprobs:g=null,...S}of n.choices){let x=a.choices[h];if(x||(x=a.choices[h]={finish_reason:p,index:h,message:{},logprobs:g,...S}),g)if(!x.logprobs)x.logprobs=Object.assign({},g);else{const{content:H,refusal:ye,...le}=g;Object.assign(x.logprobs,le),H&&((d=(r=x.logprobs).content)!=null||(r.content=[]),x.logprobs.content.push(...H)),ye&&((f=(s=x.logprobs).refusal)!=null||(s.refusal=[]),x.logprobs.refusal.push(...ye))}if(p&&(x.finish_reason=p,E(this,Wn,"f")&&sb(E(this,Wn,"f")))){if(p==="length")throw new Bx;if(p==="content_filter")throw new Ux}if(Object.assign(x,S),!b)continue;const{content:I,refusal:N,function_call:k,role:C,tool_calls:A,...L}=b;if(Object.assign(x.message,L),N&&(x.message.refusal=(x.message.refusal||"")+N),C&&(x.message.role=C),k&&(x.message.function_call?(k.name&&(x.message.function_call.name=k.name),k.arguments&&((m=(i=x.message.function_call).arguments)!=null||(i.arguments=""),x.message.function_call.arguments+=k.arguments)):x.message.function_call=k),I&&(x.message.content=(x.message.content||"")+I,!x.message.refusal&&E(this,Ke,"m",Od).call(this)&&(x.message.parsed=_g(x.message.content))),A){x.message.tool_calls||(x.message.tool_calls=[]);for(const{index:H,id:ye,type:le,function:j,...R}of A){const oe=(y=(o=x.message.tool_calls)[H])!=null?y:o[H]={};Object.assign(oe,R),ye&&(oe.id=ye),le&&(oe.type=le),j&&((_=oe.function)!=null||(oe.function={name:(v=j.name)!=null?v:"",arguments:""})),j!=null&&j.name&&(oe.function.name=j.name),j!=null&&j.arguments&&(oe.function.arguments+=j.arguments,nC(E(this,Wn,"f"),oe)&&(oe.function.parsed_arguments=_g(oe.function.arguments)))}}}return a},Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("chunk",s=>{const i=n.shift();i?i.resolve(s):e.push(s)}),this.on("end",()=>{r=!0;for(const s of n)s.resolve(void 0);n.length=0}),this.on("abort",s=>{r=!0;for(const i of n)i.reject(s);n.length=0}),this.on("error",s=>{r=!0;for(const i of n)i.reject(s);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((i,o)=>n.push({resolve:i,reject:o})).then(i=>i?{value:i,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new Mn(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function dC(t,e){const{id:n,choices:r,created:s,model:i,system_fingerprint:o,...a}=t,l={...a,id:n,choices:r.map(({message:u,finish_reason:d,index:f,logprobs:m,...y})=>{var g,S,x;if(!d)throw new Q(`missing finish_reason for choice ${f}`);const{content:v=null,function_call:_,tool_calls:b,...p}=u,h=u.role;if(!h)throw new Q(`missing role for choice ${f}`);if(_){const{arguments:I,name:N}=_;if(I==null)throw new Q(`missing function_call.arguments for choice ${f}`);if(!N)throw new Q(`missing function_call.name for choice ${f}`);return{...y,message:{content:v,function_call:{arguments:I,name:N},role:h,refusal:(g=u.refusal)!=null?g:null},finish_reason:d,index:f,logprobs:m}}return b?{...y,index:f,finish_reason:d,logprobs:m,message:{...p,role:h,content:v,refusal:(S=u.refusal)!=null?S:null,tool_calls:b.map((I,N)=>{const{function:k,type:C,id:A,...L}=I,{arguments:H,name:ye,...le}=k||{};if(A==null)throw new Q(`missing choices[${f}].tool_calls[${N}].id
${tl(t)}`);if(C==null)throw new Q(`missing choices[${f}].tool_calls[${N}].type
${tl(t)}`);if(ye==null)throw new Q(`missing choices[${f}].tool_calls[${N}].function.name
${tl(t)}`);if(H==null)throw new Q(`missing choices[${f}].tool_calls[${N}].function.arguments
${tl(t)}`);return{...L,id:A,type:C,function:{...le,name:ye,arguments:H}}})}}:{...y,message:{...p,content:v,role:h,refusal:(x=u.refusal)!=null?x:null},finish_reason:d,index:f,logprobs:m}}),created:s,model:i,object:"chat.completion",...o?{system_fingerprint:o}:{}};return ZO(l,e)}function tl(t){return JSON.stringify(t)}class Kc extends ia{static fromReadableStream(e){const n=new Kc(null);return n._run(()=>n._fromReadableStream(e)),n}static runTools(e,n,r){const s=new Kc(n),i={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runTools"}};return s._run(()=>s._runTools(e,n,i)),s}}let Vp=class extends V{constructor(){super(...arguments),this.messages=new rb(this._client)}create(e,n){var r;return this._client.post("/chat/completions",{body:e,...n,stream:(r=e.stream)!=null?r:!1})}retrieve(e,n){return this._client.get(F`/chat/completions/${e}`,n)}update(e,n,r){return this._client.post(F`/chat/completions/${e}`,{body:n,...r})}list(e={},n){return this._client.getAPIList("/chat/completions",Qe,{query:e,...n})}delete(e,n){return this._client.delete(F`/chat/completions/${e}`,n)}parse(e,n){return rC(e.tools),this._client.chat.completions.create(e,{...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"chat.completions.parse"}})._thenUnwrap(r=>Up(r,e))}runTools(e,n){return e.stream?Kc.runTools(this._client,e,n):zp.runTools(this._client,e,n)}stream(e,n){return ia.createChatCompletion(this._client,e,n)}};Vp.Messages=rb;class Wp extends V{constructor(){super(...arguments),this.completions=new Vp(this._client)}}Wp.Completions=Vp;const Ib=Symbol("brand.privateNullableHeaders");function*fC(t){if(!t)return;if(Ib in t){const{values:r,nulls:s}=t;yield*r.entries();for(const i of s)yield[i,null];return}let e=!1,n;t instanceof Headers?n=t.entries():cg(t)?n=t:(e=!0,n=Object.entries(t!=null?t:{}));for(let r of n){const s=r[0];if(typeof s!="string")throw new TypeError("expected header name to be a string");const i=cg(r[1])?r[1]:[r[1]];let o=!1;for(const a of i)a!==void 0&&(e&&!o&&(o=!0,yield[s,null]),yield[s,a])}}const U=t=>{const e=new Headers,n=new Set;for(const r of t){const s=new Set;for(const[i,o]of fC(r)){const a=i.toLowerCase();s.has(a)||(e.delete(i),s.add(a)),o===null?(e.delete(i),n.add(a)):(e.append(i,o),n.delete(a))}}return{[Ib]:!0,values:e,nulls:n}};class Eb extends V{create(e,n){return this._client.post("/audio/speech",{body:e,...n,headers:U([{Accept:"application/octet-stream"},n==null?void 0:n.headers]),__binaryResponse:!0})}}class Nb extends V{create(e,n){var r;return this._client.post("/audio/transcriptions",ws({body:e,...n,stream:(r=e.stream)!=null?r:!1,__metadata:{model:e.model}},this._client))}}class kb extends V{create(e,n){return this._client.post("/audio/translations",ws({body:e,...n,__metadata:{model:e.model}},this._client))}}class xa extends V{constructor(){super(...arguments),this.transcriptions=new Nb(this._client),this.translations=new kb(this._client),this.speech=new Eb(this._client)}}xa.Transcriptions=Nb;xa.Translations=kb;xa.Speech=Eb;class Ab extends V{create(e,n){return this._client.post("/batches",{body:e,...n})}retrieve(e,n){return this._client.get(F`/batches/${e}`,n)}list(e={},n){return this._client.getAPIList("/batches",Qe,{query:e,...n})}cancel(e,n){return this._client.post(F`/batches/${e}/cancel`,n)}}class Tb extends V{create(e,n){return this._client.post("/assistants",{body:e,...n,headers:U([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}retrieve(e,n){return this._client.get(F`/assistants/${e}`,{...n,headers:U([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}update(e,n,r){return this._client.post(F`/assistants/${e}`,{body:n,...r,headers:U([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}list(e={},n){return this._client.getAPIList("/assistants",Qe,{query:e,...n,headers:U([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}delete(e,n){return this._client.delete(F`/assistants/${e}`,{...n,headers:U([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}}let Ob=class extends V{create(e,n){return this._client.post("/realtime/sessions",{body:e,...n,headers:U([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}};class Cb extends V{create(e,n){return this._client.post("/realtime/transcription_sessions",{body:e,...n,headers:U([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}}let Iu=class extends V{constructor(){super(...arguments),this.sessions=new Ob(this._client),this.transcriptionSessions=new Cb(this._client)}};Iu.Sessions=Ob;Iu.TranscriptionSessions=Cb;class Rb extends V{create(e,n){return this._client.post("/chatkit/sessions",{body:e,...n,headers:U([{"OpenAI-Beta":"chatkit_beta=v1"},n==null?void 0:n.headers])})}cancel(e,n){return this._client.post(F`/chatkit/sessions/${e}/cancel`,{...n,headers:U([{"OpenAI-Beta":"chatkit_beta=v1"},n==null?void 0:n.headers])})}}let jb=class extends V{retrieve(e,n){return this._client.get(F`/chatkit/threads/${e}`,{...n,headers:U([{"OpenAI-Beta":"chatkit_beta=v1"},n==null?void 0:n.headers])})}list(e={},n){return this._client.getAPIList("/chatkit/threads",zc,{query:e,...n,headers:U([{"OpenAI-Beta":"chatkit_beta=v1"},n==null?void 0:n.headers])})}delete(e,n){return this._client.delete(F`/chatkit/threads/${e}`,{...n,headers:U([{"OpenAI-Beta":"chatkit_beta=v1"},n==null?void 0:n.headers])})}listItems(e,n={},r){return this._client.getAPIList(F`/chatkit/threads/${e}/items`,zc,{query:n,...r,headers:U([{"OpenAI-Beta":"chatkit_beta=v1"},r==null?void 0:r.headers])})}};class Eu extends V{constructor(){super(...arguments),this.sessions=new Rb(this._client),this.threads=new jb(this._client)}}Eu.Sessions=Rb;Eu.Threads=jb;class Fb extends V{create(e,n,r){return this._client.post(F`/threads/${e}/messages`,{body:n,...r,headers:U([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}retrieve(e,n,r){const{thread_id:s}=n;return this._client.get(F`/threads/${s}/messages/${e}`,{...r,headers:U([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}update(e,n,r){const{thread_id:s,...i}=n;return this._client.post(F`/threads/${s}/messages/${e}`,{body:i,...r,headers:U([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}list(e,n={},r){return this._client.getAPIList(F`/threads/${e}/messages`,Qe,{query:n,...r,headers:U([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}delete(e,n,r){const{thread_id:s}=n;return this._client.delete(F`/threads/${s}/messages/${e}`,{...r,headers:U([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}}class Pb extends V{retrieve(e,n,r){const{thread_id:s,run_id:i,...o}=n;return this._client.get(F`/threads/${s}/runs/${i}/steps/${e}`,{query:o,...r,headers:U([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}list(e,n,r){const{thread_id:s,...i}=n;return this._client.getAPIList(F`/threads/${s}/runs/${e}/steps`,Qe,{query:i,...r,headers:U([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}}const hC=t=>{if(typeof Buffer<"u"){const e=Buffer.from(t,"base64");return Array.from(new Float32Array(e.buffer,e.byteOffset,e.length/Float32Array.BYTES_PER_ELEMENT))}else{const e=atob(t),n=e.length,r=new Uint8Array(n);for(let s=0;s<n;s++)r[s]=e.charCodeAt(s);return Array.from(new Float32Array(r.buffer))}};var Cd={};const Ts=t=>{var e,n,r,s,i;if(typeof globalThis.process<"u")return(n=(e=Cd==null?void 0:Cd[t])==null?void 0:e.trim())!=null?n:void 0;if(typeof globalThis.Deno<"u")return(i=(s=(r=globalThis.Deno.env)==null?void 0:r.get)==null?void 0:s.call(r,t))==null?void 0:i.trim()};var it,as,rh,On,Fl,mn,ls,ii,ns,Jc,Bt,Pl,Ll,Co,yo,go,bg,Sg,Ig,Eg,Ng,kg,Ag;class Ro extends $p{constructor(){super(...arguments),it.add(this),rh.set(this,[]),On.set(this,{}),Fl.set(this,{}),mn.set(this,void 0),ls.set(this,void 0),ii.set(this,void 0),ns.set(this,void 0),Jc.set(this,void 0),Bt.set(this,void 0),Pl.set(this,void 0),Ll.set(this,void 0),Co.set(this,void 0)}[(rh=new WeakMap,On=new WeakMap,Fl=new WeakMap,mn=new WeakMap,ls=new WeakMap,ii=new WeakMap,ns=new WeakMap,Jc=new WeakMap,Bt=new WeakMap,Pl=new WeakMap,Ll=new WeakMap,Co=new WeakMap,it=new WeakSet,Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("event",s=>{const i=n.shift();i?i.resolve(s):e.push(s)}),this.on("end",()=>{r=!0;for(const s of n)s.resolve(void 0);n.length=0}),this.on("abort",s=>{r=!0;for(const i of n)i.reject(s);n.length=0}),this.on("error",s=>{r=!0;for(const i of n)i.reject(s);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((i,o)=>n.push({resolve:i,reject:o})).then(i=>i?{value:i,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){const n=new as;return n._run(()=>n._fromReadableStream(e)),n}async _fromReadableStream(e,n){var i;const r=n==null?void 0:n.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),this._connected();const s=Mn.fromReadableStream(e,this.controller);for await(const o of s)E(this,it,"m",yo).call(this,o);if((i=s.controller.signal)!=null&&i.aborted)throw new sn;return this._addRun(E(this,it,"m",go).call(this))}toReadableStream(){return new Mn(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,n,r,s){const i=new as;return i._run(()=>i._runToolAssistantStream(e,n,r,{...s,headers:{...s==null?void 0:s.headers,"X-Stainless-Helper-Method":"stream"}})),i}async _createToolAssistantStream(e,n,r,s){var l;const i=s==null?void 0:s.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort()));const o={...r,stream:!0},a=await e.submitToolOutputs(n,o,{...s,signal:this.controller.signal});this._connected();for await(const u of a)E(this,it,"m",yo).call(this,u);if((l=a.controller.signal)!=null&&l.aborted)throw new sn;return this._addRun(E(this,it,"m",go).call(this))}static createThreadAssistantStream(e,n,r){const s=new as;return s._run(()=>s._threadAssistantStream(e,n,{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),s}static createAssistantStream(e,n,r,s){const i=new as;return i._run(()=>i._runAssistantStream(e,n,r,{...s,headers:{...s==null?void 0:s.headers,"X-Stainless-Helper-Method":"stream"}})),i}currentEvent(){return E(this,Pl,"f")}currentRun(){return E(this,Ll,"f")}currentMessageSnapshot(){return E(this,mn,"f")}currentRunStepSnapshot(){return E(this,Co,"f")}async finalRunSteps(){return await this.done(),Object.values(E(this,On,"f"))}async finalMessages(){return await this.done(),Object.values(E(this,Fl,"f"))}async finalRun(){if(await this.done(),!E(this,ls,"f"))throw Error("Final run was not received.");return E(this,ls,"f")}async _createThreadAssistantStream(e,n,r){var a;const s=r==null?void 0:r.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort()));const i={...n,stream:!0},o=await e.createAndRun(i,{...r,signal:this.controller.signal});this._connected();for await(const l of o)E(this,it,"m",yo).call(this,l);if((a=o.controller.signal)!=null&&a.aborted)throw new sn;return this._addRun(E(this,it,"m",go).call(this))}async _createAssistantStream(e,n,r,s){var l;const i=s==null?void 0:s.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort()));const o={...r,stream:!0},a=await e.create(n,o,{...s,signal:this.controller.signal});this._connected();for await(const u of a)E(this,it,"m",yo).call(this,u);if((l=a.controller.signal)!=null&&l.aborted)throw new sn;return this._addRun(E(this,it,"m",go).call(this))}static accumulateDelta(e,n){for(const[r,s]of Object.entries(n)){if(!e.hasOwnProperty(r)){e[r]=s;continue}let i=e[r];if(i==null){e[r]=s;continue}if(r==="index"||r==="type"){e[r]=s;continue}if(typeof i=="string"&&typeof s=="string")i+=s;else if(typeof i=="number"&&typeof s=="number")i+=s;else if(Sd(i)&&Sd(s))i=this.accumulateDelta(i,s);else if(Array.isArray(i)&&Array.isArray(s)){if(i.every(o=>typeof o=="string"||typeof o=="number")){i.push(...s);continue}for(const o of s){if(!Sd(o))throw new Error(`Expected array delta entry to be an object but got: ${o}`);const a=o.index;if(a==null)throw console.error(o),new Error("Expected array delta entry to have an `index` property");if(typeof a!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${a}`);const l=i[a];l==null?i.push(o):i[a]=this.accumulateDelta(l,o)}continue}else throw Error(`Unhandled record type: ${r}, deltaValue: ${s}, accValue: ${i}`);e[r]=i}return e}_addRun(e){return e}async _threadAssistantStream(e,n,r){return await this._createThreadAssistantStream(n,e,r)}async _runAssistantStream(e,n,r,s){return await this._createAssistantStream(n,e,r,s)}async _runToolAssistantStream(e,n,r,s){return await this._createToolAssistantStream(n,e,r,s)}}as=Ro,yo=function(e){if(!this.ended)switch(se(this,Pl,e),E(this,it,"m",Ig).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":E(this,it,"m",Ag).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":E(this,it,"m",Sg).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":E(this,it,"m",bg).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},go=function(){if(this.ended)throw new Q("stream has ended, this shouldn't happen");if(!E(this,ls,"f"))throw Error("Final run has not been received");return E(this,ls,"f")},bg=function(e){const[n,r]=E(this,it,"m",Ng).call(this,e,E(this,mn,"f"));se(this,mn,n),E(this,Fl,"f")[n.id]=n;for(const s of r){const i=n.content[s.index];(i==null?void 0:i.type)=="text"&&this._emit("textCreated",i.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,n),e.data.delta.content)for(const s of e.data.delta.content){if(s.type=="text"&&s.text){let i=s.text,o=n.content[s.index];if(o&&o.type=="text")this._emit("textDelta",i,o.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(s.index!=E(this,ii,"f")){if(E(this,ns,"f"))switch(E(this,ns,"f").type){case"text":this._emit("textDone",E(this,ns,"f").text,E(this,mn,"f"));break;case"image_file":this._emit("imageFileDone",E(this,ns,"f").image_file,E(this,mn,"f"));break}se(this,ii,s.index)}se(this,ns,n.content[s.index])}break;case"thread.message.completed":case"thread.message.incomplete":if(E(this,ii,"f")!==void 0){const s=e.data.content[E(this,ii,"f")];if(s)switch(s.type){case"image_file":this._emit("imageFileDone",s.image_file,E(this,mn,"f"));break;case"text":this._emit("textDone",s.text,E(this,mn,"f"));break}}E(this,mn,"f")&&this._emit("messageDone",e.data),se(this,mn,void 0)}},Sg=function(e){const n=E(this,it,"m",Eg).call(this,e);switch(se(this,Co,n),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":const r=e.data.delta;if(r.step_details&&r.step_details.type=="tool_calls"&&r.step_details.tool_calls&&n.step_details.type=="tool_calls")for(const i of r.step_details.tool_calls)i.index==E(this,Jc,"f")?this._emit("toolCallDelta",i,n.step_details.tool_calls[i.index]):(E(this,Bt,"f")&&this._emit("toolCallDone",E(this,Bt,"f")),se(this,Jc,i.index),se(this,Bt,n.step_details.tool_calls[i.index]),E(this,Bt,"f")&&this._emit("toolCallCreated",E(this,Bt,"f")));this._emit("runStepDelta",e.data.delta,n);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":se(this,Co,void 0),e.data.step_details.type=="tool_calls"&&E(this,Bt,"f")&&(this._emit("toolCallDone",E(this,Bt,"f")),se(this,Bt,void 0)),this._emit("runStepDone",e.data,n);break}},Ig=function(e){E(this,rh,"f").push(e),this._emit("event",e)},Eg=function(e){switch(e.event){case"thread.run.step.created":return E(this,On,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let n=E(this,On,"f")[e.data.id];if(!n)throw Error("Received a RunStepDelta before creation of a snapshot");let r=e.data;if(r.delta){const s=as.accumulateDelta(n,r.delta);E(this,On,"f")[e.data.id]=s}return E(this,On,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":E(this,On,"f")[e.data.id]=e.data;break}if(E(this,On,"f")[e.data.id])return E(this,On,"f")[e.data.id];throw new Error("No snapshot available")},Ng=function(e,n){let r=[];switch(e.event){case"thread.message.created":return[e.data,r];case"thread.message.delta":if(!n)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let s=e.data;if(s.delta.content)for(const i of s.delta.content)if(i.index in n.content){let o=n.content[i.index];n.content[i.index]=E(this,it,"m",kg).call(this,i,o)}else n.content[i.index]=i,r.push(i);return[n,r];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(n)return[n,r];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},kg=function(e,n){return as.accumulateDelta(n,e)},Ag=function(e){switch(se(this,Ll,e.data),e.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":case"thread.run.incomplete":se(this,ls,e.data),E(this,Bt,"f")&&(this._emit("toolCallDone",E(this,Bt,"f")),se(this,Bt,void 0));break}};let qp=class extends V{constructor(){super(...arguments),this.steps=new Pb(this._client)}create(e,n,r){var o;const{include:s,...i}=n;return this._client.post(F`/threads/${e}/runs`,{query:{include:s},body:i,...r,headers:U([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers]),stream:(o=n.stream)!=null?o:!1})}retrieve(e,n,r){const{thread_id:s}=n;return this._client.get(F`/threads/${s}/runs/${e}`,{...r,headers:U([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}update(e,n,r){const{thread_id:s,...i}=n;return this._client.post(F`/threads/${s}/runs/${e}`,{body:i,...r,headers:U([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}list(e,n={},r){return this._client.getAPIList(F`/threads/${e}/runs`,Qe,{query:n,...r,headers:U([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}cancel(e,n,r){const{thread_id:s}=n;return this._client.post(F`/threads/${s}/runs/${e}/cancel`,{...r,headers:U([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}async createAndPoll(e,n,r){const s=await this.create(e,n,r);return await this.poll(s.id,{thread_id:e},r)}createAndStream(e,n,r){return Ro.createAssistantStream(e,this._client.beta.threads.runs,n,r)}async poll(e,n,r){var i,o;const s=U([r==null?void 0:r.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":(o=(i=r==null?void 0:r.pollIntervalMs)==null?void 0:i.toString())!=null?o:void 0}]);for(;;){const{data:a,response:l}=await this.retrieve(e,n,{...r,headers:{...r==null?void 0:r.headers,...s}}).withResponse();switch(a.status){case"queued":case"in_progress":case"cancelling":let u=5e3;if(r!=null&&r.pollIntervalMs)u=r.pollIntervalMs;else{const d=l.headers.get("openai-poll-after-ms");if(d){const f=parseInt(d);isNaN(f)||(u=f)}}await wa(u);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return a}}}stream(e,n,r){return Ro.createAssistantStream(e,this._client.beta.threads.runs,n,r)}submitToolOutputs(e,n,r){var o;const{thread_id:s,...i}=n;return this._client.post(F`/threads/${s}/runs/${e}/submit_tool_outputs`,{body:i,...r,headers:U([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers]),stream:(o=n.stream)!=null?o:!1})}async submitToolOutputsAndPoll(e,n,r){const s=await this.submitToolOutputs(e,n,r);return await this.poll(s.id,n,r)}submitToolOutputsStream(e,n,r){return Ro.createToolAssistantStream(e,this._client.beta.threads.runs,n,r)}};qp.Steps=Pb;class Nu extends V{constructor(){super(...arguments),this.runs=new qp(this._client),this.messages=new Fb(this._client)}create(e={},n){return this._client.post("/threads",{body:e,...n,headers:U([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}retrieve(e,n){return this._client.get(F`/threads/${e}`,{...n,headers:U([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}update(e,n,r){return this._client.post(F`/threads/${e}`,{body:n,...r,headers:U([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}delete(e,n){return this._client.delete(F`/threads/${e}`,{...n,headers:U([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}createAndRun(e,n){var r;return this._client.post("/threads/runs",{body:e,...n,headers:U([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers]),stream:(r=e.stream)!=null?r:!1})}async createAndRunPoll(e,n){const r=await this.createAndRun(e,n);return await this.runs.poll(r.id,{thread_id:r.thread_id},n)}createAndRunStream(e,n){return Ro.createThreadAssistantStream(e,this._client.beta.threads,n)}}Nu.Runs=qp;Nu.Messages=Fb;class Li extends V{constructor(){super(...arguments),this.realtime=new Iu(this._client),this.chatkit=new Eu(this._client),this.assistants=new Tb(this._client),this.threads=new Nu(this._client)}}Li.Realtime=Iu;Li.ChatKit=Eu;Li.Assistants=Tb;Li.Threads=Nu;class Lb extends V{create(e,n){var r;return this._client.post("/completions",{body:e,...n,stream:(r=e.stream)!=null?r:!1})}}class Mb extends V{retrieve(e,n,r){const{container_id:s}=n;return this._client.get(F`/containers/${s}/files/${e}/content`,{...r,headers:U([{Accept:"application/binary"},r==null?void 0:r.headers]),__binaryResponse:!0})}}let Hp=class extends V{constructor(){super(...arguments),this.content=new Mb(this._client)}create(e,n,r){return this._client.post(F`/containers/${e}/files`,ws({body:n,...r},this._client))}retrieve(e,n,r){const{container_id:s}=n;return this._client.get(F`/containers/${s}/files/${e}`,r)}list(e,n={},r){return this._client.getAPIList(F`/containers/${e}/files`,Qe,{query:n,...r})}delete(e,n,r){const{container_id:s}=n;return this._client.delete(F`/containers/${s}/files/${e}`,{...r,headers:U([{Accept:"*/*"},r==null?void 0:r.headers])})}};Hp.Content=Mb;class Qp extends V{constructor(){super(...arguments),this.files=new Hp(this._client)}create(e,n){return this._client.post("/containers",{body:e,...n})}retrieve(e,n){return this._client.get(F`/containers/${e}`,n)}list(e={},n){return this._client.getAPIList("/containers",Qe,{query:e,...n})}delete(e,n){return this._client.delete(F`/containers/${e}`,{...n,headers:U([{Accept:"*/*"},n==null?void 0:n.headers])})}}Qp.Files=Hp;class Db extends V{create(e,n,r){const{include:s,...i}=n;return this._client.post(F`/conversations/${e}/items`,{query:{include:s},body:i,...r})}retrieve(e,n,r){const{conversation_id:s,...i}=n;return this._client.get(F`/conversations/${s}/items/${e}`,{query:i,...r})}list(e,n={},r){return this._client.getAPIList(F`/conversations/${e}/items`,zc,{query:n,...r})}delete(e,n,r){const{conversation_id:s}=n;return this._client.delete(F`/conversations/${s}/items/${e}`,r)}}class Kp extends V{constructor(){super(...arguments),this.items=new Db(this._client)}create(e={},n){return this._client.post("/conversations",{body:e,...n})}retrieve(e,n){return this._client.get(F`/conversations/${e}`,n)}update(e,n,r){return this._client.post(F`/conversations/${e}`,{body:n,...r})}delete(e,n){return this._client.delete(F`/conversations/${e}`,n)}}Kp.Items=Db;class Bb extends V{create(e,n){const r=!!e.encoding_format;let s=r?e.encoding_format:"base64";r&&st(this._client).debug("embeddings/user defined encoding_format:",e.encoding_format);const i=this._client.post("/embeddings",{body:{...e,encoding_format:s},...n});return r?i:(st(this._client).debug("embeddings/decoding base64 embeddings from base64"),i._thenUnwrap(o=>(o&&o.data&&o.data.forEach(a=>{const l=a.embedding;a.embedding=hC(l)}),o)))}}class Ub extends V{retrieve(e,n,r){const{eval_id:s,run_id:i}=n;return this._client.get(F`/evals/${s}/runs/${i}/output_items/${e}`,r)}list(e,n,r){const{eval_id:s,...i}=n;return this._client.getAPIList(F`/evals/${s}/runs/${e}/output_items`,Qe,{query:i,...r})}}class Jp extends V{constructor(){super(...arguments),this.outputItems=new Ub(this._client)}create(e,n,r){return this._client.post(F`/evals/${e}/runs`,{body:n,...r})}retrieve(e,n,r){const{eval_id:s}=n;return this._client.get(F`/evals/${s}/runs/${e}`,r)}list(e,n={},r){return this._client.getAPIList(F`/evals/${e}/runs`,Qe,{query:n,...r})}delete(e,n,r){const{eval_id:s}=n;return this._client.delete(F`/evals/${s}/runs/${e}`,r)}cancel(e,n,r){const{eval_id:s}=n;return this._client.post(F`/evals/${s}/runs/${e}`,r)}}Jp.OutputItems=Ub;class Yp extends V{constructor(){super(...arguments),this.runs=new Jp(this._client)}create(e,n){return this._client.post("/evals",{body:e,...n})}retrieve(e,n){return this._client.get(F`/evals/${e}`,n)}update(e,n,r){return this._client.post(F`/evals/${e}`,{body:n,...r})}list(e={},n){return this._client.getAPIList("/evals",Qe,{query:e,...n})}delete(e,n){return this._client.delete(F`/evals/${e}`,n)}}Yp.Runs=Jp;let $b=class extends V{create(e,n){return this._client.post("/files",ws({body:e,...n},this._client))}retrieve(e,n){return this._client.get(F`/files/${e}`,n)}list(e={},n){return this._client.getAPIList("/files",Qe,{query:e,...n})}delete(e,n){return this._client.delete(F`/files/${e}`,n)}content(e,n){return this._client.get(F`/files/${e}/content`,{...n,headers:U([{Accept:"application/binary"},n==null?void 0:n.headers]),__binaryResponse:!0})}async waitForProcessing(e,{pollInterval:n=5e3,maxWait:r=30*60*1e3}={}){const s=new Set(["processed","error","deleted"]),i=Date.now();let o=await this.retrieve(e);for(;!o.status||!s.has(o.status);)if(await wa(n),o=await this.retrieve(e),Date.now()-i>r)throw new Pp({message:`Giving up on waiting for file ${e} to finish processing after ${r} milliseconds.`});return o}};class zb extends V{}let Vb=class extends V{run(e,n){return this._client.post("/fine_tuning/alpha/graders/run",{body:e,...n})}validate(e,n){return this._client.post("/fine_tuning/alpha/graders/validate",{body:e,...n})}};class Gp extends V{constructor(){super(...arguments),this.graders=new Vb(this._client)}}Gp.Graders=Vb;class Wb extends V{create(e,n,r){return this._client.getAPIList(F`/fine_tuning/checkpoints/${e}/permissions`,Su,{body:n,method:"post",...r})}retrieve(e,n={},r){return this._client.get(F`/fine_tuning/checkpoints/${e}/permissions`,{query:n,...r})}delete(e,n,r){const{fine_tuned_model_checkpoint:s}=n;return this._client.delete(F`/fine_tuning/checkpoints/${s}/permissions/${e}`,r)}}let Xp=class extends V{constructor(){super(...arguments),this.permissions=new Wb(this._client)}};Xp.Permissions=Wb;class qb extends V{list(e,n={},r){return this._client.getAPIList(F`/fine_tuning/jobs/${e}/checkpoints`,Qe,{query:n,...r})}}class Zp extends V{constructor(){super(...arguments),this.checkpoints=new qb(this._client)}create(e,n){return this._client.post("/fine_tuning/jobs",{body:e,...n})}retrieve(e,n){return this._client.get(F`/fine_tuning/jobs/${e}`,n)}list(e={},n){return this._client.getAPIList("/fine_tuning/jobs",Qe,{query:e,...n})}cancel(e,n){return this._client.post(F`/fine_tuning/jobs/${e}/cancel`,n)}listEvents(e,n={},r){return this._client.getAPIList(F`/fine_tuning/jobs/${e}/events`,Qe,{query:n,...r})}pause(e,n){return this._client.post(F`/fine_tuning/jobs/${e}/pause`,n)}resume(e,n){return this._client.post(F`/fine_tuning/jobs/${e}/resume`,n)}}Zp.Checkpoints=qb;class Mi extends V{constructor(){super(...arguments),this.methods=new zb(this._client),this.jobs=new Zp(this._client),this.checkpoints=new Xp(this._client),this.alpha=new Gp(this._client)}}Mi.Methods=zb;Mi.Jobs=Zp;Mi.Checkpoints=Xp;Mi.Alpha=Gp;class Hb extends V{}class em extends V{constructor(){super(...arguments),this.graderModels=new Hb(this._client)}}em.GraderModels=Hb;class Qb extends V{createVariation(e,n){return this._client.post("/images/variations",ws({body:e,...n},this._client))}edit(e,n){var r;return this._client.post("/images/edits",ws({body:e,...n,stream:(r=e.stream)!=null?r:!1},this._client))}generate(e,n){var r;return this._client.post("/images/generations",{body:e,...n,stream:(r=e.stream)!=null?r:!1})}}class Kb extends V{retrieve(e,n){return this._client.get(F`/models/${e}`,n)}list(e){return this._client.getAPIList("/models",Su,e)}delete(e,n){return this._client.delete(F`/models/${e}`,n)}}class Jb extends V{create(e,n){return this._client.post("/moderations",{body:e,...n})}}class Yb extends V{accept(e,n,r){return this._client.post(F`/realtime/calls/${e}/accept`,{body:n,...r,headers:U([{Accept:"*/*"},r==null?void 0:r.headers])})}hangup(e,n){return this._client.post(F`/realtime/calls/${e}/hangup`,{...n,headers:U([{Accept:"*/*"},n==null?void 0:n.headers])})}refer(e,n,r){return this._client.post(F`/realtime/calls/${e}/refer`,{body:n,...r,headers:U([{Accept:"*/*"},r==null?void 0:r.headers])})}reject(e,n={},r){return this._client.post(F`/realtime/calls/${e}/reject`,{body:n,...r,headers:U([{Accept:"*/*"},r==null?void 0:r.headers])})}}class Gb extends V{create(e,n){return this._client.post("/realtime/client_secrets",{body:e,...n})}}class ku extends V{constructor(){super(...arguments),this.clientSecrets=new Gb(this._client),this.calls=new Yb(this._client)}}ku.ClientSecrets=Gb;ku.Calls=Yb;function pC(t,e){return!e||!yC(e)?{...t,output_parsed:null,output:t.output.map(n=>n.type==="function_call"?{...n,parsed_arguments:null}:n.type==="message"?{...n,content:n.content.map(r=>({...r,parsed:null}))}:n)}:Xb(t,e)}function Xb(t,e){const n=t.output.map(s=>{if(s.type==="function_call")return{...s,parsed_arguments:wC(e,s)};if(s.type==="message"){const i=s.content.map(o=>o.type==="output_text"?{...o,parsed:mC(e,o.text)}:o);return{...s,content:i}}return s}),r=Object.assign({},t,{output:n});return Object.getOwnPropertyDescriptor(t,"output_text")||sh(r),Object.defineProperty(r,"output_parsed",{enumerable:!0,get(){for(const s of r.output)if(s.type==="message"){for(const i of s.content)if(i.type==="output_text"&&i.parsed!==null)return i.parsed}return null}}),r}function mC(t,e){var n,r,s,i;return((r=(n=t.text)==null?void 0:n.format)==null?void 0:r.type)!=="json_schema"?null:"$parseRaw"in((s=t.text)==null?void 0:s.format)?((i=t.text)==null?void 0:i.format).$parseRaw(e):JSON.parse(e)}function yC(t){var e;return!!Bp((e=t.text)==null?void 0:e.format)}function gC(t){return(t==null?void 0:t.$brand)==="auto-parseable-tool"}function vC(t,e){return t.find(n=>n.type==="function"&&n.name===e)}function wC(t,e){var r;const n=vC((r=t.tools)!=null?r:[],e.name);return{...e,...e,parsed_arguments:gC(n)?n.$parseRaw(e.arguments):n!=null&&n.strict?JSON.parse(e.arguments):null}}function sh(t){const e=[];for(const n of t.output)if(n.type==="message")for(const r of n.content)r.type==="output_text"&&e.push(r.text);t.output_text=e.join("")}var Os,nl,wr,rl,Tg,Og,Cg,Rg;class tm extends $p{constructor(e){super(),Os.add(this),nl.set(this,void 0),wr.set(this,void 0),rl.set(this,void 0),se(this,nl,e)}static createResponse(e,n,r){const s=new tm(n);return s._run(()=>s._createOrRetrieveResponse(e,n,{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),s}async _createOrRetrieveResponse(e,n,r){var a,l;const s=r==null?void 0:r.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),E(this,Os,"m",Tg).call(this);let i,o=null;"response_id"in n?(i=await e.responses.retrieve(n.response_id,{stream:!0},{...r,signal:this.controller.signal,stream:!0}),o=(a=n.starting_after)!=null?a:null):i=await e.responses.create({...n,stream:!0},{...r,signal:this.controller.signal}),this._connected();for await(const u of i)E(this,Os,"m",Og).call(this,u,o);if((l=i.controller.signal)!=null&&l.aborted)throw new sn;return E(this,Os,"m",Cg).call(this)}[(nl=new WeakMap,wr=new WeakMap,rl=new WeakMap,Os=new WeakSet,Tg=function(){this.ended||se(this,wr,void 0)},Og=function(n,r){if(this.ended)return;const s=(o,a)=>{(r==null||a.sequence_number>r)&&this._emit(o,a)},i=E(this,Os,"m",Rg).call(this,n);switch(s("event",n),n.type){case"response.output_text.delta":{const o=i.output[n.output_index];if(!o)throw new Q(`missing output at index ${n.output_index}`);if(o.type==="message"){const a=o.content[n.content_index];if(!a)throw new Q(`missing content at index ${n.content_index}`);if(a.type!=="output_text")throw new Q(`expected content to be 'output_text', got ${a.type}`);s("response.output_text.delta",{...n,snapshot:a.text})}break}case"response.function_call_arguments.delta":{const o=i.output[n.output_index];if(!o)throw new Q(`missing output at index ${n.output_index}`);o.type==="function_call"&&s("response.function_call_arguments.delta",{...n,snapshot:o.arguments});break}default:s(n.type,n);break}},Cg=function(){if(this.ended)throw new Q("stream has ended, this shouldn't happen");const n=E(this,wr,"f");if(!n)throw new Q("request ended without sending any events");se(this,wr,void 0);const r=_C(n,E(this,nl,"f"));return se(this,rl,r),r},Rg=function(n){var s;let r=E(this,wr,"f");if(!r){if(n.type!=="response.created")throw new Q(`When snapshot hasn't been set yet, expected 'response.created' event, got ${n.type}`);return r=se(this,wr,n.response),r}switch(n.type){case"response.output_item.added":{r.output.push(n.item);break}case"response.content_part.added":{const i=r.output[n.output_index];if(!i)throw new Q(`missing output at index ${n.output_index}`);const o=i.type,a=n.part;o==="message"&&a.type!=="reasoning_text"?i.content.push(a):o==="reasoning"&&a.type==="reasoning_text"&&(i.content||(i.content=[]),i.content.push(a));break}case"response.output_text.delta":{const i=r.output[n.output_index];if(!i)throw new Q(`missing output at index ${n.output_index}`);if(i.type==="message"){const o=i.content[n.content_index];if(!o)throw new Q(`missing content at index ${n.content_index}`);if(o.type!=="output_text")throw new Q(`expected content to be 'output_text', got ${o.type}`);o.text+=n.delta}break}case"response.function_call_arguments.delta":{const i=r.output[n.output_index];if(!i)throw new Q(`missing output at index ${n.output_index}`);i.type==="function_call"&&(i.arguments+=n.delta);break}case"response.reasoning_text.delta":{const i=r.output[n.output_index];if(!i)throw new Q(`missing output at index ${n.output_index}`);if(i.type==="reasoning"){const o=(s=i.content)==null?void 0:s[n.content_index];if(!o)throw new Q(`missing content at index ${n.content_index}`);if(o.type!=="reasoning_text")throw new Q(`expected content to be 'reasoning_text', got ${o.type}`);o.text+=n.delta}break}case"response.completed":{se(this,wr,n.response);break}}return r},Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("event",s=>{const i=n.shift();i?i.resolve(s):e.push(s)}),this.on("end",()=>{r=!0;for(const s of n)s.resolve(void 0);n.length=0}),this.on("abort",s=>{r=!0;for(const i of n)i.reject(s);n.length=0}),this.on("error",s=>{r=!0;for(const i of n)i.reject(s);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((i,o)=>n.push({resolve:i,reject:o})).then(i=>i?{value:i,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();const e=E(this,rl,"f");if(!e)throw new Q("stream ended without producing a ChatCompletion");return e}}function _C(t,e){return pC(t,e)}class Zb extends V{list(e,n={},r){return this._client.getAPIList(F`/responses/${e}/input_items`,Qe,{query:n,...r})}}class e1 extends V{count(e={},n){return this._client.post("/responses/input_tokens",{body:e,...n})}}class Au extends V{constructor(){super(...arguments),this.inputItems=new Zb(this._client),this.inputTokens=new e1(this._client)}create(e,n){var r;return this._client.post("/responses",{body:e,...n,stream:(r=e.stream)!=null?r:!1})._thenUnwrap(s=>("object"in s&&s.object==="response"&&sh(s),s))}retrieve(e,n={},r){var s;return this._client.get(F`/responses/${e}`,{query:n,...r,stream:(s=n==null?void 0:n.stream)!=null?s:!1})._thenUnwrap(i=>("object"in i&&i.object==="response"&&sh(i),i))}delete(e,n){return this._client.delete(F`/responses/${e}`,{...n,headers:U([{Accept:"*/*"},n==null?void 0:n.headers])})}parse(e,n){return this._client.responses.create(e,n)._thenUnwrap(r=>Xb(r,e))}stream(e,n){return tm.createResponse(this._client,e,n)}cancel(e,n){return this._client.post(F`/responses/${e}/cancel`,n)}compact(e,n){return this._client.post("/responses/compact",{body:e,...n})}}Au.InputItems=Zb;Au.InputTokens=e1;class t1 extends V{create(e,n,r){return this._client.post(F`/uploads/${e}/parts`,ws({body:n,...r},this._client))}}class nm extends V{constructor(){super(...arguments),this.parts=new t1(this._client)}create(e,n){return this._client.post("/uploads",{body:e,...n})}cancel(e,n){return this._client.post(F`/uploads/${e}/cancel`,n)}complete(e,n,r){return this._client.post(F`/uploads/${e}/complete`,{body:n,...r})}}nm.Parts=t1;const xC=async t=>{const e=await Promise.allSettled(t),n=e.filter(s=>s.status==="rejected");if(n.length){for(const s of n)console.error(s.reason);throw new Error(`${n.length} promise(s) failed - see the above errors`)}const r=[];for(const s of e)s.status==="fulfilled"&&r.push(s.value);return r};class n1 extends V{create(e,n,r){return this._client.post(F`/vector_stores/${e}/file_batches`,{body:n,...r,headers:U([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}retrieve(e,n,r){const{vector_store_id:s}=n;return this._client.get(F`/vector_stores/${s}/file_batches/${e}`,{...r,headers:U([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}cancel(e,n,r){const{vector_store_id:s}=n;return this._client.post(F`/vector_stores/${s}/file_batches/${e}/cancel`,{...r,headers:U([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}async createAndPoll(e,n,r){const s=await this.create(e,n);return await this.poll(e,s.id,r)}listFiles(e,n,r){const{vector_store_id:s,...i}=n;return this._client.getAPIList(F`/vector_stores/${s}/file_batches/${e}/files`,Qe,{query:i,...r,headers:U([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}async poll(e,n,r){var i,o;const s=U([r==null?void 0:r.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":(o=(i=r==null?void 0:r.pollIntervalMs)==null?void 0:i.toString())!=null?o:void 0}]);for(;;){const{data:a,response:l}=await this.retrieve(n,{vector_store_id:e},{...r,headers:s}).withResponse();switch(a.status){case"in_progress":let u=5e3;if(r!=null&&r.pollIntervalMs)u=r.pollIntervalMs;else{const d=l.headers.get("openai-poll-after-ms");if(d){const f=parseInt(d);isNaN(f)||(u=f)}}await wa(u);break;case"failed":case"cancelled":case"completed":return a}}}async uploadAndPoll(e,{files:n,fileIds:r=[]},s){var m;if(n==null||n.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const i=(m=s==null?void 0:s.maxConcurrency)!=null?m:5,o=Math.min(i,n.length),a=this._client,l=n.values(),u=[...r];async function d(y){for(let v of y){const _=await a.files.create({file:v,purpose:"assistants"},s);u.push(_.id)}}const f=Array(o).fill(l).map(d);return await xC(f),await this.createAndPoll(e,{file_ids:u})}}class r1 extends V{create(e,n,r){return this._client.post(F`/vector_stores/${e}/files`,{body:n,...r,headers:U([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}retrieve(e,n,r){const{vector_store_id:s}=n;return this._client.get(F`/vector_stores/${s}/files/${e}`,{...r,headers:U([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}update(e,n,r){const{vector_store_id:s,...i}=n;return this._client.post(F`/vector_stores/${s}/files/${e}`,{body:i,...r,headers:U([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}list(e,n={},r){return this._client.getAPIList(F`/vector_stores/${e}/files`,Qe,{query:n,...r,headers:U([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}delete(e,n,r){const{vector_store_id:s}=n;return this._client.delete(F`/vector_stores/${s}/files/${e}`,{...r,headers:U([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}async createAndPoll(e,n,r){const s=await this.create(e,n,r);return await this.poll(e,s.id,r)}async poll(e,n,r){var i,o;const s=U([r==null?void 0:r.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":(o=(i=r==null?void 0:r.pollIntervalMs)==null?void 0:i.toString())!=null?o:void 0}]);for(;;){const a=await this.retrieve(n,{vector_store_id:e},{...r,headers:s}).withResponse(),l=a.data;switch(l.status){case"in_progress":let u=5e3;if(r!=null&&r.pollIntervalMs)u=r.pollIntervalMs;else{const d=a.response.headers.get("openai-poll-after-ms");if(d){const f=parseInt(d);isNaN(f)||(u=f)}}await wa(u);break;case"failed":case"completed":return l}}}async upload(e,n,r){const s=await this._client.files.create({file:n,purpose:"assistants"},r);return this.create(e,{file_id:s.id},r)}async uploadAndPoll(e,n,r){const s=await this.upload(e,n,r);return await this.poll(e,s.id,r)}content(e,n,r){const{vector_store_id:s}=n;return this._client.getAPIList(F`/vector_stores/${s}/files/${e}/content`,Su,{...r,headers:U([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}}class Tu extends V{constructor(){super(...arguments),this.files=new r1(this._client),this.fileBatches=new n1(this._client)}create(e,n){return this._client.post("/vector_stores",{body:e,...n,headers:U([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}retrieve(e,n){return this._client.get(F`/vector_stores/${e}`,{...n,headers:U([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}update(e,n,r){return this._client.post(F`/vector_stores/${e}`,{body:n,...r,headers:U([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}list(e={},n){return this._client.getAPIList("/vector_stores",Qe,{query:e,...n,headers:U([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}delete(e,n){return this._client.delete(F`/vector_stores/${e}`,{...n,headers:U([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}search(e,n,r){return this._client.getAPIList(F`/vector_stores/${e}/search`,Su,{body:n,method:"post",...r,headers:U([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}}Tu.Files=r1;Tu.FileBatches=n1;class s1 extends V{create(e,n){return this._client.post("/videos",gg({body:e,...n},this._client))}retrieve(e,n){return this._client.get(F`/videos/${e}`,n)}list(e={},n){return this._client.getAPIList("/videos",zc,{query:e,...n})}delete(e,n){return this._client.delete(F`/videos/${e}`,n)}downloadContent(e,n={},r){return this._client.get(F`/videos/${e}/content`,{query:n,...r,headers:U([{Accept:"application/binary"},r==null?void 0:r.headers]),__binaryResponse:!0})}remix(e,n,r){return this._client.post(F`/videos/${e}/remix`,gg({body:n,...r},this._client))}}var Ws,i1,Ml;class o1 extends V{constructor(){super(...arguments),Ws.add(this)}async unwrap(e,n,r=this._client.webhookSecret,s=300){return await this.verifySignature(e,n,r,s),JSON.parse(e)}async verifySignature(e,n,r=this._client.webhookSecret,s=300){if(typeof crypto>"u"||typeof crypto.subtle.importKey!="function"||typeof crypto.subtle.verify!="function")throw new Error("Webhook signature verification is only supported when the `crypto` global is defined");E(this,Ws,"m",i1).call(this,r);const i=U([n]).values,o=E(this,Ws,"m",Ml).call(this,i,"webhook-signature"),a=E(this,Ws,"m",Ml).call(this,i,"webhook-timestamp"),l=E(this,Ws,"m",Ml).call(this,i,"webhook-id"),u=parseInt(a,10);if(isNaN(u))throw new lo("Invalid webhook timestamp format");const d=Math.floor(Date.now()/1e3);if(d-u>s)throw new lo("Webhook timestamp is too old");if(u>d+s)throw new lo("Webhook timestamp is too new");const f=o.split(" ").map(_=>_.startsWith("v1,")?_.substring(3):_),m=r.startsWith("whsec_")?Buffer.from(r.replace("whsec_",""),"base64"):Buffer.from(r,"utf-8"),y=l?`${l}.${a}.${e}`:`${a}.${e}`,v=await crypto.subtle.importKey("raw",m,{name:"HMAC",hash:"SHA-256"},!1,["verify"]);for(const _ of f)try{const b=Buffer.from(_,"base64");if(await crypto.subtle.verify("HMAC",v,b,new TextEncoder().encode(y)))return}catch{continue}throw new lo("The given webhook signature does not match the expected signature")}}Ws=new WeakSet,i1=function(e){if(typeof e!="string"||e.length===0)throw new Error("The webhook secret must either be set using the env var, OPENAI_WEBHOOK_SECRET, on the client class, OpenAI({ webhookSecret: '123' }), or passed to this function")},Ml=function(e,n){if(!e)throw new Error("Headers are required");const r=e.get(n);if(r==null)throw new Error(`Missing required header: ${n}`);return r};var ih,rm,Dl,a1;class de{constructor({baseURL:e=Ts("OPENAI_BASE_URL"),apiKey:n=Ts("OPENAI_API_KEY"),organization:r=(a=>(a=Ts("OPENAI_ORG_ID"))!=null?a:null)(),project:s=(l=>(l=Ts("OPENAI_PROJECT_ID"))!=null?l:null)(),webhookSecret:i=(u=>(u=Ts("OPENAI_WEBHOOK_SECRET"))!=null?u:null)(),...o}={}){var m,y,v,_,b,p;if(ih.add(this),Dl.set(this,void 0),this.completions=new Lb(this),this.chat=new Wp(this),this.embeddings=new Bb(this),this.files=new $b(this),this.images=new Qb(this),this.audio=new xa(this),this.moderations=new Jb(this),this.models=new Kb(this),this.fineTuning=new Mi(this),this.graders=new em(this),this.vectorStores=new Tu(this),this.webhooks=new o1(this),this.beta=new Li(this),this.batches=new Ab(this),this.uploads=new nm(this),this.responses=new Au(this),this.realtime=new ku(this),this.conversations=new Kp(this),this.evals=new Yp(this),this.containers=new Qp(this),this.videos=new s1(this),n===void 0)throw new Q("Missing credentials. Please pass an `apiKey`, or set the `OPENAI_API_KEY` environment variable.");const d={apiKey:n,organization:r,project:s,webhookSecret:i,...o,baseURL:e||"https://api.openai.com/v1"};if(!d.dangerouslyAllowBrowser&&SO())throw new Q(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);this.baseURL=d.baseURL,this.timeout=(m=d.timeout)!=null?m:rm.DEFAULT_TIMEOUT,this.logger=(y=d.logger)!=null?y:console;const f="warn";this.logLevel=f,this.logLevel=(_=(v=mg(d.logLevel,"ClientOptions.logLevel",this))!=null?v:mg(Ts("OPENAI_LOG"),"process.env['OPENAI_LOG']",this))!=null?_:f,this.fetchOptions=d.fetchOptions,this.maxRetries=(b=d.maxRetries)!=null?b:2,this.fetch=(p=d.fetch)!=null?p:AO(),se(this,Dl,OO),this._options=d,this.apiKey=typeof n=="string"?n:"Missing Key",this.organization=r,this.project=s,this.webhookSecret=i}withOptions(e){return new this.constructor({...this._options,baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,organization:this.organization,project:this.project,webhookSecret:this.webhookSecret,...e})}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){}async authHeaders(e){return U([{Authorization:`Bearer ${this.apiKey}`}])}stringifyQuery(e){return LO(e,{arrayFormat:"brackets"})}getUserAgent(){return`${this.constructor.name}/JS ${zs}`}defaultIdempotencyKey(){return`stainless-node-retry-${Ox()}`}makeStatusError(e,n,r,s){return lt.generate(e,n,r,s)}async _callApiKey(){const e=this._options.apiKey;if(typeof e!="function")return!1;let n;try{n=await e()}catch(r){throw r instanceof Q?r:new Q(`Failed to get token from 'apiKey' function: ${r.message}`,{cause:r})}if(typeof n!="string"||!n)throw new Q(`Expected 'apiKey' function argument to return a string but it returned ${n}`);return this.apiKey=n,!0}buildURL(e,n,r){const s=!E(this,ih,"m",a1).call(this)&&r||this.baseURL,i=vO(e)?new URL(e):new URL(s+(s.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),o=this.defaultQuery();return wO(o)||(n={...o,...n}),typeof n=="object"&&n&&!Array.isArray(n)&&(i.search=this.stringifyQuery(n)),i.toString()}async prepareOptions(e){await this._callApiKey()}async prepareRequest(e,{url:n,options:r}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,r){return this.request(Promise.resolve(r).then(s=>({method:e,path:n,...s})))}request(e,n=null){return new bu(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,r){var p,h,g;const s=await e,i=(p=s.maxRetries)!=null?p:this.maxRetries;n==null&&(n=i),await this.prepareOptions(s);const{req:o,url:a,timeout:l}=await this.buildRequest(s,{retryCount:i-n});await this.prepareRequest(o,{url:a,options:s});const u="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),d=r===void 0?"":`, retryOf: ${r}`,f=Date.now();if(st(this).debug(`[${u}] sending request`,ts({retryOfRequestLogID:r,method:s.method,url:a,options:s,headers:o.headers})),(h=s.signal)!=null&&h.aborted)throw new sn;const m=new AbortController,y=await this.fetchWithTimeout(a,o,l,m).catch(Qf),v=Date.now();if(y instanceof globalThis.Error){const S=`retrying, ${n} attempts remaining`;if((g=s.signal)!=null&&g.aborted)throw new sn;const x=Hf(y)||/timed? ?out/i.test(String(y)+("cause"in y?String(y.cause):""));if(n)return st(this).info(`[${u}] connection ${x?"timed out":"failed"} - ${S}`),st(this).debug(`[${u}] connection ${x?"timed out":"failed"} (${S})`,ts({retryOfRequestLogID:r,url:a,durationMs:v-f,message:y.message})),this.retryRequest(s,n,r!=null?r:u);throw st(this).info(`[${u}] connection ${x?"timed out":"failed"} - error; no more retries left`),st(this).debug(`[${u}] connection ${x?"timed out":"failed"} (error; no more retries left)`,ts({retryOfRequestLogID:r,url:a,durationMs:v-f,message:y.message})),x?new Pp:new _u({cause:y})}const _=[...y.headers.entries()].filter(([S])=>S==="x-request-id").map(([S,x])=>", "+S+": "+JSON.stringify(x)).join(""),b=`[${u}${d}${_}] ${o.method} ${a} ${y.ok?"succeeded":"failed"} with status ${y.status} in ${v-f}ms`;if(!y.ok){const S=await this.shouldRetry(y);if(n&&S){const A=`retrying, ${n} attempts remaining`;return await TO(y.body),st(this).info(`${b} - ${A}`),st(this).debug(`[${u}] response error (${A})`,ts({retryOfRequestLogID:r,url:y.url,status:y.status,headers:y.headers,durationMs:v-f})),this.retryRequest(s,n,r!=null?r:u,y.headers)}const x=S?"error; no more retries left":"error; not retryable";st(this).info(`${b} - ${x}`);const I=await y.text().catch(A=>Qf(A).message),N=bO(I),k=N?void 0:I;throw st(this).debug(`[${u}] response error (${x})`,ts({retryOfRequestLogID:r,url:y.url,status:y.status,headers:y.headers,message:k,durationMs:Date.now()-f})),this.makeStatusError(y.status,N,k,y.headers)}return st(this).info(b),st(this).debug(`[${u}] response start`,ts({retryOfRequestLogID:r,url:y.url,status:y.status,headers:y.headers,durationMs:v-f})),{response:y,options:s,controller:m,requestLogID:u,retryOfRequestLogID:r,startTime:f}}getAPIList(e,n,r){return this.requestAPIList(n,r&&"then"in r?r.then(s=>({method:"get",path:e,...s})):{method:"get",path:e,...r})}requestAPIList(e,n){const r=this.makeRequest(n,null,void 0);return new qO(this,r,e)}async fetchWithTimeout(e,n,r,s){const{signal:i,method:o,...a}=n||{},l=this._makeAbort(s);i&&i.addEventListener("abort",l,{once:!0});const u=setTimeout(l,r),d=globalThis.ReadableStream&&a.body instanceof globalThis.ReadableStream||typeof a.body=="object"&&a.body!==null&&Symbol.asyncIterator in a.body,f={signal:s.signal,...d?{duplex:"half"}:{},method:"GET",...a};o&&(f.method=o.toUpperCase());try{return await this.fetch.call(void 0,e,f)}finally{clearTimeout(u)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,r,s){var l;let i;const o=s==null?void 0:s.get("retry-after-ms");if(o){const u=parseFloat(o);Number.isNaN(u)||(i=u)}const a=s==null?void 0:s.get("retry-after");if(a&&!i){const u=parseFloat(a);Number.isNaN(u)?i=Date.parse(a)-Date.now():i=u*1e3}if(!(i&&0<=i&&i<60*1e3)){const u=(l=e.maxRetries)!=null?l:this.maxRetries;i=this.calculateDefaultRetryTimeoutMillis(n,u)}return await wa(i),this.makeRequest(e,n-1,r)}calculateDefaultRetryTimeoutMillis(e,n){const i=n-e,o=Math.min(.5*Math.pow(2,i),8),a=1-Math.random()*.25;return o*a*1e3}async buildRequest(e,{retryCount:n=0}={}){var y,v,_;const r={...e},{method:s,path:i,query:o,defaultBaseURL:a}=r,l=this.buildURL(i,o,a);"timeout"in r&&xO("timeout",r.timeout),r.timeout=(y=r.timeout)!=null?y:this.timeout;const{bodyHeaders:u,body:d}=this.buildBody({options:r}),f=await this.buildHeaders({options:e,method:s,bodyHeaders:u,retryCount:n});return{req:{method:s,headers:f,...r.signal&&{signal:r.signal},...globalThis.ReadableStream&&d instanceof globalThis.ReadableStream&&{duplex:"half"},...d&&{body:d},...(v=this.fetchOptions)!=null?v:{},...(_=r.fetchOptions)!=null?_:{}},url:l,timeout:r.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:r,retryCount:s}){let i={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),i[this.idempotencyHeader]=e.idempotencyKey);const o=U([i,{Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(s),...e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{},...kO(),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project},await this.authHeaders(e),this._options.defaultHeaders,r,e.headers]);return this.validateHeaders(o),o.values}_makeAbort(e){return()=>e.abort()}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const r=U([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&r.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:Vx(e)}:E(this,Dl,"f").call(this,{body:e,headers:r})}}rm=de,Dl=new WeakMap,ih=new WeakSet,a1=function(){return this.baseURL!=="https://api.openai.com/v1"};de.OpenAI=rm;de.DEFAULT_TIMEOUT=6e5;de.OpenAIError=Q;de.APIError=lt;de.APIConnectionError=_u;de.APIConnectionTimeoutError=Pp;de.APIUserAbortError=sn;de.NotFoundError=Fx;de.ConflictError=Px;de.RateLimitError=Mx;de.BadRequestError=Cx;de.AuthenticationError=Rx;de.InternalServerError=Dx;de.PermissionDeniedError=jx;de.UnprocessableEntityError=Lx;de.InvalidWebhookSignatureError=lo;de.toFile=YO;de.Completions=Lb;de.Chat=Wp;de.Embeddings=Bb;de.Files=$b;de.Images=Qb;de.Audio=xa;de.Moderations=Jb;de.Models=Kb;de.FineTuning=Mi;de.Graders=em;de.VectorStores=Tu;de.Webhooks=o1;de.Beta=Li;de.Batches=Ab;de.Uploads=nm;de.Responses=Au;de.Realtime=ku;de.Conversations=Kp;de.Evals=Yp;de.Containers=Qp;de.Videos=s1;const sm={},bC=(t,e)=>{sm[t]=e};class SC{constructor(e){Jr(this,"client",null);Jr(this,"config");this.config=e;const n=sm.openai||e.apiKey;n&&(this.client=new de({apiKey:n,dangerouslyAllowBrowser:!0}))}async complete(e){var n,r,s,i,o;if(!this.client)return{content:"",error:"OpenAI API key not configured"};try{const a=await this.client.chat.completions.create({model:this.config.model,messages:e.messages,temperature:this.config.temperature,max_tokens:this.config.maxTokens,stream:!1}),l=((r=(n=a.choices[0])==null?void 0:n.message)==null?void 0:r.content)||"",u=this.extractActions(l);return{content:this.cleanContent(l),actions:u,usage:{promptTokens:((s=a.usage)==null?void 0:s.prompt_tokens)||0,completionTokens:((i=a.usage)==null?void 0:i.completion_tokens)||0,totalTokens:((o=a.usage)==null?void 0:o.total_tokens)||0}}}catch(a){return{content:"",error:a instanceof Error?a.message:"Unknown error"}}}async*stream(e){var r,s;if(!this.client)throw new Error("OpenAI API key not configured");const n=await this.client.chat.completions.create({model:this.config.model,messages:e.messages,temperature:this.config.temperature,max_tokens:this.config.maxTokens,stream:!0});for await(const i of n){const o=(s=(r=i.choices[0])==null?void 0:r.delta)==null?void 0:s.content;o&&(yield o)}}extractActions(e){const n=[],r=/```sql\n([\s\S]*?)\n```/g;let s;for(;(s=r.exec(e))!==null;)n.push({type:"query",label:"Run SQL Query",query:s[1].trim(),language:"sql"});const i=/```python\n([\s\S]*?)\n```/g;for(;(s=i.exec(e))!==null;)n.push({type:"query",label:"Run Python Code",query:s[1].trim(),language:"python"});const o=/```(?:javascript|typescript|js|ts|json|regex)?\n([\s\S]*?)\n```/g;for(;(s=o.exec(e))!==null;){const a=s[1].trim();n.find(l=>l.query===a)||n.push({type:"insert",label:"Insert Code",code:a,position:"cursor"})}return n.length>0?n:void 0}cleanContent(e){return e}}class IC{constructor(e){Jr(this,"apiKey");Jr(this,"config");this.config=e,this.apiKey=sm.anthropic||e.apiKey}async complete(e){var n,r,s,i,o,a,l;if(!this.apiKey)return{content:"",error:"Anthropic API key not configured"};try{const u=await fetch("https://api.anthropic.com/v1/messages",{method:"POST",headers:{"Content-Type":"application/json","x-api-key":this.apiKey,"anthropic-version":"2023-06-01"},body:JSON.stringify({model:this.config.model,messages:e.messages.map(y=>({role:y.role==="user"?"user":"assistant",content:y.content})),max_tokens:this.config.maxTokens,temperature:this.config.temperature,stream:!1})});if(!u.ok){const y=await u.json();throw new Error(((n=y.error)==null?void 0:n.message)||"Anthropic API error")}const d=await u.json(),f=((s=(r=d.content)==null?void 0:r[0])==null?void 0:s.text)||"",m=this.extractActions(f);return{content:this.cleanContent(f),actions:m,usage:{promptTokens:((i=d.usage)==null?void 0:i.input_tokens)||0,completionTokens:((o=d.usage)==null?void 0:o.output_tokens)||0,totalTokens:(((a=d.usage)==null?void 0:a.input_tokens)||0)+(((l=d.usage)==null?void 0:l.output_tokens)||0)}}}catch(u){return{content:"",error:u instanceof Error?u.message:"Unknown error"}}}async*stream(e){var o,a,l;if(!this.apiKey)throw new Error("Anthropic API key not configured");const n=await fetch("https://api.anthropic.com/v1/messages",{method:"POST",headers:{"Content-Type":"application/json","x-api-key":this.apiKey,"anthropic-version":"2023-06-01"},body:JSON.stringify({model:this.config.model,messages:e.messages.map(u=>({role:u.role==="user"?"user":"assistant",content:u.content})),max_tokens:this.config.maxTokens,temperature:this.config.temperature,stream:!0})});if(!n.ok){const u=await n.json();throw new Error(((o=u.error)==null?void 0:o.message)||"Anthropic API error")}const r=(a=n.body)==null?void 0:a.getReader();if(!r)throw new Error("No response body");const s=new TextDecoder;let i="";try{for(;;){const{done:u,value:d}=await r.read();if(u)break;i+=s.decode(d,{stream:!0});const f=i.split(`
`);i=f.pop()||"";for(const m of f)if(m.startsWith("data: ")){const y=m.slice(6);if(y==="[DONE]")return;try{const _=(l=JSON.parse(y).delta)==null?void 0:l.text;_&&(yield _)}catch{}}}}finally{r.releaseLock()}}extractActions(e){const n=[],r=/```sql\n([\s\S]*?)\n```/g;let s;for(;(s=r.exec(e))!==null;)n.push({type:"query",label:"Run SQL Query",query:s[1].trim(),language:"sql"});const i=/```python\n([\s\S]*?)\n```/g;for(;(s=i.exec(e))!==null;)n.push({type:"query",label:"Run Python Code",query:s[1].trim(),language:"python"});const o=/```(?:javascript|typescript|js|ts|json|regex)?\n([\s\S]*?)\n```/g;for(;(s=o.exec(e))!==null;){const a=s[1].trim();n.find(l=>l.query===a)||n.push({type:"insert",label:"Insert Code",code:a,position:"cursor"})}return n.length>0?n:void 0}cleanContent(e){return e}}class EC{constructor(e){Jr(this,"config");this.config=e}async complete(e){var r;const n=this.config.baseUrl||"http://localhost:11434";try{const s=await fetch(`${n}/api/chat`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({model:this.config.model,messages:e.messages,stream:!1,options:{temperature:this.config.temperature,num_predict:this.config.maxTokens}})});if(!s.ok)throw new Error(`Ollama error: ${s.statusText}`);const o=((r=(await s.json()).message)==null?void 0:r.content)||"",a=this.extractActions(o);return{content:this.cleanContent(o),actions:a}}catch(s){return{content:"",error:s instanceof Error?s.message:"Failed to connect to Ollama. Make sure it's running locally."}}}async*stream(e){var o,a;const n=this.config.baseUrl||"http://localhost:11434",r=await fetch(`${n}/api/chat`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({model:this.config.model,messages:e.messages,stream:!0,options:{temperature:this.config.temperature,num_predict:this.config.maxTokens}})});if(!r.ok)throw new Error(`Ollama error: ${r.statusText}`);const s=(o=r.body)==null?void 0:o.getReader();if(!s)throw new Error("No response body");const i=new TextDecoder;try{for(;;){const{done:l,value:u}=await s.read();if(l)break;const f=i.decode(u).split(`
`).filter(m=>m.trim());for(const m of f)try{const y=JSON.parse(m);if((a=y.message)!=null&&a.content&&(yield y.message.content),y.done)return}catch{}}}finally{s.releaseLock()}}async listModels(){var n;const e=this.config.baseUrl||"http://localhost:11434";try{const r=await fetch(`${e}/api/tags`);return r.ok?((n=(await r.json()).models)==null?void 0:n.map(i=>i.name))||[]:[]}catch{return[]}}extractActions(e){const n=[],r=/```sql\n([\s\S]*?)\n```/g;let s;for(;(s=r.exec(e))!==null;)n.push({type:"query",label:"Run SQL Query",query:s[1].trim(),language:"sql"});const i=/```python\n([\s\S]*?)\n```/g;for(;(s=i.exec(e))!==null;)n.push({type:"query",label:"Run Python Code",query:s[1].trim(),language:"python"});return n.length>0?n:void 0}cleanContent(e){return e}}class NC{constructor(e){Jr(this,"config");this.config=e}async complete(e){var n,r,s,i,o,a,l;if(!this.config.baseUrl)return{content:"",error:"Custom provider base URL not configured"};try{const u=await fetch(`${this.config.baseUrl}/chat/completions`,{method:"POST",headers:{"Content-Type":"application/json",...this.config.apiKey&&{Authorization:`Bearer ${this.config.apiKey}`}},body:JSON.stringify({model:this.config.model,messages:e.messages,temperature:this.config.temperature,max_tokens:this.config.maxTokens,stream:!1})});if(!u.ok){const m=await u.json();throw new Error(((n=m.error)==null?void 0:n.message)||"Custom provider error")}const d=await u.json();return{content:((i=(s=(r=d.choices)==null?void 0:r[0])==null?void 0:s.message)==null?void 0:i.content)||"",usage:{promptTokens:((o=d.usage)==null?void 0:o.prompt_tokens)||0,completionTokens:((a=d.usage)==null?void 0:a.completion_tokens)||0,totalTokens:((l=d.usage)==null?void 0:l.total_tokens)||0}}}catch(u){return{content:"",error:u instanceof Error?u.message:"Unknown error"}}}async*stream(e){var o,a,l,u;if(!this.config.baseUrl)throw new Error("Custom provider base URL not configured");const n=await fetch(`${this.config.baseUrl}/chat/completions`,{method:"POST",headers:{"Content-Type":"application/json",...this.config.apiKey&&{Authorization:`Bearer ${this.config.apiKey}`}},body:JSON.stringify({model:this.config.model,messages:e.messages,temperature:this.config.temperature,max_tokens:this.config.maxTokens,stream:!0})});if(!n.ok)throw new Error("Custom provider error");const r=(o=n.body)==null?void 0:o.getReader();if(!r)throw new Error("No response body");const s=new TextDecoder;let i="";try{for(;;){const{done:d,value:f}=await r.read();if(d)break;i+=s.decode(f,{stream:!0});const m=i.split(`
`);i=m.pop()||"";for(const y of m)if(y.startsWith("data: ")){const v=y.slice(6);if(v==="[DONE]")return;try{const b=(u=(l=(a=JSON.parse(v).choices)==null?void 0:a[0])==null?void 0:l.delta)==null?void 0:u.content;b&&(yield b)}catch{}}}}finally{r.releaseLock()}}}const kC=t=>{switch(t.provider){case"openai":return new SC(t);case"anthropic":return new IC(t);case"ollama":return new EC(t);case"custom":return new NC(t);default:throw new Error(`Unknown provider: ${t.provider}`)}},AC={openai:["gpt-4o","gpt-4o-mini","gpt-4-turbo","gpt-4","gpt-3.5-turbo"],anthropic:["claude-3-5-sonnet-20241022","claude-3-5-haiku-20241022","claude-3-opus-20240229","claude-3-sonnet-20240229","claude-3-haiku-20240307"],ollama:["llama3.2","llama3.1","llama3","mistral","codellama","phi4","qwen2.5"],custom:[]},sl={openai:{name:"OpenAI",description:"GPT-4 and GPT-3.5 models via OpenAI API",requiresKey:!0,requiresBaseUrl:!1},anthropic:{name:"Anthropic",description:"Claude models via Anthropic API",requiresKey:!0,requiresBaseUrl:!1},ollama:{name:"Ollama",description:"Local models via Ollama (runs on your machine)",requiresKey:!1,requiresBaseUrl:!0},custom:{name:"Custom",description:"OpenAI-compatible API endpoint",requiresKey:!1,requiresBaseUrl:!0}},TC=({agents:t,activeAgentId:e,onSelect:n})=>{const[r,s]=T.useState(!1),[i,o]=T.useState(null),[a,l]=T.useState({name:"",description:"",icon:"",systemPrompt:""}),{addCustomAgent:u,updateAgent:d,removeCustomAgent:f}=sr(),m=["data-analyst","code-reviewer","log-analyzer","regex-expert","json-wrangler","sql-assistant"],y=p=>!m.includes(p),v=()=>{if(a.name&&a.description&&a.systemPrompt){const p={id:`custom-${Date.now()}`,name:a.name,description:a.description,icon:a.icon||"",systemPrompt:a.systemPrompt,capabilities:["query","generate","explain"],color:"#6366f1",defaultProvider:"openai",defaultModel:"gpt-4o"};u(p),s(!1),l({name:"",description:"",icon:"",systemPrompt:""}),n(p)}},_=(p,h)=>{d(p,h),o(null)},b=p=>{confirm("Delete this custom agent?")&&f(p)};return r?c.jsxs("div",{className:"bg-primary border border-border-color rounded-lg p-3 space-y-3",children:[c.jsx("h4",{className:"text-sm font-medium text-text-primary",children:"Create Custom Agent"}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("input",{type:"text",placeholder:"Agent name",value:a.name,onChange:p=>l({...a,name:p.target.value}),className:"w-full bg-secondary border border-border-color rounded px-3 py-1.5 text-sm text-text-primary placeholder:text-text-secondary focus:outline-none focus:border-accent"}),c.jsx("input",{type:"text",placeholder:"Description",value:a.description,onChange:p=>l({...a,description:p.target.value}),className:"w-full bg-secondary border border-border-color rounded px-3 py-1.5 text-sm text-text-primary placeholder:text-text-secondary focus:outline-none focus:border-accent"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"text",placeholder:"Icon (emoji)",value:a.icon,onChange:p=>l({...a,icon:p.target.value}),className:"w-16 bg-secondary border border-border-color rounded px-2 py-1.5 text-center text-sm",maxLength:2}),c.jsx("span",{className:"text-xs text-text-secondary",children:"Use an emoji as icon"})]}),c.jsx("textarea",{placeholder:"System prompt - define how the agent should behave...",value:a.systemPrompt,onChange:p=>l({...a,systemPrompt:p.target.value}),className:"w-full bg-secondary border border-border-color rounded px-3 py-2 text-sm text-text-primary placeholder:text-text-secondary resize-none focus:outline-none focus:border-accent",rows:4})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:v,disabled:!a.name||!a.description||!a.systemPrompt,className:"flex-1 px-3 py-1.5 bg-accent hover:bg-accent/90 disabled:opacity-50 text-white text-sm rounded transition-colors",children:"Create Agent"}),c.jsx("button",{onClick:()=>s(!1),className:"px-3 py-1.5 bg-tertiary hover:bg-hover text-text-primary text-sm rounded transition-colors",children:"Cancel"})]})]}):c.jsxs("div",{className:"space-y-1",children:[t.map(p=>c.jsx("div",{className:`group relative flex items-start gap-3 p-2 rounded-lg cursor-pointer transition-colors ${p.id===e?"bg-accent/10 border border-accent/30":"hover:bg-primary border border-transparent"}`,onClick:()=>i!==p.id&&n(p),children:i===p.id?c.jsx("div",{className:"flex-1 space-y-2",children:c.jsx("input",{type:"text",defaultValue:p.name,onBlur:h=>_(p.id,{name:h.target.value}),onKeyDown:h=>h.key==="Enter"&&_(p.id,{name:h.target.value}),autoFocus:!0,className:"w-full bg-secondary border border-accent rounded px-2 py-1 text-sm text-text-primary",onClick:h=>h.stopPropagation()})}):c.jsxs(c.Fragment,{children:[c.jsx("span",{className:"text-2xl flex-shrink-0",children:p.icon}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"font-medium text-text-primary text-sm",children:p.name}),p.id===e&&c.jsx(np,{size:12,className:"text-accent"})]}),c.jsx("p",{className:"text-xs text-text-secondary line-clamp-2",children:p.description})]}),y(p.id)&&c.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[c.jsx("button",{onClick:h=>{h.stopPropagation(),o(p.id)},className:"p-1 hover:bg-tertiary rounded",children:c.jsx(iE,{size:12,className:"text-text-secondary"})}),c.jsx("button",{onClick:h=>{h.stopPropagation(),b(p.id)},className:"p-1 hover:bg-red-500/20 rounded",children:c.jsx(Tf,{size:12,className:"text-red-400"})})]})]})},p.id)),c.jsxs("button",{onClick:()=>s(!0),className:"w-full flex items-center gap-3 p-2 rounded-lg hover:bg-primary border border-dashed border-border-color hover:border-accent/50 transition-colors mt-2",children:[c.jsx("div",{className:"w-8 h-8 rounded-full bg-tertiary flex items-center justify-center flex-shrink-0",children:c.jsx(rp,{size:16,className:"text-text-secondary"})}),c.jsxs("div",{className:"text-left",children:[c.jsx("span",{className:"text-sm text-text-primary",children:"Create Custom Agent"}),c.jsx("p",{className:"text-xs text-text-secondary",children:"Define your own specialized AI"})]})]})]})},OC=({code:t,language:e})=>{const[n,r]=T.useState(!1),s=async()=>{await navigator.clipboard.writeText(t),r(!0),setTimeout(()=>r(!1),2e3)},i=o=>({sql:"SQL",python:"Python",javascript:"JavaScript",typescript:"TypeScript",json:"JSON",regex:"Regex",html:"HTML",css:"CSS"})[o]||o.toUpperCase();return c.jsxs("div",{className:"my-3 rounded-lg overflow-hidden bg-[#1e1e1e] border border-border-color",children:[c.jsxs("div",{className:"flex items-center justify-between px-3 py-2 bg-[#2d2d30] border-b border-border-color",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(aw,{size:14,className:"text-text-secondary"}),c.jsx("span",{className:"text-xs text-text-secondary",children:i(e)})]}),c.jsxs("button",{onClick:s,className:"flex items-center gap-1 px-2 py-1 text-xs text-text-secondary hover:text-text-primary hover:bg-hover rounded transition-colors",children:[n?c.jsx(np,{size:12}):c.jsx(lw,{size:12}),n?"Copied!":"Copy"]})]}),c.jsx("pre",{className:"p-3 overflow-x-auto text-sm font-mono text-text-primary",children:c.jsx("code",{children:t})})]})},CC=({content:t})=>{const e=[];let n=0;const r=/```(\w+)?\n([\s\S]*?)```/g;let s;for(;(s=r.exec(t))!==null;){if(s.index>n){const a=t.slice(n,s.index);e.push(c.jsx("p",{className:"whitespace-pre-wrap text-text-primary",children:jg(a)},n))}const i=s[1]||"text",o=s[2].trim();e.push(c.jsx(OC,{code:o,language:i},s.index)),n=s.index+s[0].length}if(n<t.length){const i=t.slice(n);e.push(c.jsx("p",{className:"whitespace-pre-wrap text-text-primary",children:jg(i)},n))}return c.jsx(c.Fragment,{children:e})},jg=t=>{const e=[];let n=0;const r=/`([^`]+)`/g;let s;for(;(s=r.exec(t))!==null;)s.index>n&&e.push(c.jsx("span",{children:t.slice(n,s.index)},`text-${n}`)),e.push(c.jsx("code",{className:"px-1.5 py-0.5 bg-primary rounded text-accent text-sm font-mono",children:s[1]},`code-${s.index}`)),n=s.index+s[0].length;return n<t.length&&e.push(c.jsx("span",{children:t.slice(n)},`text-${n}`)),e.length>0?e:[c.jsx("span",{children:t},"text")]},RC=({message:t,agent:e,onAction:n})=>{var u;const r=t.role==="user",[s,i]=T.useState(!1),o=async()=>{await navigator.clipboard.writeText(t.content),i(!0),setTimeout(()=>i(!1),2e3)},a=d=>{n==null||n(d)},l=d=>{switch(d){case"query":return c.jsx(Af,{size:14});case"insert":return c.jsx(zI,{size:14});default:return c.jsx(hw,{size:14})}};return c.jsxs("div",{className:`flex gap-3 ${r?"flex-row-reverse":""}`,children:[c.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center flex-shrink-0 ${r?"bg-accent":"bg-tertiary border border-border-color"}`,children:r?c.jsx(uE,{size:16,className:"text-white"}):e?c.jsx("span",{className:"text-lg",children:e.icon}):c.jsx(Ei,{size:16,className:"text-accent"})}),c.jsxs("div",{className:`flex-1 min-w-0 ${r?"items-end":"items-start"} flex flex-col`,children:[c.jsx("div",{className:`max-w-[85%] rounded-2xl px-4 py-2.5 ${r?"bg-accent text-white rounded-br-md":"bg-primary border border-border-color rounded-bl-md"}`,children:t.error?c.jsxs("div",{className:"flex items-center gap-2 text-red-400",children:[c.jsx(ow,{size:16}),c.jsx("span",{className:"text-sm",children:t.error})]}):c.jsxs("div",{className:`text-sm leading-relaxed ${r?"":"space-y-2"}`,children:[r?c.jsx("p",{className:"whitespace-pre-wrap",children:t.content}):c.jsx(CC,{content:t.content}),t.isStreaming&&c.jsx("span",{className:"inline-block w-2 h-4 bg-accent animate-pulse ml-1"})]})}),!r&&!t.error&&c.jsxs("div",{className:"flex items-center gap-1 mt-1 px-1",children:[c.jsxs("button",{onClick:o,className:"flex items-center gap-1 px-2 py-1 text-xs text-text-secondary hover:text-text-primary hover:bg-tertiary rounded transition-colors",children:[s?c.jsx(np,{size:12}):c.jsx(lw,{size:12}),s?"Copied":"Copy"]}),(u=t.actions)==null?void 0:u.map((d,f)=>c.jsxs("button",{onClick:()=>a(d),className:"flex items-center gap-1 px-2 py-1 text-xs text-accent hover:text-accent/80 hover:bg-accent/10 rounded transition-colors",children:[l(d.type),d.label]},f))]}),c.jsx("span",{className:"text-[10px] text-text-secondary mt-1 px-1",children:new Date(t.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]})},jC=({onClose:t})=>{const{providers:e,activeProvider:n,setProviderConfig:r,setActiveProvider:s}=sr(),[i,o]=T.useState({}),[a,l]=T.useState({}),[u,d]=T.useState([]),[f,m]=T.useState(!1),y=e[n],v=sl[n],_=p=>{const h=a[p];h&&(bC(p,h),r(p,{apiKey:h}),l({...a,[p]:""}))},b=async()=>{var p;m(!0);try{const h=e.ollama.baseUrl||"http://localhost:11434",g=await fetch(`${h}/api/tags`);if(g.ok){const x=((p=(await g.json()).models)==null?void 0:p.map(I=>I.name))||[];d(x),alert(`Connected! Found ${x.length} models.`)}else alert("Failed to connect to Ollama")}catch{alert("Failed to connect. Make sure Ollama is running.")}finally{m(!1)}};return c.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/50",children:c.jsxs("div",{className:"w-[600px] max-h-[80vh] bg-secondary rounded-lg shadow-xl flex flex-col overflow-hidden",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-border-color",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(ip,{size:20,className:"text-accent"}),c.jsx("h2",{className:"text-lg font-semibold text-text-primary",children:"AI Settings"})]}),c.jsx("button",{onClick:t,className:"p-1 hover:bg-hover rounded text-text-secondary hover:text-text-primary",children:c.jsx(fa,{size:20})})]}),c.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-6",children:[c.jsxs("div",{className:"space-y-3",children:[c.jsxs("label",{className:"text-sm font-medium text-text-primary flex items-center gap-2",children:[c.jsx(aE,{size:16}),"AI Provider"]}),c.jsx("div",{className:"grid grid-cols-2 gap-2",children:Object.keys(sl).map(p=>c.jsxs("button",{onClick:()=>s(p),className:`p-3 rounded-lg border text-left transition-colors ${n===p?"border-accent bg-accent/10":"border-border-color hover:border-accent/50 hover:bg-tertiary"}`,children:[c.jsx("div",{className:"font-medium text-text-primary",children:sl[p].name}),c.jsx("div",{className:"text-xs text-text-secondary mt-1",children:sl[p].description})]},p))})]}),v.requiresKey&&c.jsxs("div",{className:"space-y-3",children:[c.jsxs("label",{className:"text-sm font-medium text-text-primary flex items-center gap-2",children:[c.jsx(GI,{size:16}),"API Key"]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs("div",{className:"flex-1 relative",children:[c.jsx("input",{type:i[n]?"text":"password",placeholder:`Enter ${v.name} API key`,value:a[n]||"",onChange:p=>l({...a,[n]:p.target.value}),className:"w-full bg-primary border border-border-color rounded-lg px-3 py-2 pr-10 text-sm text-text-primary placeholder:text-text-secondary focus:outline-none focus:border-accent"}),c.jsx("button",{onClick:()=>o({...i,[n]:!i[n]}),className:"absolute right-3 top-1/2 -translate-y-1/2 text-text-secondary hover:text-text-primary",children:i[n]?c.jsx(UI,{size:16}):c.jsx($I,{size:16})})]}),c.jsx("button",{onClick:()=>_(n),disabled:!a[n],className:"px-4 py-2 bg-accent hover:bg-accent/90 disabled:opacity-50 text-white text-sm rounded-lg transition-colors",children:"Save"})]}),c.jsx("p",{className:"text-xs text-text-secondary",children:"Your API key is stored locally and never sent to our servers."})]}),v.requiresBaseUrl&&c.jsxs("div",{className:"space-y-3",children:[c.jsx("label",{className:"text-sm font-medium text-text-primary",children:"Base URL"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("input",{type:"text",placeholder:n==="ollama"?"http://localhost:11434":"https://api.example.com/v1",value:y.baseUrl||"",onChange:p=>r(n,{baseUrl:p.target.value}),className:"flex-1 bg-primary border border-border-color rounded-lg px-3 py-2 text-sm text-text-primary placeholder:text-text-secondary focus:outline-none focus:border-accent"}),n==="ollama"&&c.jsx("button",{onClick:b,disabled:f,className:"px-4 py-2 bg-tertiary hover:bg-hover disabled:opacity-50 text-text-primary text-sm rounded-lg transition-colors",children:f?"Testing...":"Test Connection"})]}),n==="ollama"&&u.length>0&&c.jsxs("p",{className:"text-xs text-success-color",children:["Connected! Available models: ",u.slice(0,5).join(", "),u.length>5&&` and ${u.length-5} more`]})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsx("label",{className:"text-sm font-medium text-text-primary",children:"Model"}),c.jsxs("div",{className:"relative",children:[c.jsxs("select",{value:y.model,onChange:p=>r(n,{model:p.target.value}),className:"w-full appearance-none bg-primary border border-border-color rounded-lg px-3 py-2 pr-10 text-sm text-text-primary focus:outline-none focus:border-accent",children:[AC[n].map(p=>c.jsx("option",{value:p,children:p},p)),n==="ollama"&&u.map(p=>c.jsx("option",{value:p,children:p},p)),n==="custom"&&y.model&&c.jsx("option",{value:y.model,children:y.model})]}),c.jsx(da,{size:16,className:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none text-text-secondary"})]}),n==="custom"&&c.jsx("input",{type:"text",placeholder:"Enter model name",value:y.model,onChange:p=>r(n,{model:p.target.value}),className:"w-full bg-primary border border-border-color rounded-lg px-3 py-2 text-sm text-text-primary placeholder:text-text-secondary focus:outline-none focus:border-accent"})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("label",{className:"text-sm font-medium text-text-primary",children:"Temperature"}),c.jsx("span",{className:"text-sm text-text-secondary",children:y.temperature})]}),c.jsx("input",{type:"range",min:"0",max:"2",step:"0.1",value:y.temperature,onChange:p=>r(n,{temperature:parseFloat(p.target.value)}),className:"w-full accent-accent"}),c.jsxs("div",{className:"flex justify-between text-xs text-text-secondary",children:[c.jsx("span",{children:"Focused (0)"}),c.jsx("span",{children:"Balanced (1)"}),c.jsx("span",{children:"Creative (2)"})]})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("label",{className:"text-sm font-medium text-text-primary",children:"Max Tokens"}),c.jsx("span",{className:"text-sm text-text-secondary",children:y.maxTokens})]}),c.jsx("input",{type:"range",min:"256",max:"8192",step:"256",value:y.maxTokens,onChange:p=>r(n,{maxTokens:parseInt(p.target.value)}),className:"w-full accent-accent"})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("label",{className:"text-sm font-medium text-text-primary",children:"Context Window"}),c.jsxs("span",{className:"text-sm text-text-secondary",children:[y.contextWindow," chars"]})]}),c.jsx("input",{type:"range",min:"1000",max:"50000",step:"1000",value:y.contextWindow,onChange:p=>r(n,{contextWindow:parseInt(p.target.value)}),className:"w-full accent-accent"}),c.jsx("p",{className:"text-xs text-text-secondary",children:"Maximum characters of file content to include in the context."})]})]}),c.jsx("div",{className:"p-4 border-t border-border-color bg-tertiary flex justify-end",children:c.jsx("button",{onClick:t,className:"px-4 py-2 bg-accent hover:bg-accent/90 text-white rounded-lg transition-colors",children:"Done"})})]})})},FC=()=>{const{isPanelOpen:t,panelWidth:e,togglePanel:n,setPanelWidth:r,agents:s,activeAgentId:i,sessions:o,activeSessionId:a,isLoading:l,showSettings:u,providers:d,activeProvider:f,toggleSettings:m,setActiveSession:y,createSession:v,deleteSession:_,renameSession:b,addMessage:p,updateMessage:h,setIsLoading:g,setStreamingMessageId:S}=sr(),{tabs:x,activeTabId:I,setQueryPanelOpen:N,setQueryLanguage:k}=Te(),[C,A]=T.useState(""),[L,H]=T.useState(!1),[ye,le]=T.useState(null),[j,R]=T.useState(null),[oe,M]=T.useState(""),W=T.useRef(null),K=T.useRef(null),O=T.useRef(null),D=T.useRef(null),fe=s.find($=>$.id===i)||s[0],be=o.find($=>$.id===a),xe=x.find($=>$.id===I);T.useEffect(()=>{var $;($=W.current)==null||$.scrollIntoView({behavior:"smooth"})},[be==null?void 0:be.messages,l]),T.useEffect(()=>{t&&setTimeout(()=>{var $;return($=K.current)==null?void 0:$.focus()},100)},[t,a]),T.useEffect(()=>{var ct;const $=mr=>{if(!D.current||!O.current)return;const Di=window.innerWidth-mr.clientX;r(Di)},ce=()=>{document.removeEventListener("mousemove",$),document.removeEventListener("mouseup",ce)},fn=()=>{document.addEventListener("mousemove",$),document.addEventListener("mouseup",ce)};return(ct=D.current)==null||ct.addEventListener("mousedown",fn),()=>{var mr;return(mr=D.current)==null?void 0:mr.removeEventListener("mousedown",fn)}},[r]),T.useEffect(()=>{const $=ce=>{(ce.ctrlKey||ce.metaKey)&&ce.shiftKey&&(ce.key==="a"||ce.key==="A")&&(ce.preventDefault(),n()),ce.key==="Escape"&&t&&!u&&n()};return window.addEventListener("keydown",$),()=>window.removeEventListener("keydown",$)},[t,n,u]),T.useEffect(()=>{},[]);const Yt=async()=>{if(!C.trim()||l)return;const $=C.trim();A("");let ce=a;if(!ce){const ct=xd()||void 0;ce=v(i,ct)}p(ce,{role:"user",content:$}),g(!0);const fn=p(ce,{role:"assistant",content:"",agentId:i,isStreaming:!0});S(fn);try{const ct=xe?xd():null,mr=yO(ct,fe.systemPrompt),Di=kC(d[f]),Ss=sr.getState().sessions.find(Is=>Is.id===ce),Ou=(Ss==null?void 0:Ss.messages.slice(0,-1).map(Is=>({role:Is.role,content:Is.content})))||[],f1={messages:[{role:"system",content:mr},...Ou,{role:"user",content:$}],provider:d[f],stream:!0};let ba="";for await(const Is of Di.stream(f1))ba+=Is,h(ce,fn,{content:ba});const h1=pr(ba);h(ce,fn,{content:ba,isStreaming:!1,actions:h1})}catch(ct){h(ce,fn,{content:"",isStreaming:!1,error:ct instanceof Error?ct.message:"Failed to get response"})}finally{g(!1),S(null)}},pr=$=>{const ce=[],fn=/```sql\n([\s\S]*?)\n```/g;let ct;for(;(ct=fn.exec($))!==null;)ce.push({type:"query",label:"Run SQL Query",query:ct[1].trim(),language:"sql"});const mr=/```python\n([\s\S]*?)\n```/g;for(;(ct=mr.exec($))!==null;)ce.push({type:"query",label:"Run Python Code",query:ct[1].trim(),language:"python"});const Di=/```(?:javascript|typescript|js|ts|json|regex|html|css)?\n([\s\S]*?)\n```/g;for(;(ct=Di.exec($))!==null;){const Ss=ct[1].trim();ce.find(Ou=>Ou.query===Ss)||ce.push({type:"insert",label:"Insert Code",code:Ss,position:"cursor"})}return ce.length>0?ce:void 0},l1=$=>{switch($.type){case"query":k($.language),N(!0),window.__pendingQuery=$.query;break;case"insert":if(xe){const{updateTabContent:ce}=Te.getState(),fn=xe.content+`
`+$.code;ce(xe.id,fn)}break}},c1=()=>{const $=xd()||void 0;v(i,$)},u1=$=>{R($.id),M($.name),le(null)},im=()=>{j&&oe.trim()&&b(j,oe.trim()),R(null),M("")},d1=$=>{$.key==="Enter"&&($.ctrlKey||$.metaKey)&&($.preventDefault(),Yt())};return t?c.jsxs(c.Fragment,{children:[c.jsxs("div",{ref:O,className:"fixed right-0 top-0 h-full bg-secondary border-l border-border-color flex flex-col z-50 shadow-xl",style:{width:e},children:[c.jsx("div",{ref:D,className:"absolute left-0 top-0 bottom-0 w-1 cursor-col-resize hover:bg-accent transition-colors flex items-center justify-center z-10",children:c.jsx("div",{className:"h-8 w-0.5 bg-border-color rounded-full"})}),c.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-border-color bg-tertiary",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Ei,{size:20,className:"text-accent"}),c.jsx("span",{className:"font-medium text-text-primary",children:"AI Agents"})]}),c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("button",{onClick:m,className:"p-1.5 hover:bg-hover rounded transition-colors",title:"Settings",children:c.jsx(sp,{size:16,className:"text-text-secondary"})}),c.jsx("button",{onClick:n,className:"p-1.5 hover:bg-hover rounded transition-colors",title:"Close (Esc)",children:c.jsx(sE,{size:16,className:"text-text-secondary"})})]})]}),c.jsxs("div",{className:"p-3 border-b border-border-color",children:[c.jsxs("button",{onClick:()=>H(!L),className:"w-full flex items-center justify-between p-2 bg-primary hover:bg-hover rounded-lg transition-colors",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-xl",children:fe.icon}),c.jsxs("div",{className:"text-left",children:[c.jsx("div",{className:"text-sm font-medium text-text-primary",children:fe.name}),c.jsx("div",{className:"text-xs text-text-secondary truncate max-w-[180px]",children:fe.description})]})]}),c.jsx(da,{size:16,className:`text-text-secondary transition-transform ${L?"rotate-180":""}`})]}),L&&c.jsx("div",{className:"mt-2 max-h-64 overflow-y-auto",children:c.jsx(TC,{agents:s,activeAgentId:i,onSelect:$=>{sr.getState().setActiveAgent($.id),H(!1)}})})]}),o.length>0&&c.jsxs("div",{className:"max-h-32 overflow-y-auto border-b border-border-color bg-primary/50",children:[c.jsxs("div",{className:"px-3 py-2 text-xs font-medium text-text-secondary uppercase tracking-wider flex items-center justify-between",children:[c.jsx("span",{children:"Recent Chats"}),c.jsx("span",{className:"text-[10px] bg-tertiary px-1.5 py-0.5 rounded",children:o.length})]}),o.slice(0,5).map($=>c.jsxs("div",{onClick:()=>y($.id),className:`group px-3 py-2 cursor-pointer flex items-center justify-between hover:bg-hover ${$.id===a?"bg-accent/10":""}`,children:[j===$.id?c.jsx("input",{type:"text",value:oe,onChange:ce=>M(ce.target.value),onBlur:im,onKeyDown:ce=>ce.key==="Enter"&&im(),autoFocus:!0,className:"flex-1 bg-primary border border-accent rounded px-2 py-0.5 text-sm",onClick:ce=>ce.stopPropagation()}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[c.jsx(ZI,{size:14,className:"text-text-secondary flex-shrink-0"}),c.jsx("span",{className:"text-sm text-text-primary truncate",children:$.name})]}),c.jsx("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100",children:c.jsx("button",{onClick:ce=>{ce.stopPropagation(),le(ye===$.id?null:$.id)},className:"p-1 hover:bg-tertiary rounded",children:c.jsx(nE,{size:12,className:"text-text-secondary"})})})]}),ye===$.id&&c.jsxs("div",{className:"absolute right-4 mt-16 w-32 bg-secondary border border-border-color rounded-lg shadow-lg z-20",children:[c.jsx("button",{onClick:ce=>{ce.stopPropagation(),u1($)},className:"w-full px-3 py-2 text-sm text-left hover:bg-hover text-text-primary",children:"Rename"}),c.jsx("button",{onClick:ce=>{ce.stopPropagation(),_($.id),le(null)},className:"w-full px-3 py-2 text-sm text-left hover:bg-hover text-red-400",children:"Delete"})]})]},$.id))]}),c.jsx("div",{className:"flex-1 overflow-y-auto p-3 space-y-4",children:be?c.jsxs(c.Fragment,{children:[be.messages.map($=>c.jsx(RC,{message:$,agent:$.agentId?s.find(ce=>ce.id===$.agentId):void 0,onAction:l1},$.id)),l&&!be.messages.find($=>$.isStreaming)&&c.jsxs("div",{className:"flex items-center gap-2 text-text-secondary",children:[c.jsx(kf,{size:16,className:"animate-spin"}),c.jsx("span",{className:"text-sm",children:"Thinking..."})]}),c.jsx("div",{ref:W})]}):c.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center p-4",children:[c.jsx(ip,{size:48,className:"text-accent/50 mb-4"}),c.jsx("h3",{className:"text-lg font-medium text-text-primary mb-2",children:"Start a conversation"}),c.jsx("p",{className:"text-sm text-text-secondary mb-6",children:"Ask questions about your files, get help with code, or analyze data."}),xe&&c.jsxs("div",{className:"text-xs text-text-secondary bg-primary px-3 py-2 rounded",children:["Current file: ",c.jsx("span",{className:"text-accent",children:xe.name})]})]})}),c.jsxs("div",{className:"p-3 border-t border-border-color bg-tertiary",children:[c.jsxs("div",{className:"flex items-end gap-2",children:[c.jsx("button",{onClick:c1,className:"p-2 hover:bg-hover rounded-lg transition-colors flex-shrink-0",title:"New Chat",children:c.jsx(rp,{size:18,className:"text-text-secondary"})}),c.jsxs("div",{className:"flex-1 relative",children:[c.jsx("textarea",{ref:K,value:C,onChange:$=>A($.target.value),onKeyDown:d1,placeholder:xe?`Ask about ${xe.name}...`:"Ask anything...",className:"w-full bg-primary border border-border-color rounded-lg px-3 py-2 pr-10 text-sm text-text-primary placeholder:text-text-secondary resize-none focus:outline-none focus:border-accent",rows:Math.min(5,C.split(`
`).length||1),style:{minHeight:"40px",maxHeight:"120px"}}),c.jsx("button",{onClick:Yt,disabled:!C.trim()||l,className:"absolute right-2 bottom-2 p-1.5 bg-accent hover:bg-accent/90 disabled:opacity-50 disabled:cursor-not-allowed rounded-md transition-colors",children:c.jsx(oE,{size:14,className:"text-white"})})]})]}),c.jsxs("div",{className:"flex items-center justify-between mt-2 text-xs text-text-secondary",children:[c.jsx("span",{children:"Ctrl+Enter to send"}),c.jsx("span",{children:f==="openai"?"GPT-4":f==="anthropic"?"Claude":f})]})]})]}),u&&c.jsx(jC,{onClose:m})]}):c.jsx("button",{onClick:n,className:"fixed right-4 top-4 z-40 p-2 bg-secondary hover:bg-tertiary rounded-lg shadow-lg border border-border-color transition-colors",title:"Open AI Agents Panel (Ctrl+Shift+A)",children:c.jsx(Ei,{size:20,className:"text-accent"})})};function PC(){const{isSidebarOpen:t,isZenMode:e,isSettingsOpen:n,queryPanelOpen:r,toggleSidebar:s,openCommandPalette:i,toggleSettings:o,toggleQueryPanel:a,addTab:l,tabs:u}=Te(),{togglePanel:d}=sr(),{openFile:f,openFolder:m,getFileLanguage:y}=cr();return Yr("mod+o",async()=>{const v=await f();v&&l({path:v.path,name:v.name,content:v.content,isDirty:!1,language:y(v.path)})}),Yr("mod+shift+o",m),Yr("mod+b",s),Yr("mod+shift+p",i),Yr("mod+,",o),Yr("mod+shift+q",a),Yr("mod+shift+a",d),T.useEffect(()=>{const v=Te.getState().theme;if(document.documentElement.classList.remove("dark","light"),v==="system"){const _=window.matchMedia("(prefers-color-scheme: dark)").matches;document.documentElement.classList.add(_?"dark":"light")}else document.documentElement.classList.add(v)},[]),c.jsxs("div",{className:`flex h-screen w-screen overflow-hidden ${e?"zen-mode":""}`,children:[!e&&t&&c.jsx(yE,{}),c.jsxs("div",{className:"flex flex-col flex-1 min-w-0",children:[!e&&c.jsx(xE,{}),c.jsx("div",{className:`relative ${r?"flex-1 min-h-0":"flex-1"}`,children:u.length===0?c.jsx(LC,{onOpenFile:f,onOpenFolder:m}):c.jsx(ON,{})}),r&&!e&&c.jsx(cO,{}),!e&&c.jsx(RN,{})]}),c.jsx(FC,{}),c.jsx(jN,{}),n&&c.jsx(FN,{onClose:o})]})}function LC({onOpenFile:t,onOpenFolder:e}){const{addTab:n}=Te(),{getFileLanguage:r}=cr(),{recentFiles:s}=Te(),i=async()=>{const o=await t();o&&n({path:o.path,name:o.name,content:o.content,isDirty:!1,language:r(o.path)})};return c.jsx("div",{className:"flex flex-col items-center justify-center h-full bg-primary",children:c.jsxs("div",{className:"text-center",children:[c.jsx("h1",{className:"text-5xl font-light mb-4 text-accent",children:"OpenText"}),c.jsx("p",{className:"text-text-secondary mb-8 text-lg",children:"A modern, fast text editor with AI"}),c.jsxs("div",{className:"flex gap-4 mb-12",children:[c.jsxs("button",{onClick:i,className:"px-6 py-3 bg-tertiary hover:bg-active rounded-lg transition-colors flex items-center gap-2",children:[c.jsx("span",{children:""}),c.jsx("span",{children:"Open File"}),c.jsx("span",{className:"text-text-secondary text-sm ml-2",children:"O"})]}),c.jsxs("button",{onClick:e,className:"px-6 py-3 bg-tertiary hover:bg-active rounded-lg transition-colors flex items-center gap-2",children:[c.jsx("span",{children:""}),c.jsx("span",{children:"Open Folder"}),c.jsx("span",{className:"text-text-secondary text-sm ml-2",children:"O"})]})]}),s.length>0&&c.jsxs("div",{className:"text-left",children:[c.jsx("h3",{className:"text-text-secondary text-sm uppercase tracking-wider mb-3",children:"Recent Files"}),c.jsx("div",{className:"space-y-1",children:s.slice(0,5).map(o=>c.jsx("button",{onClick:async()=>{const{readTextFile:a}=await Si(async()=>{const{readTextFile:f}=await Promise.resolve().then(()=>tp);return{readTextFile:f}},void 0),{basename:l}=await Si(async()=>{const{basename:f}=await Promise.resolve().then(()=>OI);return{basename:f}},void 0),u=await a(o),d=await l(o);n({path:o,name:d,content:u,isDirty:!1,language:r(o)})},className:"block w-full text-left px-3 py-2 rounded hover:bg-tertiary text-sm text-text-secondary hover:text-text-primary transition-colors truncate max-w-md",title:o,children:o},o))})]}),c.jsx("div",{className:"mt-12 text-text-secondary text-sm",children:c.jsxs("div",{className:"flex gap-6 justify-center flex-wrap",children:[c.jsx("span",{children:"P Command Palette"}),c.jsx("span",{children:"B Toggle Sidebar"}),c.jsx("span",{children:"A AI Agents"}),c.jsx("span",{children:", Settings"}),c.jsx("span",{children:"Q Query Panel"})]})})]})})}Rd.createRoot(document.getElementById("root")).render(c.jsx(Tr.StrictMode,{children:c.jsx(PC,{})}));export{Si as _};
